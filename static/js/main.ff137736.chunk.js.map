{"version":3,"sources":["img/Image.png","serviceWorker.js","context/auth.js","components/Locale.js","components/ConfirmationDialog.js","components/Header.js","views/SpecialistDashboard.js","components/CachedInput.js","components/organization/StyledExpansionPanelSummary.js","components/organization/styles.js","components/organization/Contact.js","components/organization/EmptySection.js","components/organization/Contacts.js","components/organization/Feed.js","components/organization/Feeds.js","components/organization/Location.js","components/organization/Locations.js","components/organization/GenderCriteria.js","components/organization/AgeCriteria.js","components/organization/Service.js","components/organization/Services.js","components/organization/TargetGroup.js","components/organization/TargetGroups.js","components/organization/Targets.js","views/OrganizationPanel.js","components/HelpBox.js","components/question/type/QuestionChooseMultiple.js","components/question/QuestionOptionDefaults.js","components/question/QuestionUtil.js","components/question/QuestionOptionRoute.js","components/question/type/QuestionChooseOne.js","components/question/QuestionRouteTable.js","components/question/Score.js","components/question/QuestionScoreInputDialog.js","components/question/QuestionScoreDialog.js","components/question/QuestionScoreList.js","components/question/QuestionScoreCreateDialog.js","components/question/QuestionScore.js","components/question/type/QuestionText.js","components/question/QuestionDetails.js","components/question/Question.js","components/question/SurveyScoreTable.js","components/question/SurveyScore.js","views/SurveyEdit.js","context/AuthRoute.js","views/Home.js","views/Login.js","views/Register.js","App.js","ApolloProvider.js","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","initialState","user","localStorage","getItem","decodedToken","jwtDecode","exp","Date","now","removeItem","AuthContext","createContext","login","userData","logout","authReducer","state","action","type","payload","AuthProvider","props","useReducer","dispatch","Provider","value","setItem","token","dataset","language","option","section","hasOwnProperty","text","l","Locale","Translation","setOpenState","setContentState","resolveDialog","data","title","description","openDialog","Promise","resolve","ConfirmationDialog","React","useState","open","setOpen","content","setContent","handleClose","closeDialog","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","color","variant","autoFocus","useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","display","breakpoints","up","sectionDesktop","sectionMobile","Header","useContext","classes","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","isMobileMenuOpen","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","handleLanguageChange","a","lang","reload","languageIcon","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","renderMobileMenu","IconButton","aria-label","src","alt","width","height","to","style","textDecoration","Badge","badgeContent","aria-controls","aria-haspopup","AppBar","position","Toolbar","edge","Typography","className","noWrap","ongoing","date","root","padding","paper","textAlign","palette","secondary","header","justifyContent","list","fab","margin","extendedIcon","SpecialistDashboard","Grid","container","direction","item","xs","gutterBottom","Fab","md","sm","List","map","x","ListItem","ListItemText","primary","ListItemSecondaryAction","onChange","cache","setCache","useEffect","TextField","onBlur","target","select","StyledExpansionPanelSummary","withStyles","overflow","textOverflow","ExpansionPanelSummary","styles","marginBottom","flexDirection","sectionTitleContainer","alignItems","sectionTitle","fontSize","fontWeight","marginLeft","expansionPanelContainer","expansionPanel","outerContainerPadding","expansionPanelPaddingReset","summaryWrapper","detailsWrapper","formControl","buttonAdd","alignSelf","hide","textCapitalizedSmall","letterSpacing","lineHeight","textTransform","textEmphasis","removeIconButton","unsavedChangesIcon","background","borderRadius","expansionPanelRemoveActionContainer","feedInnerContent","paddingTop","removeIconButton2","right","bottom","smallSpacingLeft","editSectionButton","infoTooltip","helpIcon","sectionButtonsContainer","wrapper","textInternalMsg","marginTop","grid1","name","phone","email","internalMsg","editable","handleOpen","handleEdit","handleRemove","globalClasses","globalStyles","icon","handleConfirmationDialog","Box","ExpansionPanel","expanded","isExpanded","expandIcon","ExpansionPanelDetails","FormControl","label","multiline","rows","defaultValue","Tooltip","size","Card","changed","setChanged","setEditable","contacts","setContacts","storedContacts","JSON","parse","index","isOpen","newContacts","newLocations","splice","hasData","length","EmptySection","contact","Contact","key","lastIndex","internal_msg","stringify","identifierAddWrapper","editableContainer","chipContainer","chip","username","identifiers","handleIdentifierRemove","CardContent","setIcon","InputProps","startAdornment","InputAdornment","onKeyDown","keyCode","push","identifier","Chip","onDelete","enabledFeeds","instagram","facebook","twitter","feeds","setFeeds","storedFeeds","newFeeds","handleAdd","feedSelectMenuAnchorEl","setFeedSelectMenuAnchorEl","handleCloseFeedSelectMenu","console","log","feed","Feed","Object","keys","ListItemIcon","selectFormCtrl","city","country","address","postalCode","InputLabel","Select","labelid","countries","code","cities","i","locations","setLocations","storedLocations","handleLocationEdit","handleLocationRemove","Location","handleGenderChange","RadioGroup","FormControlLabel","control","Radio","handleAgeChange","Slider","valueLabelDisplay","criterias","openService","requirements","openState","criteriaMenuAnchorEl","setCriteriaMenuAnchorEl","setAgeValue","setGenderValue","isMale","requirementsCache","genderIndex","findIndex","setAgeValues","min","max","ageIndex","newValue","setKelaValue","isRequired","kelaIndex","handleCloseAddCriteriaMenu","isFirstRequirement","checked","Switch","GenderCriteria","AgeCriteria","ageValue","Checkbox","startIcon","age","gender","kelaRehabilitee","services","setServices","storedServices","newServices","service","Service","todo","summary","criteria","targetGroups","setTargetGroups","targetGroupTypeMenuAnchorEl","setTargetGroupTypeMenuAnchorEl","storedTargetGroups","newTargetGroups","handleCloseTargetGroupTypeMenu","hasTargetGroups","targetGroup","TargetGroup","minWidth","selectEmpty","saveBtnContainer","targetBox","targets","setTargets","chipData","storedTargets","handleChipRemove","availableTargets","includes","top","left","profileImage","grid","maxWidth","topSection","bottomSection","sectionWrapper","OrganizationPanel","DefaultImage","Locations","Contacts","Services","Targets","TargetGroups","Feeds","infoSection","infoIcon","fill","main","HelpBox","children","options","optionInput","flex","optionButton","QuestionChooseMultiple","defaults","selectOne","one","uuid","score","route","isOther","many","selectMultiple","getDefaultRoute","questionList","questionIndex","question","defaultRoute","find","generateEmptyQuestion","OptionDefaults","handleSurveyQuestionUpdate","survey","surveyUpdate","questions","handleSurveyOptionUpdate","optionIndex","questionUpdate","handleSurveyOptionRemove","optionInputMenu","optionInputMenuItem","whiteSpace","optionIconLabel","optionIconLabelIcon","QuestionOptionRoute","helperText","defaultNextQuestionNumber","getDefaultRouteNumber","possibleRoutes","filter","InputLabelProps","shrink","SelectProps","MenuProps","badge","backgroundColor","dialog","border","divider","optionContainer","optionMain","optionAdvanced","optionSecondary","optionInputSecondary","optionInputScore","optionMove","borderLeft","optionRemove","subtitle","QuestionChooseOne","setSurvey","handleOtherUpdate","handleScoreUpdate","handleRouteUpdate","handleOptionReorder","b","optionCache","handleSurveyOptionReorder","handleOptionRemove","placement","handleSurveyOptionCreate","routeSection","table","tableLayout","routeCell","routeIconCell","routeIconCellIcon","QuestionRouteTable","incomingRoutes","routeList","q","unshift","listIncomingRoutes","outgoingRoutes","y","listOutgoingRoutes","Table","TableHead","TableRow","TableCell","TableBody","component","scope","SCORE_TYPE","OPERATOR_TYPE","ADD","SUBTRACT","MULTIPLY","DIVIDE","OPERATOR_SIGN","COMPARATOR_TYPE","GREATER_THAN","LESS_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN_OR_EQUAL","EQUAL","AND","OR","COMPARATOR_SIGN","parseScore","parsedScore","steps","row","parts","split","join","from","sign","step","compare","createValue","createOperator","createComparator","currentSourceId","currentQuestionId","setSectionState","setSourceState","setValueState","isFirst","maxHeight","listSection","ul","nested","paddingLeft","sectionInput","questionId","first","QuestionScoreInputDialog","openList","setOpenList","selectedSection","setSelectedSection","selectedSource","setSelectedSource","setValue","isConfirmEnabled","toggleListOpen","indexOf","handleRadioButtonToggle","handleQuestionSourceSelect","fullWidth","fullHeight","opacity","subheader","button","disableTypography","Collapse","in","timeout","unmountOnExit","disablePadding","role","undefined","tabIndex","disableRipple","inputProps","Number","autoComplete","autocompletetype","disabled","mathIconList","addition","mdiPlusBox","subtraction","mdiMinusBox","multiplication","mdiCloseBox","division","mdiDivisionBox","comparatorIconList","1","mdiCodeGreaterThan","2","mdiCodeLessThan","3","mdiCodeGreaterThanOrEqual","4","mdiCodeLessThanOrEqual","5","mdiEqualBox","6","mdiCircle","7","mdiCircleOutline","currentScoreId","menuEditIndex","menuEditReplace","mdi","buttonItem","paddingBottom","helperArrow","if","scoreStep","QuestionScoreDialog","input","setInput","useTheme","menuAnchorEl","setMenuAnchorEl","comparatorMenuAnchorEl","setComparatorMenuAnchorEl","mathOperatorTexts","comparatorTexts","depthLevel","lastStep","handleMenuClick","replace","inputCache","inputDialog","inputCombiner","inputValue","handleComparatorMenuClick","handleComparatorMenuClose","inputComparator","handleAddSourceClick","insertValue","renderInlineButtons","depthStyle","comparator","path","mdiCalculatorVariant","depthColor","Math","isInsideIfCondition","isInsideIfOutput","isLastInsideIfCondition","isLastInsideIfOutput","isPermanent","mdiCalculator","zIndex","values","QuestionScoreList","scoreList","handleValueUpdate","p","dataCache","line","scoreStepList","labelParts","actualStepCount","hasBadge","hasContent","isDefault","currentQuestion","answerList","Set","slice","createAnswerScoreName","setInputState","QuestionScoreCreateDialog","setName","QuestionScore","sourceDialog","optionTitle","QuestionText","questionTypes","allowAmpty","box","menu","details","routeSectionInput","inputMenu","inputMenuItem","QuestionDetails","panel","statusIconContainer","statusIcon","number","boxShadow","Question","handleExpandChange","contentRef","useRef","checkScoreStatus","checkRouteStatus","ref","current","offsetHeight","SurveyScoreTable","source","isAnswerScore","flat","align","defaultChecked","SurveyScore","intro","enabledQuestionTypes","sectionSubtitle","sectionPaper","sectionPaperScore","questionButton","developmentButton","scoreHeader","scoreTitle","scoreHelpBox","SurveyEdit","history","params","setExpanded","presetMenuAnchorEl","setPresetMenuAnchorEl","surveyData","handleChange","expandedCache","handleQuestionTypeClose","handleSurveyQuestionCreate","handlePresetClear","handlePresetClearAll","handlePresetMenuClose","surveyId","surveyPresets","isFirstQuestion","Paper","AuthRoute","Component","rest","render","handleRedirect","page","Home","LOGIN_USER","gql","Login","context","password","setValues","errors","setErrors","useMutation","update","proxy","result","onError","err","graphQLErrors","extensions","exception","variables","loginUser","justify","onSubmit","preventDefault","noValidate","error","REGISTER_USER","Register","confirmPassword","register","addUser","FormLabel","labelPlacement","createMuiTheme","App","ThemeProvider","exact","httpLink","createHttpLink","uri","client","ApolloClient","link","InMemoryCache","ReactDOM","ApolloProvider","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ff137736.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/**\n * @file The file holds user data at different states of authentication.\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { createContext, useReducer } from 'react';\nimport jwtDecode from 'jwt-decode';\n\nconst initialState = {\n  user: null\n};\n\n// Check local storage for authentication token\nif (localStorage.getItem('jwtToken')) {\n  const decodedToken = jwtDecode(localStorage.getItem('jwtToken'));\n\n  if (decodedToken.exp * 1000 < Date.now()) {\n    localStorage.removeItem('jwtToken');\n  } else {\n    initialState.user = decodedToken;\n  }\n}\n\nconst AuthContext = createContext({\n  user: null,\n  login: userData => {},\n  logout: () => {}\n});\n\nfunction authReducer(state, action) {\n  switch (action.type) {\n    case 'LOGIN':\n      return {\n        ...state,\n        user: action.payload\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        user: null\n      };\n    default:\n      return state;\n  }\n}\n\nfunction AuthProvider(props) {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  function login(userData) {\n    localStorage.setItem('jwtToken', userData.token);\n    dispatch({\n      type: 'LOGIN',\n      payload: userData\n    });\n  }\n\n  function logout() {\n    localStorage.removeItem('jwtToken');\n    dispatch({ type: 'LOGOUT' });\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{ user: state.user, login, logout }}\n      {...props}\n    />\n  );\n}\n\nexport { AuthContext, AuthProvider };\n","/**\n * @file A tiny but handy translation library that uses JSON files to translate between different languages.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nexport default (dataset, language = null) => option => {\n  if (!language) language = localStorage.getItem('lang') || 'en';\n\n  let section = dataset[option];\n  if (!section) return 'Unknown';\n\n  if (typeof section === 'string' && dataset.hasOwnProperty(section)) {\n    section = dataset[section];\n  }\n\n  let text = 'Unknown';\n  if (section.hasOwnProperty(language)) {\n    text = section[language];\n  } else if (section.hasOwnProperty('en')) {\n    text = section['en'];\n  }\n\n  return text;\n};\n","/**\r\n * @file Generic confirmation dialog that can be called from anywhere and uses promises for response handling.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport Translation from './question/questionLocale.json';\r\nimport Locale from './Locale';\r\n\r\nconst l = Locale(Translation);\r\n\r\nlet setOpenState = null;\r\nlet setContentState = null;\r\nlet resolveDialog = null;\r\nlet data = { title: 'Unknown', description: 'An error occurred.' };\r\n\r\nconst closeDialog = action => {\r\n  setOpenState(false);\r\n  if (resolveDialog) {\r\n    resolveDialog(action);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = ({ title = l`dialogTitleDefault`, description }) =>\r\n  new Promise(resolve => {\r\n    data = { title, description };\r\n    setContentState(data);\r\n    resolveDialog = resolve;\r\n    setOpenState(true);\r\n  });\r\n\r\nconst ConfirmationDialog = () => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [content, setContent] = React.useState(data);\r\n\r\n  setOpenState = setOpen;\r\n  setContentState = setContent;\r\n\r\n  const handleClose = action => () => {\r\n    closeDialog(action);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose('dismiss')}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{content.title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n          {content.description}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose('cancel')} color=\"primary\">\r\n          {l`dialogButtonCancel`}\r\n        </Button>\r\n        <Button\r\n          onClick={handleClose('confirm')}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          autoFocus\r\n        >\r\n          {l`dialogButtonConfirm`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ConfirmationDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\n * @file The placeholder header. Currently only has language change functionality.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { AuthContext } from '../context/auth';\nimport { openDialog } from './ConfirmationDialog';\n\nimport Translation from './headerLocale.json';\nimport Locale from './Locale';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex'\n    }\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none'\n    }\n  }\n}));\n\nexport const Header = () => {\n  const { user, logout } = useContext(AuthContext);\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n  const handleProfileMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = event => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const handleLanguageChange = async () => {\n    const action = await openDialog({\n      description: l`languageDialogConfirm`\n    });\n\n    if (action === 'confirm') {\n      let lang = 'en';\n      if ((localStorage.getItem('lang') || 'en') === 'en') lang = 'fi';\n\n      localStorage.setItem('lang', lang);\n\n      window.location.reload();\n    }\n  };\n\n  const language = localStorage.getItem('lang') || 'en';\n  let languageIcon = '/english.png';\n  if (language === 'fi') languageIcon = '/finnish.png';\n\n  const menuId = 'primary-search-account-menu';\n  const renderMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={menuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n    >\n      <MenuItem onClick={handleMenuClose}>{l`profileTitle`}</MenuItem>\n      <MenuItem onClick={logout}>{l`signOutTitle`}</MenuItem>\n    </Menu>\n  );\n\n  const mobileMenuId = 'primary-search-account-menu-mobile';\n  const renderMobileMenu = (\n    <Menu\n      anchorEl={mobileMoreAnchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={mobileMenuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMobileMenuOpen}\n      onClose={handleMobileMenuClose}\n    >\n      <MenuItem onClick={handleLanguageChange}>\n        <IconButton aria-label=\"language\" color=\"inherit\">\n          <img\n            src={languageIcon}\n            alt={l`languageName`}\n            width={24}\n            height={24}\n          />\n        </IconButton>\n        <p>{l`languageTitle`}</p>\n      </MenuItem>\n      <Link to=\"/test\" style={{ color: 'inherit', textDecoration: 'none' }}>\n        <MenuItem>\n          <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\n            <Badge badgeContent={11} color=\"secondary\">\n              <NotificationsIcon />\n            </Badge>\n          </IconButton>\n          <p>{l`notificationsTitle`}</p>\n        </MenuItem>\n      </Link>\n      <MenuItem onClick={handleProfileMenuOpen}>\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"primary-search-account-menu\"\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n        <p>{l`profileTitle`}</p>\n      </MenuItem>\n    </Menu>\n  );\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n\n          <Typography className={classes.title} variant=\"h6\" noWrap>\n            Peili\n          </Typography>\n\n          <div className={classes.grow} />\n          <div className={classes.sectionDesktop}>\n            <IconButton\n              aria-label=\"language\"\n              color=\"inherit\"\n              onClick={handleLanguageChange}\n            >\n              <img\n                src={languageIcon}\n                alt={l`languageName`}\n                width={24}\n                height={24}\n              />\n            </IconButton>\n\n            <Link to=\"/test\" style={{ color: 'inherit' }}>\n              <IconButton\n                aria-label=\"show 17 new notifications\"\n                color=\"inherit\"\n              >\n                <Badge badgeContent={17} color=\"secondary\">\n                  <NotificationsIcon />\n                </Badge>\n              </IconButton>\n            </Link>\n            <IconButton\n              edge=\"end\"\n              aria-label=\"account of current user\"\n              aria-controls={menuId}\n              aria-haspopup=\"true\"\n              onClick={handleProfileMenuOpen}\n              color=\"inherit\"\n            >\n              <AccountCircle />\n            </IconButton>\n          </div>\n          <div className={classes.sectionMobile}>\n            <IconButton\n              aria-label=\"show more\"\n              aria-controls={mobileMenuId}\n              aria-haspopup=\"true\"\n              onClick={handleMobileMenuOpen}\n              color=\"inherit\"\n            >\n              <MoreIcon />\n            </IconButton>\n          </div>\n        </Toolbar>\n      </AppBar>\n      {renderMobileMenu}\n      {renderMenu}\n    </>\n  );\n};\n","/**\n * @file A placeholder view for the specialists that lists all their surveys.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Fab from '@material-ui/core/Fab';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport React from 'react';\n\nconst data = {\n  ongoing: [\n    {\n      title: 'Test Survey #1',\n      date: '10.12.2020'\n    },\n    {\n      title: 'Test Survey #2',\n      date: '10.12.2020'\n    },\n    {\n      title: 'Test Survey #3',\n      date: '10.12.2020'\n    },\n    {\n      title: 'Test Survey #4',\n      date: '10.12.2020'\n    }\n  ]\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: 64\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  list: {\n    width: '100%'\n  },\n  fab: {\n    margin: theme.spacing(1)\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\nexport const SpecialistDashboard = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={3} direction=\"row-reverse\">\n        <Grid item xs={12} className={classes.header}>\n          <div>\n            <Typography variant=\"h3\">Survey Dashboard</Typography>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Create, Edit and Follow your surveys\n            </Typography>\n          </div>\n          <div>\n            <Fab\n              color=\"primary\"\n              variant=\"extended\"\n              aria-label=\"like\"\n              className={classes.fab}\n            >\n              <AddIcon className={classes.extendedIcon} />\n              Create Survey\n            </Fab>\n          </div>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h6\">Upcoming Surveys</Typography>\n          <List className={classes.list}>\n            {data.ongoing.map(x => (\n              <ListItem>\n                <ListItemText primary={x.title} secondary={x.date} />\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" aria-label=\"options\">\n                    <MoreIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h6\">Ongoing Surveys</Typography>\n          <List className={classes.list}>\n            {data.ongoing.map(x => (\n              <ListItem>\n                <ListItemText primary={x.title} secondary={x.date} />\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" aria-label=\"options\">\n                    <MoreIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h6\">Past Surveys</Typography>\n          <List className={classes.list}>\n            {data.ongoing.map(x => (\n              <ListItem>\n                <ListItemText primary={x.title} secondary={x.date} />\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" aria-label=\"options\">\n                    <MoreIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n","/**\n * @file Make the onChange event work like an onBlur event in the Material UI TextField. The new onChange event also returns the input value as the first parameter.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport TextField from '@material-ui/core/TextField';\nimport React from 'react';\n\nexport default ({ value, onChange, ...props }) => {\n  const [cache, setCache] = React.useState(value);\n\n  React.useEffect(() => {\n    setCache(value);\n  }, [value]);\n\n  const handleCacheUpdate = event => {\n    setCache(event.target.value);\n    if (props.select) onChange(event.target.value);\n  };\n\n  const handleUpdate = event => {\n    onChange(event.target.value);\n  };\n\n  return (\n    <TextField\n      {...props}\n      value={cache}\n      onBlur={handleUpdate}\n      onChange={handleCacheUpdate}\n    />\n  );\n};\n","import { ExpansionPanelSummary, withStyles } from '@material-ui/core';\n\nexport const StyledExpansionPanelSummary = withStyles({\n  content: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    margin: 0\n  }\n})(ExpansionPanelSummary);\n","import { makeStyles } from '@material-ui/styles';\n\nconst styles = makeStyles(theme => ({\n  section: {\n    marginBottom: '2rem',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  sectionTitleContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '0.5rem'\n  },\n  sectionTitle: {\n    fontSize: '1.125rem', // 18px\n    fontWeight: 600,\n    marginLeft: '1rem',\n    position: 'relative',\n    marginBottom: '0 !important'\n  },\n  expansionPanelContainer: {\n    marginBottom: '8px'\n  },\n  expansionPanel: {\n    padding: '1rem'\n  },\n  outerContainerPadding: {\n    padding: '1rem',\n    position: 'relative'\n  },\n  expansionPanelPaddingReset: {\n    padding: '0 !important',\n    margin: '0 !important'\n  },\n  summaryWrapper: {\n    flexDirection: 'column'\n  },\n  detailsWrapper: {\n    marginBottom: '20px'\n  },\n  formControl: {\n    width: '100%'\n  },\n  buttonAdd: {\n    width: 'fit-content',\n    alignSelf: 'flex-end'\n  },\n  hide: {\n    display: 'none'\n  },\n  textCapitalizedSmall: {\n    fontSize: '0.625rem', // 10px\n    fontWeight: 600,\n    letterSpacing: '1.5px',\n    lineHeight: 2,\n    textTransform: 'uppercase'\n  },\n  textEmphasis: {\n    fontWeight: 600,\n    fontSize: '1.25rem', // 20px\n    letterSpacing: '0.15px',\n    lineHeight: 1\n  },\n  removeIconButton: {\n    width: 'fit-content',\n    height: 'fit-content',\n    alignSelf: 'flex-end'\n  },\n  unsavedChangesIcon: {\n    width: '8px',\n    height: '8px',\n    background: 'red',\n    display: 'inline-block',\n    marginLeft: '0.5rem',\n    borderRadius: '100%'\n  },\n  expansionPanelRemoveActionContainer: {\n    display: 'flex',\n    alignSelf: 'flex-end',\n    justifyContent: 'flex-end'\n  },\n  feedInnerContent: {\n    padding: '0.5rem',\n    paddingTop: '1rem'\n  },\n  removeIconButton2: {\n    position: 'absolute',\n    right: '1rem',\n    bottom: '1rem'\n  },\n  smallSpacingLeft: {\n    marginLeft: '0.5rem'\n  },\n  editSectionButton: {\n    padding: '0.5rem'\n  },\n  infoTooltip: {\n    position: 'absolute',\n    right: '-1.5rem'\n  },\n  helpIcon: {\n    width: '1rem',\n    height: '1rem'\n  },\n  sectionButtonsContainer: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}));\n\nexport default styles;\n","import {\n  Box,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  FormControl,\n  Grid,\n  IconButton,\n  Tooltip,\n  Typography\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport HelpIcon from '@material-ui/icons/HelpOutline';\nimport { makeStyles } from '@material-ui/styles';\nimport React from 'react';\nimport TextField from '../CachedInput';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport { StyledExpansionPanelSummary } from './StyledExpansionPanelSummary';\nimport globalStyles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    marginBottom: 8\n  },\n  textInternalMsg: {\n    fontSize: '12px',\n    letterSpacing: '0.4px',\n    lineHeight: '1rem',\n    color: 'rgba(0, 0, 0, 0.6)',\n    marginTop: '0.5rem'\n  },\n  grid1: {\n    background: 'red'\n  }\n}));\n\nexport default ({\n  name,\n  phone,\n  email,\n  description,\n  internalMsg,\n  open,\n  editable,\n  handleOpen,\n  handleEdit,\n  handleRemove\n}) => {\n  const classes = useStyles();\n  const globalClasses = globalStyles();\n\n  const icon = editable ? <ExpandMoreIcon /> : null;\n\n  const handleExpandedChange = (event, isExpanded) => {\n    if (!editable) return;\n    handleOpen(isExpanded);\n  };\n\n  const handleNameChange = name => {\n    handleEdit({ name });\n  };\n\n  const handlePhoneChange = phone => {\n    handleEdit({ phone });\n  };\n\n  const handleEmailChange = email => {\n    handleEdit({ email });\n  };\n\n  const handleDescriptionChange = description => {\n    handleEdit({ description });\n  };\n\n  const handleInternalMsgChange = internalMsg => {\n    handleEdit({ internalMsg });\n  };\n\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeLocationConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') {\n      handleRemove();\n    }\n  };\n\n  const summary = () => {\n    return (\n      <StyledExpansionPanelSummary\n        className={globalClasses.expansionPanelPaddingReset}\n        expandIcon={icon}\n      >\n        <Box className={globalClasses.summaryWrapper}>\n          <Typography className={globalClasses.textCapitalizedSmall}>\n            {name}\n          </Typography>\n          <Typography className={globalClasses.textEmphasis}>\n            {phone}\n          </Typography>\n          <Typography>{description}</Typography>\n          <Typography className={classes.textInternalMsg}>\n            {internalMsg}\n          </Typography>\n        </Box>\n      </StyledExpansionPanelSummary>\n    );\n  };\n\n  return (\n    <Box className={classes.wrapper}>\n      <ExpansionPanel\n        className={globalClasses.expansionPanel}\n        expanded={editable ? open : false}\n        onChange={handleExpandedChange}\n      >\n        {!editable ? summary() : null}\n\n        <ExpansionPanelDetails\n          className={globalClasses.expansionPanelPaddingReset}\n        >\n          <Grid container spacing={2}>\n            <Grid item xs={10}>\n              <Grid\n                container\n                spacing={2}\n                className={globalClasses.detailsWrapper}\n              >\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('name')}\n                      value={name}\n                      onChange={handleNameChange}\n                    />\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('phone')}\n                      value={phone}\n                      onChange={handlePhoneChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('email')}\n                      value={email}\n                      onChange={handleEmailChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('description')}\n                      multiline\n                      rows=\"4\"\n                      variant=\"outlined\"\n                      defaultValue={description}\n                      onChange={handleDescriptionChange}\n                    />\n                    <Tooltip\n                      title={l('contactDescriptionHelpText')}\n                      className={globalClasses.infoTooltip}\n                    >\n                      <HelpIcon\n                        color=\"primary\"\n                        className={globalClasses.helpIcon}\n                      />\n                    </Tooltip>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('internalMsg')}\n                      multiline\n                      rows=\"2\"\n                      variant=\"outlined\"\n                      defaultValue={internalMsg}\n                      onChange={handleInternalMsgChange}\n                    />\n                    <Tooltip\n                      title={l('contactInternalMsgHelperText')}\n                      className={globalClasses.infoTooltip}\n                    >\n                      <HelpIcon\n                        color=\"primary\"\n                        className={globalClasses.helpIcon}\n                      />\n                    </Tooltip>\n                  </FormControl>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={2}>\n            <Grid container>\n              <Grid item xs={12}>\n                <Tooltip title={l('removeText')}>\n                  <IconButton></IconButton>\n                </Tooltip>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Tooltip title={l('removeText')}>\n            <IconButton\n              className={\n                editable ? globalClasses.removeIconButton2 : globalClasses.hide\n              }\n              onClick={handleConfirmationDialog}\n              aria-label={l('removeText')}\n              size=\"small\"\n            >\n              <DeleteIcon fontSize=\"inherit\" />\n            </IconButton>\n          </Tooltip>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </Box>\n  );\n};\n","import { Box, Card, Typography } from '@material-ui/core';\nimport React from 'react';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    background: '#dcdde7',\n    padding: '1rem',\n    margin: '0 1rem',\n    marginBottom: '1rem'\n  }\n}));\n\nexport default () => {\n  const classes = useStyles();\n  return (\n    <Card className={classes.container}>\n      <Typography>{l('emptySectionTitle')}</Typography>\n      <Typography>perkele</Typography>\n    </Card>\n  );\n};\n","import React from 'react';\nimport { Typography, Button, Box, IconButton } from '@material-ui/core';\n\nimport Contact from './Contact';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport EmptySection from './EmptySection';\n\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default ({ changed, setChanged }) => {\n  const globalClasses = styles();\n\n  const [open, setOpen] = React.useState(null);\n  const [editable, setEditable] = React.useState(false);\n  const [contacts, setContacts] = React.useState([]);\n\n  React.useEffect(() => {\n    const storedContacts = JSON.parse(localStorage.getItem('contacts') || '[]');\n    setContacts(storedContacts);\n  }, [setContacts]);\n\n  const handleOpen = index => isOpen => {\n    setOpen(isOpen ? index : null);\n  };\n\n  const handleEdit = index => data => {\n    setChanged(true);\n    let newContacts = [...contacts];\n    newContacts[index] = { ...newContacts[index], ...data };\n    setContacts(newContacts);\n  };\n\n  const handleAddContact = () => {\n    let lastIndex = contacts.length;\n\n    setContacts([\n      ...contacts,\n      {\n        name: '',\n        phone: '',\n        email: '',\n        description: '',\n        internal_msg: ''\n      }\n    ]);\n\n    setOpen(lastIndex);\n  };\n\n  const handleRemove = index => () => {\n    let newLocations = [...contacts];\n    newLocations.splice(index, 1);\n    setContacts(newLocations);\n  };\n\n  let hasData = contacts.length;\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('contacts', JSON.stringify(contacts));\n    setOpen(false);\n    setEditable(false);\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('contactsHeader')}\n          <span\n            className={changed ? globalClasses.unsavedChangesIcon : ''}\n          ></span>\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n\n      {!hasData ? <EmptySection /> : null}\n      {contacts.map((contact, index) => (\n        <Contact\n          {...contact}\n          key={index}\n          editable={editable}\n          open={open === index}\n          handleOpen={handleOpen(index)}\n          handleEdit={handleEdit(index)}\n          handleRemove={handleRemove(index)}\n        />\n      ))}\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button color=\"primary\" onClick={handleAddContact}>\n          {l('addLocationButtonText')}\n        </Button>\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Functionality of single social media feed. Editing username and adding hashtags\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport {\n  Box,\n  Card,\n  CardContent,\n  Chip,\n  Grid,\n  IconButton,\n  InputAdornment,\n  TextField,\n  Tooltip,\n  Typography\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport InstagramIcon from '@material-ui/icons/Instagram';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport { makeStyles } from '@material-ui/styles';\nimport React from 'react';\nimport CustomTextField from '../CachedInput';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport globalStyles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  identifierAddWrapper: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  editableContainer: {\n    marginTop: '8px'\n  },\n  chipContainer: {\n    paddingTop: '0px !important'\n  },\n  chip: {\n    marginRight: '0.25rem'\n  }\n}));\n\nexport default ({\n  type,\n  username,\n  identifiers,\n  editable,\n  handleEdit,\n  handleRemove\n}) => {\n  const classes = useStyles();\n  const globalClasses = globalStyles();\n\n  const setIcon = () => {\n    switch (type) {\n      case 'instagram':\n        return <InstagramIcon color=\"primary\" fontSize=\"small\" />;\n      case 'facebook':\n        return <FacebookIcon color=\"primary\" fontSize=\"small\" />;\n      case 'twitter':\n        return <TwitterIcon color=\"primary\" fontSize=\"small\" />;\n      default:\n        return;\n    }\n  };\n\n  const handleUsernameChange = username => {\n    handleEdit({ username });\n  };\n\n  const keyPress = event => {\n    if (event.keyCode === 13) {\n      const identifiersCache = identifiers;\n      identifiersCache.push(event.target.value);\n      handleEdit({ identifiers });\n      event.target.value = '';\n    }\n  };\n\n  const handleIdentifierRemove = index => () => {\n    identifiers.splice(index, 1);\n    handleEdit({ identifiers });\n  };\n\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeServiceConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') handleRemove();\n  };\n\n  return (\n    <Box className={globalClasses.expansionPanelContainer}>\n      <Card className={globalClasses.outerContainerPadding}>\n        <CardContent className={globalClasses.expansionPanelPaddingReset}>\n          <Typography\n            style={{ display: 'flex' }}\n            className={globalClasses.textEmphasis}\n          >\n            <span style={{ marginRight: '0.25rem' }}>{setIcon()}</span>\n            {type}\n          </Typography>\n          <Grid\n            container\n            spacing={2}\n            className={\n              editable ? classes.editableContainer : globalClasses.hide\n            }\n          >\n            <Grid item xs={4}>\n              <CustomTextField\n                value={username}\n                variant=\"outlined\"\n                onChange={handleUsernameChange}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">@</InputAdornment>\n                  )\n                }}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <Box>\n                <TextField\n                  variant=\"outlined\"\n                  onKeyDown={keyPress}\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">#</InputAdornment>\n                    )\n                  }}\n                />\n              </Box>\n            </Grid>\n            <Grid item xs={12}>\n              {identifiers.map((identifier, index) => {\n                return (\n                  <Chip\n                    className={classes.chip}\n                    label={'#' + identifier}\n                    color=\"primary\"\n                    key={index}\n                    onDelete={handleIdentifierRemove(index)}\n                  />\n                );\n              })}\n            </Grid>\n          </Grid>\n          <Grid\n            container\n            spacing={2}\n            className={editable ? globalClasses.hide : ''}\n          >\n            <Grid item xs={12}>\n              <Typography>{'@' + username}</Typography>\n            </Grid>\n            <Grid item xs={12} className={classes.chipContainer}>\n              {identifiers.map((identifier, index) => {\n                return (\n                  <Chip\n                    className={classes.chip}\n                    styles={{ marginRight: '0.25rem' }}\n                    label={'#' + identifier}\n                    color=\"primary\"\n                    key={index}\n                  />\n                );\n              })}\n            </Grid>\n          </Grid>\n        </CardContent>\n        <Tooltip title={l('removeText')}>\n          <IconButton\n            className={\n              editable ? globalClasses.removeIconButton2 : globalClasses.hide\n            }\n            onClick={handleConfirmationDialog}\n            aria-label={l('removeText')}\n            size=\"small\"\n          >\n            <DeleteIcon fontSize=\"inherit\" />\n          </IconButton>\n        </Tooltip>\n      </Card>\n    </Box>\n  );\n};\n","import {\n  Box,\n  Button,\n  IconButton,\n  ListItemIcon,\n  Menu,\n  MenuItem,\n  Typography\n} from '@material-ui/core';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport InstagramIcon from '@material-ui/icons/Instagram';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport React from 'react';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport EmptySection from './EmptySection';\nimport Locale from '../Locale';\nimport Feed from './Feed';\nimport Translation from './organizationLocale';\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default ({ changed, setChanged }) => {\n  const globalClasses = styles();\n\n  const enabledFeeds = {\n    instagram: <InstagramIcon fontSize=\"small\" />,\n    facebook: <FacebookIcon fontSize=\"small\" />,\n    twitter: <TwitterIcon fontSize=\"small\" />\n  };\n\n  const [editable, setEditable] = React.useState(false);\n  const [feeds, setFeeds] = React.useState([]);\n\n  React.useEffect(() => {\n    const storedFeeds = JSON.parse(localStorage.getItem('feeds') || '[]');\n    setFeeds(storedFeeds);\n  }, [setFeeds]);\n\n  const handleEdit = index => data => {\n    setChanged(true);\n    let newFeeds = [...feeds];\n    newFeeds[index] = { ...newFeeds[index], ...data };\n    setFeeds(newFeeds);\n  };\n\n  const handleAdd = type => {\n    setFeeds([\n      ...feeds,\n      {\n        type: type,\n        username: '',\n        identifiers: []\n      }\n    ]);\n  };\n\n  const handleRemove = index => () => {\n    let newFeeds = [...feeds];\n    newFeeds.splice(index, 1);\n    setFeeds(newFeeds);\n  };\n\n  let hasData = feeds.length;\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('feeds', JSON.stringify(feeds));\n    setEditable(false);\n  };\n\n  // New feed creation\n  const [feedSelectMenuAnchorEl, setFeedSelectMenuAnchorEl] = React.useState(\n    null\n  );\n  const handleOpenFeedSelectMenu = event => {\n    setFeedSelectMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseFeedSelectMenu = type => () => {\n    setFeedSelectMenuAnchorEl(null);\n    console.log(type);\n\n    switch (type) {\n      case 'instagram':\n        handleAdd(type);\n        console.log(feeds);\n        break;\n      case 'facebook':\n        handleAdd(type);\n        break;\n      case 'twitter':\n        handleAdd(type);\n        break;\n      default:\n        return;\n    }\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('feedsHeader')}\n          <span\n            className={changed ? globalClasses.unsavedChangesIcon : ''}\n          ></span>\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n\n      {!hasData ? <EmptySection /> : null}\n      {feeds.map((feed, index) => (\n        <Feed\n          {...feed}\n          key={index}\n          editable={editable}\n          type={feeds[index].type}\n          handleEdit={handleEdit(index)}\n          handleRemove={handleRemove(index)}\n        />\n      ))}\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button\n          className={editable ? globalClasses.buttonAdd : globalClasses.hide}\n          color=\"primary\"\n          onClick={handleOpenFeedSelectMenu}\n        >\n          {l('addFeedButtonText')}\n        </Button>\n        <Menu\n          id=\"add-feed-type-menu\"\n          anchorEl={feedSelectMenuAnchorEl}\n          keepMounted\n          open={Boolean(feedSelectMenuAnchorEl)}\n          onClose={handleCloseFeedSelectMenu}\n        >\n          {Object.keys(enabledFeeds).map(x => (\n            <MenuItem onClick={handleCloseFeedSelectMenu(x)} key={x}>\n              <ListItemIcon>{enabledFeeds[x]}</ListItemIcon>\n              <Typography>{l`feedType`[x]}</Typography>\n            </MenuItem>\n          ))}\n        </Menu>\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","import React from 'react';\nimport {\n  Box,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  FormControl,\n  Grid,\n  IconButton,\n  InputLabel,\n  MenuItem,\n  Select,\n  Tooltip,\n  Typography\n} from '@material-ui/core';\nimport TextField from '../CachedInput';\n\nimport { StyledExpansionPanelSummary } from './StyledExpansionPanelSummary';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport cities from '../../data/cities';\n// data\nimport countries from '../../data/countries';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport globalStyles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    marginBottom: 8\n  },\n  formControl: {\n    width: '80%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  selectFormCtrl: {\n    width: '100%'\n  },\n  removeIconButton: {\n    width: 'fit-content',\n    height: 'fit-content',\n    alignSelf: 'flex-end'\n  }\n}));\n\nexport default ({\n  city,\n  country,\n  address,\n  postalCode,\n  editable,\n  open,\n  handleOpen,\n  handleEdit,\n  handleRemove\n}) => {\n  const classes = useStyles();\n  const globalClasses = globalStyles();\n\n  // Editable\n  const icon = editable ? <ExpandMoreIcon /> : null;\n\n  const handleExpandedChange = (event, isExpanded) => {\n    if (!editable) return;\n    handleOpen(isExpanded);\n  };\n\n  // Country select\n  const handleCountryChange = event => {\n    handleEdit({ country: event.target.value });\n  };\n\n  // City select\n  const handleCityChange = event => {\n    handleEdit({ city: event.target.value });\n  };\n\n  // Address\n  const handleAddressChange = address => {\n    handleEdit({ address });\n  };\n\n  const handlePostalCodeChange = postalCode => {\n    handleEdit({ postalCode });\n  };\n\n  // Opens the location remove confirmation panel\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeLocationConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') {\n      handleRemove();\n    }\n  };\n\n  const summary = () => {\n    return (\n      <StyledExpansionPanelSummary\n        className={globalClasses.expansionPanelPaddingReset}\n        expandIcon={icon}\n        aria-controls=\"panel1bh-content\"\n        id=\"panel1bh-header\"\n      >\n        <Box className={globalClasses.summaryWrapper}>\n          <Typography className={globalClasses.textCapitalizedSmall}>\n            {postalCode + ', ' + city}\n          </Typography>\n          <Typography className={globalClasses.textEmphasis}>\n            {address}\n          </Typography>\n        </Box>\n      </StyledExpansionPanelSummary>\n    );\n  };\n\n  return (\n    <Box className={classes.wrapper}>\n      <ExpansionPanel\n        expanded={editable ? open : false}\n        className={globalClasses.expansionPanel}\n        onChange={handleExpandedChange}\n      >\n        {!editable ? summary() : null}\n        <ExpansionPanelDetails\n          className={globalClasses.expansionPanelPaddingReset}\n        >\n          <FormControl className={classes.formControl}>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <FormControl className={globalClasses.formControl}>\n                  <InputLabel id=\"location-select-country-label\">\n                    {l('countrySelectLabel')}\n                  </InputLabel>\n                  <Select\n                    className={classes.select}\n                    labelid=\"location-select-country-label\"\n                    value={country}\n                    onChange={handleCountryChange}\n                  >\n                    {countries.map(x => (\n                      <MenuItem key={x.code} value={x.code}>\n                        {x.name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={6}>\n                <FormControl className={globalClasses.formControl}>\n                  <InputLabel id=\"location-select-city-label\">\n                    {l('citySelectLabel')}\n                  </InputLabel>\n                  <Select\n                    className={classes.select}\n                    labelid=\"location-select-city-label\"\n                    value={city}\n                    onChange={handleCityChange}\n                  >\n                    {cities.map((x, i) => (\n                      <MenuItem key={i} value={x.name}>\n                        {x.name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n            </Grid>\n            <FormControl>\n              <TextField\n                label={l('addressInputLabel')}\n                margin=\"normal\"\n                value={address}\n                onChange={handleAddressChange}\n              />\n            </FormControl>\n            <Grid container>\n              <Grid item xs={6}>\n                <FormControl>\n                  <TextField\n                    label={l('postalCodeInputLabel')}\n                    margin=\"normal\"\n                    value={postalCode}\n                    onChange={handlePostalCodeChange}\n                  />\n                </FormControl>\n              </Grid>\n            </Grid>\n          </FormControl>\n          <Tooltip title={l('removeText')}>\n            <IconButton\n              className={\n                editable ? globalClasses.removeIconButton2 : globalClasses.hide\n              }\n              onClick={handleConfirmationDialog}\n              aria-label={l('removeText')}\n              size=\"small\"\n            >\n              <DeleteIcon fontSize=\"inherit\" />\n            </IconButton>\n          </Tooltip>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </Box>\n  );\n};\n","import { Box, Button, IconButton, Typography } from '@material-ui/core';\nimport React from 'react';\nimport Locale from '../Locale';\nimport Location from './Location';\nimport Translation from './organizationLocale';\nimport styles from './styles';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst l = Locale(Translation);\n\nexport default ({ locations, setLocations }) => {\n  const globalClasses = styles();\n\n  const [open, setOpen] = React.useState(null);\n  const [editable, setEditable] = React.useState(false);\n\n  React.useEffect(() => {\n    // get locations (or empty array if there are no locations) from local storage\n    const storedLocations = JSON.parse(\n      localStorage.getItem('locations') || '[]'\n    );\n    // display retrieved locations on the screen\n    setLocations(storedLocations);\n  }, [setLocations]);\n\n  // Handles opening of expandable cards\n  const handleOpen = index => isOpen => {\n    setOpen(isOpen ? index : null);\n  };\n\n  // Save changes to the edited location(s)\n  const handleLocationEdit = index => data => {\n    let newLocations = [...locations];\n    newLocations[index] = { ...newLocations[index], ...data };\n    setLocations(newLocations);\n  };\n\n  // Remove selected location by index\n  const handleLocationRemove = index => () => {\n    let newLocations = [...locations];\n    newLocations.splice(index, 1);\n    setLocations(newLocations);\n  };\n\n  // Create new location\n  const handleAddLocation = () => {\n    let lastIndex = locations.length;\n\n    setLocations([\n      ...locations,\n      {\n        country: 'FI',\n        city: '',\n        address: '',\n        postalCode: ''\n      }\n    ]);\n\n    // Set created location card to be expanded\n    setOpen(lastIndex);\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('locations', JSON.stringify(locations));\n    setOpen(false);\n    setEditable(false);\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('locationsHeader')}\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      {locations.map((location, index) => (\n        <Location\n          {...location}\n          key={index}\n          editable={editable}\n          open={open === index}\n          handleOpen={handleOpen(index)}\n          handleEdit={handleLocationEdit(index)}\n          handleRemove={handleLocationRemove(index)}\n        />\n      ))}\n\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button\n          className={editable ? globalClasses.buttonAdd : globalClasses.hide}\n          color=\"primary\"\n          onClick={handleAddLocation}\n        >\n          {l('addLocationButtonText')}\n        </Button>\n\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","import React from 'react';\nimport {\n  Typography,\n  FormControl,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  Box\n} from '@material-ui/core';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default ({ value, handleGenderChange }) => {\n  const globalClasses = styles();\n\n  return (\n    <Box>\n      <Typography className={globalClasses.textCapitalizedSmall}>\n        {l('gender')}\n      </Typography>\n      <FormControl>\n        <RadioGroup\n          value={value ? 'male' : 'female'}\n          onChange={handleGenderChange}\n        >\n          <FormControlLabel\n            value=\"female\"\n            label=\"female\"\n            control={<Radio color=\"primary\" />}\n          />\n          <FormControlLabel\n            value=\"male\"\n            label=\"male\"\n            control={<Radio color=\"primary\" />}\n          />\n        </RadioGroup>\n      </FormControl>\n    </Box>\n  );\n};\n","import React from 'react';\nimport { Box, Slider, Typography } from '@material-ui/core';\n\nimport styles from './styles';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nconst l = Locale(Translation);\n\nexport default ({ value, handleAgeChange }) => {\n  const globalClasses = styles();\n\n  return (\n    <Box>\n      <Typography className={globalClasses.textCapitalizedSmall}>\n        {l('age')}\n      </Typography>\n      <Slider\n        value={value}\n        onChange={handleAgeChange}\n        valueLabelDisplay=\"auto\"\n      />\n    </Box>\n  );\n};\n","import {\n  Box,\n  Button,\n  Checkbox,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  FormControl,\n  FormControlLabel,\n  Grid,\n  IconButton,\n  Menu,\n  MenuItem,\n  Radio,\n  RadioGroup,\n  Slider,\n  Switch,\n  Tooltip,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\nimport TextField from '../CachedInput';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport { StyledExpansionPanelSummary } from './StyledExpansionPanelSummary';\n\nimport globalStyles from './styles';\n\nimport GenderCriteria from './GenderCriteria';\nimport AgeCriteria from './AgeCriteria';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  description: {\n    marginTop: '0.75rem'\n  },\n  criterias: {\n    marginTop: '0.75rem'\n  }\n}));\n\nexport default ({\n  name,\n  description,\n  openService,\n  requirements,\n  open,\n  editable,\n  handleOpen,\n  handleEdit,\n  handleRemove\n}) => {\n  const globalClasses = globalStyles();\n  const classes = useStyles();\n\n  const [openState, setOpenState] = React.useState(false);\n  const [criteriaMenuAnchorEl, setCriteriaMenuAnchorEl] = React.useState(null);\n  const [ageValue, setAgeValue] = React.useState([18, 30]);\n\n  const icon = editable ? <ExpandMoreIcon /> : null;\n\n  const handleCheckedChange = event => {\n    setOpenState({ openState: event.target.checked });\n    handleEdit({ openService: openState });\n  };\n\n  const enabledCriterias = {\n    age: 'age',\n    gender: 'gender',\n    kelaRehabilitee: 'kelaRehabilitee'\n  };\n  const handleExpandedChange = (event, isExpanded) => {\n    if (!editable) return;\n    handleOpen(isExpanded);\n  };\n\n  const handleNameChange = name => {\n    handleEdit({ name });\n  };\n\n  const handleDescriptionChange = description => {\n    handleEdit({ description });\n  };\n\n  const handleOpenAddCriteriaMenu = event => {\n    setCriteriaMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleGenderChange = event => {\n    setGenderValue(event.target.value === 'male');\n  };\n\n  const setGenderValue = isMale => {\n    const requirementsCache = requirements;\n    const genderIndex = requirementsCache.findIndex(x => x.type === 'gender');\n    if (genderIndex < 0) {\n      requirementsCache.push({ type: 'gender', isMale });\n    } else {\n      requirementsCache[genderIndex].isMale = isMale;\n    }\n\n    handleEdit({ requirements: requirementsCache });\n  };\n\n  const setAgeValues = (min, max) => {\n    const requirementsCache = requirements;\n    const ageIndex = requirementsCache.findIndex(x => x.type === 'age');\n    if (ageIndex < 0) {\n      requirementsCache.push({ type: 'age', min, max });\n    } else {\n      requirementsCache[ageIndex].min = min;\n      requirementsCache[ageIndex].max = max;\n    }\n  };\n\n  const handleAgeChange = (event, newValue) => {\n    setAgeValue(newValue);\n    setAgeValues(newValue[0], newValue[1]);\n  };\n\n  const setKelaValue = isRequired => {\n    const requirementsCache = requirements;\n    const kelaIndex = requirementsCache.findIndex(x => x.type === 'kela');\n\n    if (kelaIndex < 0) {\n      requirementsCache.push({ type: 'kela', isRequired });\n    } else {\n      requirementsCache[kelaIndex].isRequired = isRequired;\n    }\n\n    handleEdit({ requirements: requirementsCache });\n  };\n\n  const gender = value => {\n    return (\n      <Box>\n        <Typography className={globalClasses.textCapitalizedSmall}>\n          {l('gender')}\n        </Typography>\n        <FormControl>\n          <RadioGroup\n            value={value ? 'male' : 'female'}\n            onChange={handleGenderChange}\n          >\n            <FormControlLabel\n              value=\"female\"\n              label=\"female\"\n              control={<Radio color=\"primary\" />}\n            />\n            <FormControlLabel\n              value=\"male\"\n              label=\"male\"\n              control={<Radio color=\"primary\" />}\n            />\n          </RadioGroup>\n        </FormControl>\n      </Box>\n    );\n  };\n\n  const age = () => {\n    return (\n      <Box>\n        <Typography className={globalClasses.textCapitalizedSmall}>\n          {l('age')}\n        </Typography>\n        <Slider\n          value={ageValue}\n          onChange={handleAgeChange}\n          valueLabelDisplay=\"auto\"\n        />\n      </Box>\n    );\n  };\n\n  const kela = value => {\n    return (\n      <Box>\n        <Typography className={globalClasses.textCapitalizedSmall}>\n          {l('serviceCriteriaKelaRehabilitee')}\n        </Typography>\n        <FormControl>\n          <FormControlLabel\n            label={l('serviceCriteriaKelaRehabilitee')}\n            control={\n              <Checkbox\n                checked={value}\n                onChange={setKelaValue}\n                value={value}\n                color=\"primary\"\n              />\n            }\n          />\n        </FormControl>\n      </Box>\n    );\n  };\n\n  const handleCloseAddCriteriaMenu = type => () => {\n    setCriteriaMenuAnchorEl(null);\n\n    switch (type) {\n      case 'gender':\n        setGenderValue(true);\n        break;\n      case 'age':\n        setAgeValues(0, 1);\n        break;\n      case 'kelaRehabilitee':\n        setKelaValue(true);\n        break;\n      default:\n        return;\n    }\n  };\n\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeServiceConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') handleRemove();\n  };\n\n  const summary = () => {\n    return (\n      <StyledExpansionPanelSummary\n        className={globalClasses.expansionPanelPaddingReset}\n      >\n        <Box className={globalClasses.summaryWrapper}>\n          <Typography className={globalClasses.textCapitalizedSmall}>\n            {openService ? l('serviceOpen') : l('serviceClosed')}\n          </Typography>\n          <Typography className={globalClasses.textEmphasis}>{name}</Typography>\n          <Typography className={classes.description}>{description}</Typography>\n          <Box className={classes.criterias}>\n            <Typography className={globalClasses.textCapitalizedSmall}>\n              {l('criterias')}\n            </Typography>\n            <Grid container spacing={1}>\n              {requirements.map(x => {\n                if (x.type === 'gender')\n                  return (\n                    <Grid item xs={6}>\n                      <FormControlLabel\n                        checked={true}\n                        label={x.isMale ? l('forMen') : l('forWomen')}\n                        control={<Radio color=\"primary\" />}\n                      />\n                    </Grid>\n                  );\n                if (x.type === 'kela')\n                  return (\n                    <Grid item xs={6}>\n                      <FormControlLabel\n                        checked={true}\n                        label={l('forKelaRehabs')}\n                        control={<Radio color=\"primary\" />}\n                      />\n                    </Grid>\n                  );\n                if (x.type === 'age')\n                  return (\n                    <Grid item xs={6}>\n                      <Typography>\n                        {'Age Limit: ' + x.min + ' - ' + x.max}\n                      </Typography>\n                    </Grid>\n                  );\n              })}\n            </Grid>\n          </Box>\n        </Box>\n      </StyledExpansionPanelSummary>\n    );\n  };\n\n  const isFirstRequirement = !requirements.length;\n\n  return (\n    <Box className={globalClasses.expansionPanelContainer}>\n      <ExpansionPanel\n        className={globalClasses.expansionPanel}\n        expanded={editable ? open : false}\n        onChange={handleExpandedChange}\n      >\n        {!editable ? summary() : null}\n        <ExpansionPanelDetails\n          className={globalClasses.expansionPanelPaddingReset}\n        >\n          <Grid container spacing={2}>\n            <Grid item xs={10}>\n              <Grid\n                container\n                spacing={2}\n                className={globalClasses.detailsWrapper}\n              >\n                <Grid item xs={6}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('name')}\n                      value={name}\n                      onChange={handleNameChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('inputDescription')}\n                      value={description}\n                      onChange={handleDescriptionChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          onChange={handleCheckedChange}\n                          value={openState}\n                          color=\"primary\"\n                        />\n                      }\n                      label={l('serviceClosedRadioButtonHelper')}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  {requirements.map(x => {\n                    if (x.type === 'gender')\n                      return (\n                        <GenderCriteria\n                          value={x.isMale}\n                          handleGenderChange={handleGenderChange}\n                        />\n                      );\n                    if (x.type === 'age')\n                      return (\n                        <AgeCriteria\n                          value={x.ageValue}\n                          handleAgeChange={handleAgeChange}\n                        />\n                      );\n                    if (x.type === 'kela') return kela(x.isRequired);\n                    return null;\n                  })}\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<AddIcon />}\n                    size=\"small\"\n                    onClick={handleOpenAddCriteriaMenu}\n                  >\n                    {isFirstRequirement\n                      ? l('serviceCriteriaAddFirstButton')\n                      : l('serviceCriteriaAddButton')}\n                  </Button>\n                  <Menu\n                    id=\"service-menu-criteria-type\"\n                    anchorEl={criteriaMenuAnchorEl}\n                    keepMounted\n                    open={Boolean(criteriaMenuAnchorEl)}\n                    onClose={handleCloseAddCriteriaMenu}\n                  >\n                    {Object.keys(enabledCriterias).map(x => (\n                      <MenuItem onClick={handleCloseAddCriteriaMenu(x)} key={x}>\n                        <Typography variant=\"inherit\">\n                          {l`serviceCriteriaType`[x]}\n                        </Typography>\n                      </MenuItem>\n                    ))}\n                  </Menu>\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid\n              item\n              xs={2}\n              className={globalClasses.expansionPanelRemoveActionContainer}\n            >\n              <Tooltip title={l('removeText')}>\n                <IconButton\n                  className={globalClasses.removeIconButton}\n                  onClick={handleConfirmationDialog}\n                  aria-label={l('removeText')}\n                  size=\"small\"\n                >\n                  <DeleteIcon fontSize=\"inherit\" />\n                </IconButton>\n              </Tooltip>\n            </Grid>\n          </Grid>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </Box>\n  );\n};\n","import React from 'react';\nimport { Typography, Button, Box, IconButton } from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport Service from './Service';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default ({ changed, setChanged }) => {\n  const globalClasses = styles();\n\n  const [open, setOpen] = React.useState(null);\n  const [editable, setEditable] = React.useState(false);\n  const [services, setServices] = React.useState([]);\n\n  React.useEffect(() => {\n    const storedServices = JSON.parse(localStorage.getItem('services') || '[]');\n    setServices(storedServices);\n  }, [setServices]);\n\n  const handleOpen = index => isOpen => {\n    setOpen(isOpen ? index : null);\n  };\n\n  const handleEdit = index => data => {\n    setChanged(true);\n    let newServices = [...services];\n    newServices[index] = { ...newServices[index], ...data };\n    setServices(newServices);\n  };\n\n  const handleAdd = () => {\n    let lastIndex = services.length;\n\n    setServices([\n      ...services,\n      {\n        name: '',\n        description: '',\n        openService: true,\n        requirements: []\n      }\n    ]);\n\n    setOpen(lastIndex);\n  };\n\n  const handleRemove = index => () => {\n    let newServices = [...services];\n    newServices.splice(index, 1);\n    setServices(newServices);\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('services', JSON.stringify(services));\n    setOpen(false);\n    setEditable(false);\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('servicesHeader')}\n          <span\n            className={changed ? globalClasses.unsavedChangesIcon : ''}\n          ></span>\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      {services.map((service, index) => (\n        <Service\n          {...service}\n          key={index}\n          editable={editable}\n          open={open === index}\n          handleOpen={handleOpen(index)}\n          handleEdit={handleEdit(index)}\n          handleRemove={handleRemove(index)}\n        />\n      ))}\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button\n          className={editable ? globalClasses.buttonAdd : globalClasses.hide}\n          color=\"primary\"\n          onClick={handleAdd}\n        >\n          {l('addServiceButtonText')}\n        </Button>\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","// Component for target groups eg. criteria: Age from 18 to 30\n// One criteria per component\n\nimport React from 'react';\nimport {\n  Typography,\n  Box,\n  ExpansionPanel,\n  ExpansionPanelDetails\n} from '@material-ui/core';\nimport { StyledExpansionPanelSummary } from './StyledExpansionPanelSummary';\n// styles\nimport styles from './styles';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport GenderCriteria from './GenderCriteria';\nimport AgeCriteria from './AgeCriteria';\n\nconst useStyles = makeStyles(theme => ({\n  todo: {\n    flexDirection: 'column'\n  },\n  wrapper: {\n    width: '60%'\n  },\n  summary: {\n    width: '60%'\n  }\n}));\n\nexport default ({ name, criteria, editable }) => {\n  const classes = useStyles();\n  const globalClasses = styles();\n\n  const [ageValue, setAgeValue] = React.useState([18, 30]);\n\n  const setAgeValues = (min, max) => {\n    const requirementsCache = criteria;\n    const ageIndex = requirementsCache.findIndex(x => x.type === 'age');\n    if (ageIndex < 0) {\n      requirementsCache.push({ type: 'age', min, max });\n    } else {\n      requirementsCache[ageIndex].min = min;\n      requirementsCache[ageIndex].max = max;\n    }\n  };\n\n  const handleAgeChange = (event, newValue) => {\n    setAgeValue(newValue);\n    setAgeValues(newValue[0], newValue[1]);\n  };\n\n  const handleType = () => {\n    if (name === 'gender') {\n      return <GenderCriteria value=\"\" handleGenderChange={null} />;\n    } else if (name === 'age') {\n      return <AgeCriteria value={ageValue} handleAgeChange={handleAgeChange} />;\n    }\n  };\n\n  const summary = () => {\n    return (\n      <StyledExpansionPanelSummary\n        className={globalClasses.expansionPanelPaddingReset}\n      >\n        <Box className={classes.summary}>\n          {name === 'age' ? (\n            <Typography className={globalClasses.textEmphasis}>ik</Typography>\n          ) : null}\n        </Box>\n      </StyledExpansionPanelSummary>\n    );\n  };\n\n  return (\n    <Box className={globalClasses.expansionPanelContainer}>\n      <ExpansionPanel className={globalClasses.expansionPanel}>\n        {!editable ? summary() : null}\n        <ExpansionPanelDetails\n          className={globalClasses.expansionPanelPaddingReset}\n        >\n          <Box className={classes.wrapper}>{handleType()}</Box>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </Box>\n  );\n};\n","import React from 'react';\nimport {\n  Typography,\n  Button,\n  Box,\n  Menu,\n  MenuItem,\n  IconButton,\n  Tooltip\n} from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\nimport HelpIcon from '@material-ui/icons/HelpOutline';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport styles from './styles';\nimport TargetGroup from './TargetGroup';\nimport EmptySection from './EmptySection';\nimport GenderCriteria from './GenderCriteria';\n\nconst l = Locale(Translation);\n\nexport default () => {\n  const globalClasses = styles();\n\n  const [open, setOpen] = React.useState(null);\n  const [editable, setEditable] = React.useState(false);\n  const [changed, setChanged] = React.useState(false);\n  const [targetGroups, setTargetGroups] = React.useState([]);\n\n  const [\n    targetGroupTypeMenuAnchorEl,\n    setTargetGroupTypeMenuAnchorEl\n  ] = React.useState(null);\n\n  React.useEffect(() => {\n    const storedTargetGroups = JSON.parse(\n      localStorage.getItem('target_groups') || '[]'\n    );\n    setTargetGroups(storedTargetGroups);\n  }, [setTargetGroups]);\n\n  const handleOpen = index => isOpen => {\n    setOpen(isOpen ? index : null);\n  };\n\n  const handleEdit = index => data => {\n    setChanged(true);\n    let newTargetGroups = [...targetGroups];\n    newTargetGroups[index] = { ...newTargetGroups[index], ...data };\n    setTargetGroups(newTargetGroups);\n  };\n\n  const handleAdd = type => {\n    let lastIndex = targetGroups.length;\n\n    setTargetGroups([\n      ...targetGroups,\n      {\n        name: type,\n        criteria: []\n      }\n    ]);\n\n    setOpen(lastIndex);\n  };\n\n  const handleRemove = index => () => {\n    let newTargetGroups = [...targetGroups];\n    newTargetGroups.splice(index, 1);\n    setTargetGroups(newTargetGroups);\n  };\n\n  const enabledTypes = {\n    age: 'age',\n    gender: 'gender'\n  };\n\n  const handleOpenTargetGroupTypeMenu = event => {\n    setTargetGroupTypeMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseTargetGroupTypeMenu = type => () => {\n    setTargetGroupTypeMenuAnchorEl(null);\n\n    switch (type) {\n      case 'gender':\n        handleAdd(type);\n        break;\n      case 'age': {\n        handleAdd(type);\n        break;\n      }\n      default:\n        break;\n    }\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('target_groups', JSON.stringify(targetGroups));\n    setOpen(false);\n    setEditable(false);\n  };\n\n  let hasTargetGroups = targetGroups.length;\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('targetGroupSectionHeader')}\n          <span>\n            <Tooltip\n              title={l('targetGroupsHelpText')}\n              className={globalClasses.infoTooltip}\n            >\n              <HelpIcon color=\"primary\" className={globalClasses.helpIcon} />\n            </Tooltip>\n          </span>\n          <span\n            className={changed ? globalClasses.unsavedChangesIcon : ''}\n          ></span>\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      {!hasTargetGroups ? <EmptySection /> : null}\n      {targetGroups.map((targetGroup, index) => (\n        <TargetGroup\n          {...targetGroup}\n          key={index}\n          editable={editable}\n          open={open === index}\n          handleOpen={handleOpen(index)}\n          handleEdit={handleEdit(index)}\n          handleRemove={handleRemove(index)}\n        />\n      ))}\n\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button\n          className={editable ? globalClasses.buttonAdd : globalClasses.hide}\n          color=\"primary\"\n          onClick={handleOpenTargetGroupTypeMenu}\n        >\n          {l('addTargetGroupButtonText')}\n        </Button>\n        <Menu\n          id=\"target-group-type-menu\"\n          anchorEl={targetGroupTypeMenuAnchorEl}\n          keepMounted\n          open={Boolean(targetGroupTypeMenuAnchorEl)}\n          onClose={handleCloseTargetGroupTypeMenu()}\n        >\n          {Object.keys(enabledTypes).map(x => (\n            <MenuItem onClick={handleCloseTargetGroupTypeMenu(x)} key={x}>\n              <Typography>{l`targetGroupType`[x]}</Typography>\n            </MenuItem>\n          ))}\n        </Menu>\n\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Target section. Handles adding and removing targets\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport {\n  Box,\n  Chip,\n  Button,\n  Card,\n  IconButton,\n  CardContent,\n  Typography\n} from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  chip: {\n    marginRight: '0.25rem'\n  },\n  saveBtnContainer: {\n    display: 'flex',\n    justifyContent: 'flex-end'\n  },\n  targetBox: {\n    marginBottom: '1rem'\n  }\n}));\n\nexport default () => {\n  const globalClasses = styles();\n  const classes = useStyles();\n\n  const [editable, setEditable] = React.useState(false);\n  const [targets, setTargets] = React.useState([]);\n  const [chipData, setChipData] = React.useState([\n    { key: 0, label: l('loneliness') },\n    { key: 1, label: l('exclusion') },\n    { key: 2, label: l('socialIssues') },\n    { key: 3, label: l('mentalHealthProblems') }\n  ]);\n\n  React.useEffect(() => {\n    const storedTargets = JSON.parse(localStorage.getItem('targets') || '[]');\n    setTargets(storedTargets);\n  }, [setTargets]);\n\n  const handleChipClick = chip => () => {\n    if (!targets.includes(chip.label)) {\n      targets.push(chip.label);\n    }\n    setTargets([...targets]);\n  };\n\n  const handleChipRemove = index => () => {\n    targets.splice(index, 1);\n    setTargets([...targets]);\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('targets', JSON.stringify(targets));\n    setEditable(false);\n  };\n\n  console.log(targets);\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('targetsHeader')}\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      <Box className={globalClasses.expansionPanelContainer}>\n        <Card className={globalClasses.outerContainerPadding}>\n          <CardContent className={globalClasses.expansionPanelPaddingReset}>\n            <Box className={editable ? classes.targetBox : null}>\n              <Typography className={globalClasses.textCapitalizedSmall}>\n                Valitut kohdesanat\n              </Typography>\n              {targets.map((target, index) => {\n                return (\n                  <Chip\n                    label={target}\n                    className={classes.chip}\n                    key={index}\n                    color=\"primary\"\n                    onDelete={editable ? handleChipRemove(index) : null}\n                  />\n                );\n              })}\n            </Box>\n            <Box\n              className={\n                editable ? classes.availableTargets : globalClasses.hide\n              }\n            >\n              <Typography className={globalClasses.textCapitalizedSmall}>\n                Valittavissa olevat kohdesanat\n              </Typography>\n              {chipData.map(data => {\n                return (\n                  <Chip\n                    label={data.label}\n                    className={classes.chip}\n                    key={data.key}\n                    onClick={handleChipClick(data)}\n                    color=\"primary\"\n                    variant=\"outlined\"\n                  />\n                );\n              })}\n            </Box>\n          </CardContent>\n        </Card>\n      </Box>\n      <Box className={editable ? classes.saveBtnContainer : globalClasses.hide}>\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","import Card from '@material-ui/core/Card';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport Locale from '../components/Locale';\nimport Contacts from '../components/organization/Contacts';\nimport Feeds2 from '../components/organization/Feeds';\nimport Locations from '../components/organization/Locations';\nimport Translation from '../components/organization/organizationLocale';\nimport Services from '../components/organization/Services';\nimport DefaultImage from '../img/Image.png';\nimport TargetGroups from '../components/organization/TargetGroups';\nimport Targets from '../components/organization/Targets';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  fab: {\n    margin: 0,\n    top: 'auto',\n    right: 20,\n    bottom: 20,\n    left: 'auto',\n    position: 'fixed'\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  },\n  profileImage: {\n    minWidth: 80\n  },\n  wrapper: {\n    padding: theme.spacing(1)\n  },\n  grid: {\n    maxWidth: 1320,\n    margin: '0 auto'\n  },\n  topSection: {\n    background: '#ffffff',\n    padding: '32px 64px'\n  },\n  bottomSection: {\n    padding: theme.spacing(0.5),\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(2)\n    }\n  },\n  root: {\n    background: '#f3f3f3'\n  },\n  sectionTitle: {\n    fontSize: '1.125rem', // 18px\n    fontWeight: 600,\n    marginLeft: '1rem',\n    marginBottom: '0.5rem'\n  },\n  sectionWrapper: {\n    display: 'flex',\n    flexDirection: 'column'\n  }\n}));\n\nexport const OrganizationPanel = () => {\n  const classes = useStyles();\n\n  const [locations, setLocations] = React.useState([]);\n\n  // const [targetGroups, setTargetGroups] = React.useState([]);\n\n  const [changed, setChanged] = React.useState(false);\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.topSection}>\n        <Grid className={classes.grid} container spacing={4}>\n          <Grid item xs={12}>\n            <Typography variant=\"h5\">Kohtaus Ry</Typography>\n          </Grid>\n          <Grid item xs={6}>\n            <Grid container spacing={2}>\n              <Grid item xs={4}>\n                <Card className={classes.profileImage}>\n                  <img alt=\"Organization Logo\" src={DefaultImage} />\n                </Card>\n              </Grid>\n              <Grid item xs={8}>\n                <div>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Short Description\n                  </Typography>\n                  <Typography variant=\"body1\">\n                    Kohtaus ry on vuonna 2014 perustettu yhdistys, jonka\n                    tarkoituksena on vhent nuorten aikuisten yksinisyytt ja\n                    syrjn jmist.\n                  </Typography>\n                </div>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={6}>\n            Other stuff\n          </Grid>\n        </Grid>\n      </div>\n      <div className={classes.bottomSection}>\n        <Grid className={classes.grid} container spacing={4}>\n          {/* Left Column */}\n          <Grid item xs={12} md={6}>\n            <Locations locations={locations} setLocations={setLocations} />\n            <Contacts changed={changed} setChanged={setChanged} />\n            <Services changed={changed} setChanged={setChanged} />\n          </Grid>\n          {/* Right Column */}\n          <Grid item xs={12} md={6}>\n            <Targets />\n            <TargetGroups />\n            <Feeds2 />\n            <div className={classes.sectionWrapper}>\n              <Typography className={classes.sectionTitle}>\n                {l('keywordHeader')}\n              </Typography>\n            </div>\n          </Grid>\n        </Grid>\n      </div>\n      <div></div>\n    </div>\n  );\n};\n","/**\r\n * @file A neat little helper box with text and an info icon.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  infoSection: {\r\n    display: 'flex',\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.text.secondary\r\n  },\r\n  infoIcon: {\r\n    width: 16,\r\n    height: 16,\r\n    marginRight: theme.spacing(1),\r\n    fill: theme.palette.primary.main\r\n  }\r\n}));\r\n\r\nexport const HelpBox = ({ className = '', children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={`${classes.infoSection} ${className}`}>\r\n      <InfoIcon className={classes.infoIcon} />\r\n      <Typography variant=\"body2\">{children}</Typography>\r\n    </Box>\r\n  );\r\n};\r\n","/**\n * @file Renders and manages the functionality of the \"Choose Multiple\" question options.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport DragIndicatorIcon from '@material-ui/icons/DragIndicator';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport React from 'react';\n\nconst data = {\n  options: ['Option #1', 'Option #2', 'Option #3', 'Option #4', 'Option #5']\n};\n\nconst useStyles = makeStyles(theme => ({\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  option: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: 8,\n    maxWidth: 500\n  },\n  optionInput: {\n    flex: 1,\n    marginLeft: 12,\n    marginRight: 20\n  },\n  optionButton: {\n    marginTop: theme.spacing(1),\n    marginLeft: theme.spacing(4)\n  }\n}));\n\nexport const QuestionChooseMultiple = () => {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.section}>\n      <Typography variant=\"subtitle2\">Options</Typography>\n      {data.options.map(x => (\n        <Box className={classes.option}>\n          <CheckBoxOutlineBlankIcon />\n          <TextField className={classes.optionInput} margin=\"dense\" value={x} />\n          <DragIndicatorIcon color=\"disabled\" />\n        </Box>\n      ))}\n\n      <Button\n        color=\"primary\"\n        size=\"small\"\n        className={classes.optionButton}\n        startIcon={<AddIcon />}\n      >\n        Add Option\n      </Button>\n    </Box>\n  );\n};\n","/**\r\n * @file Default data for different question type options. This will be used when adding a new question to the survey.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Translation from './questionLocale.json';\r\nimport Locale from '../Locale';\r\nimport uuid from 'uuid/v4';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst defaults = {\r\n  selectOne: {\r\n    one: index => ({\r\n      id: uuid(),\r\n      name: `${l('questionOptionDefaultName')} #${index + 1}`,\r\n      score: index,\r\n      route: null,\r\n      isOther: false\r\n    }),\r\n    many: [\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #1`,\r\n        score: 0,\r\n        route: null,\r\n        isOther: false\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #2`,\r\n        score: 1,\r\n        route: null,\r\n        isOther: false\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #3`,\r\n        score: 2,\r\n        route: null,\r\n        isOther: true\r\n      }\r\n    ]\r\n  },\r\n  selectMultiple: {\r\n    one: index => ({\r\n      id: uuid(),\r\n      name: `${l('questionOptionDefaultName')} #${index + 1}`,\r\n      score: index,\r\n      route: null\r\n    }),\r\n    many: [\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #1`,\r\n        score: 0,\r\n        route: null\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #2`,\r\n        score: 1,\r\n        route: null\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #3`,\r\n        score: 2,\r\n        route: null\r\n      }\r\n    ]\r\n  },\r\n  text: {\r\n    many: [\r\n      {\r\n        id: uuid(),\r\n        name: l('questionOptionNameLabel'),\r\n        score: 0,\r\n        route: null\r\n      }\r\n    ]\r\n  }\r\n};\r\n\r\nexport default defaults;\r\n","/**\n * @file Helper functions for question logic and data that are used in multiple different components.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Translation from './questionLocale.json';\nimport Locale from '../Locale';\nimport uuid from 'uuid/v4';\nimport OptionDefaults from './QuestionOptionDefaults';\n\nconst l = Locale(Translation);\n\n/**\n * List all possible outgoing routes for a question.\n */\nexport const listPossibleRoutes = (questionList, questionIndex) => {\n  return [...questionList.filter((x, i) => i > questionIndex)];\n};\n\n/**\n * List all active incoming routes for a question.\n */\nexport const listIncomingRoutes = (questionList, questionIndex) => {\n  const question = questionList[questionIndex];\n\n  let routeList = [];\n  for (const q of questionList) {\n    routeList = [\n      ...routeList,\n      ...q.options\n        .filter(x => x.route === question.id)\n        .map(x => ({ question: q, option: x }))\n    ];\n  }\n\n  if (questionIndex !== 0 && !questionList[questionIndex - 1].defaultRoute) {\n    routeList.unshift({\n      option: null,\n      question: questionList[questionIndex - 1]\n    });\n  }\n\n  for (const route of routeList) {\n    if (route.question && route.question.type === 'text' && route.option) {\n      route.option.name = l('questionOptionEmptyRouteLabel');\n    }\n  }\n\n  return routeList;\n};\n\n/**\n * List all active outgoing routes for a question.\n */\nexport const listOutgoingRoutes = (questionList, questionIndex) => {\n  const question = questionList[questionIndex];\n\n  const routeList = question.options\n    .filter(x => x.route)\n    .map(x => ({\n      option: x,\n      question: questionList.find(y => y.id === x.route)\n    }));\n\n  let defaultRoute = getDefaultRoute(questionList, questionIndex);\n  if (defaultRoute === 'end' || !defaultRoute) {\n    defaultRoute = { option: null, question: null };\n  } else {\n    defaultRoute = {\n      option: null,\n      question: questionList.find(x => x.id === defaultRoute.id)\n    };\n  }\n\n  if (routeList.length < question.options.length || question.type === 'text') {\n    routeList.push(defaultRoute);\n  }\n\n  if (question.type === 'text') {\n    for (let route of routeList) {\n      if (route.option) {\n        route.option.name = l('questionOptionEmptyRouteLabel');\n      }\n    }\n  }\n\n  return routeList;\n};\n\n/**\n * Get the default next question for a specific question.\n */\nexport const getDefaultRoute = (questionList, questionIndex) => {\n  const question = questionList[questionIndex];\n\n  let defaultRoute = null;\n  if (\n    question.defaultRoute === 'end' ||\n    (!question.defaultRoute && questionList.length === questionIndex + 1)\n  ) {\n    defaultRoute = 'end';\n  } else if (question.defaultRoute) {\n    defaultRoute = questionList.find(x => x.id === question.defaultRoute);\n  } else {\n    defaultRoute = questionList[questionIndex + 1];\n  }\n\n  return defaultRoute;\n};\n\n/**\n * Get the number of a default next question for a specific question.\n */\nexport const getDefaultRouteNumber = (questionList, questionIndex) => {\n  const route = getDefaultRoute(questionList, questionIndex);\n  if (route === 'end') return null;\n  return route ? `${route.index + 1}.` : null;\n};\n\n/**\n * Decide if a \"modified score\" badge should be visible in a question.\n */\nexport const checkScoreStatus = question => {\n  // TODO: Add support for custom score\n\n  if (question.type === 'text') return false;\n  if (question.type === 'selectOne' || question.type === 'selectMultiple') {\n    for (let i = 0; i < question.options.length; i++) {\n      if (question.options[i].score !== i) return true;\n    }\n  }\n};\n\n/**\n * Decide if a \"modified route\" badge should be visible in a question.\n */\nexport const checkRouteStatus = question => {\n  if (question.defaultRoute) return true;\n  for (const option of question.options) {\n    if (option.route) return true;\n  }\n\n  return false;\n};\n\n/**\n * Generate the data for a new empty question with default values fo type.\n */\nexport const generateEmptyQuestion = (index, type) => {\n  const id = uuid();\n\n  return {\n    id,\n    index,\n    title: `${l('questionDefaultName')} #${index + 1}`,\n    type,\n    defaultRoute: null,\n    options: [...OptionDefaults[type].many],\n    score: [['id.score']]\n  };\n};\n\n/**\n * Create a new empty question of type.\n */\nexport const handleSurveyQuestionCreate = (survey, type) => {\n  let surveyUpdate = { ...survey };\n  surveyUpdate.questions = [\n    ...surveyUpdate.questions,\n    { ...generateEmptyQuestion(surveyUpdate.questions.length, type) }\n  ];\n\n  return surveyUpdate;\n};\n\n/**\n * Update a specific question.\n */\nexport const handleSurveyQuestionUpdate = (survey, index, question) => {\n  let surveyUpdate = { ...survey };\n  surveyUpdate.questions[index] = {\n    ...surveyUpdate.questions[index],\n    ...question\n  };\n\n  return surveyUpdate;\n};\n\n/**\n * Switch places of two specific questions.\n */\nexport const handleSurveyQuestionReorder = (survey, a, b) => {\n  let surveyUpdate = { ...survey };\n  let questionCache = surveyUpdate.questions[a];\n\n  surveyUpdate.questions[a] = surveyUpdate.questions[b];\n  surveyUpdate.questions[b] = questionCache;\n\n  surveyUpdate.questions = surveyUpdate.questions.map((x, i) => ({\n    ...x,\n    index: i\n  }));\n\n  return surveyUpdate;\n};\n\n/**\n * Create a new empty option with default values fo type.\n */\nexport const handleSurveyOptionCreate = (survey, questionIndex, type) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[questionIndex] };\n\n  questionUpdate.options.push(\n    OptionDefaults[type].one(questionUpdate.options.length)\n  );\n\n  surveyUpdate.questions[questionIndex] = questionUpdate;\n\n  return surveyUpdate;\n};\n\n/**\n * Update a specific option.\n */\nexport const handleSurveyOptionUpdate = (\n  survey,\n  questionIndex,\n  optionIndex,\n  option\n) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[questionIndex] };\n\n  questionUpdate.options[optionIndex] = {\n    ...questionUpdate.options[optionIndex],\n    ...option\n  };\n\n  surveyUpdate.questions[questionIndex] = questionUpdate;\n\n  return surveyUpdate;\n};\n\n/**\n * Switch places of two specific options.\n */\nexport const handleSurveyOptionReorder = (survey, index, a, b) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[index] };\n  let optionCache = questionUpdate.options[a];\n\n  questionUpdate.options[a] = questionUpdate.options[b];\n  questionUpdate.options[b] = optionCache;\n\n  surveyUpdate.questions[index] = questionUpdate;\n\n  return surveyUpdate;\n};\n\n/**\n * Remove a specific option.\n */\nexport const handleSurveyOptionRemove = (\n  survey,\n  questionIndex,\n  optionIndex\n) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[questionIndex] };\n\n  questionUpdate.options.splice(optionIndex, 1);\n\n  surveyUpdate.questions[questionIndex] = questionUpdate;\n\n  return surveyUpdate;\n};\n","/**\n * @file Route selector for a single question option.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CallSplitIcon from '@material-ui/icons/CallSplit';\nimport React from 'react';\nimport TextField from '../CachedInput';\nimport Locale from '../Locale';\nimport Translation from './questionLocale.json';\nimport { getDefaultRouteNumber, listPossibleRoutes } from './QuestionUtil';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  optionInputMenu: {\n    maxWidth: 500\n  },\n  optionInputMenuItem: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  optionIconLabel: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: -4\n  },\n  optionIconLabelIcon: {\n    marginRight: theme.spacing(0.75)\n  }\n}));\n\nexport const QuestionOptionRoute = ({\n  survey,\n  index,\n  value,\n  onChange,\n  helperText = l('questionOptionRouteInfo'),\n  className\n}) => {\n  const classes = useStyles();\n\n  const defaultNextQuestionNumber = getDefaultRouteNumber(\n    survey.questions,\n    index\n  );\n\n  const possibleRoutes = listPossibleRoutes(survey.questions, index);\n\n  return (\n    <TextField\n      select\n      className={className}\n      value={value}\n      onChange={onChange}\n      label={\n        <span className={classes.optionIconLabel}>\n          <CallSplitIcon\n            style={{ color: '#CD5B5B' }}\n            className={classes.optionIconLabelIcon}\n          />{' '}\n          {l('questionOptionRouteLabel')}\n        </span>\n      }\n      InputLabelProps={{\n        shrink: true\n      }}\n      SelectProps={{\n        MenuProps: {\n          className: classes.optionInputMenu\n        }\n      }}\n      helperText={helperText}\n      margin=\"normal\"\n    >\n      <MenuItem value={null} className={classes.optionInputMenuItem}>\n        <em>Default ({defaultNextQuestionNumber || 'End'})</em>\n      </MenuItem>\n\n      {possibleRoutes.map(x => (\n        <MenuItem value={x.id} key={x.id}>\n          {x.index + 1}. {x.title}\n        </MenuItem>\n      ))}\n\n      <MenuItem value=\"end\">End Survey</MenuItem>\n    </TextField>\n  );\n};\n","/**\n * @file Renders and manages the functionality of the \"Choose One\" question options.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport SpellcheckIcon from '@material-ui/icons/Spellcheck';\nimport React from 'react';\nimport TextField from '../../CachedInput';\nimport { openDialog } from '../../ConfirmationDialog';\nimport Locale from '../../Locale';\nimport { QuestionOptionRoute } from '../QuestionOptionRoute';\nimport {\n  handleSurveyOptionCreate,\n  handleSurveyOptionRemove,\n  handleSurveyOptionReorder,\n  handleSurveyOptionUpdate\n} from '../QuestionUtil';\nimport Translation from '../questionLocale.json';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  badge: {\n    position: 'absolute',\n    display: 'block',\n    top: 0,\n    right: -6,\n    width: 12,\n    height: 12,\n    borderRadius: '50%',\n    backgroundColor: '#CD5B5B'\n  },\n  dialog: {\n    width: 600\n  },\n  option: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    padding: 0,\n    marginTop: 8,\n    borderRadius: 4,\n    border: `1px solid ${theme.palette.divider}`\n  },\n  optionContainer: {\n    display: 'flex',\n    flex: 1,\n    padding: theme.spacing(2),\n    maxWidth: 500\n  },\n  optionMain: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: theme.spacing(2)\n  },\n  optionAdvanced: {\n    display: 'flex'\n  },\n  optionSecondary: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(0)\n  },\n  optionInput: {\n    flex: 1,\n    marginLeft: 0,\n    marginTop: 0\n  },\n  optionInputSecondary: {\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: 0,\n    marginTop: theme.spacing(2)\n  },\n  optionInputMenu: {\n    maxWidth: 500\n  },\n  optionInputMenuItem: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  optionInputScore: {\n    marginLeft: 0,\n    marginRight: theme.spacing(3),\n    marginTop: theme.spacing(2),\n    width: 100\n  },\n  optionIconLabel: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: -4\n  },\n  optionIconLabelIcon: {\n    marginRight: theme.spacing(0.75)\n  },\n  optionButton: {\n    marginTop: theme.spacing(1)\n  },\n  optionMove: {\n    display: 'flex',\n    position: 'relative',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    padding: theme.spacing(1),\n    borderLeft: `1px solid ${theme.palette.divider}`\n  },\n  optionRemove: {\n    bottom: theme.spacing(1)\n  },\n  subtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(2)\n  }\n}));\n\nexport const QuestionChooseOne = ({ index, survey, question, setSurvey }) => {\n  const classes = useStyles();\n\n  const handleNameUpdate = option => name => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        name\n      })\n    );\n  };\n\n  const handleOtherUpdate = option => event => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        isOther: event.target.checked\n      })\n    );\n  };\n\n  const handleScoreUpdate = option => score => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        score\n      })\n    );\n  };\n\n  const handleRouteUpdate = option => route => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        route\n      })\n    );\n  };\n\n  const handleOptionCreate = () => {\n    setSurvey(handleSurveyOptionCreate(survey, index, question.type));\n  };\n\n  const handleOptionReorder = (option, direction) => () => {\n    if (direction !== -1 && direction !== 1) return;\n    if (option === 0 && direction === 1) return;\n    if (option === question.options.length - 1 && direction === -1) return;\n\n    setSurvey(\n      handleSurveyOptionReorder(survey, index, option, option - direction)\n    );\n  };\n\n  const handleOptionRemove = option => async () => {\n    const action = await openDialog({\n      title: 'Remove Option?',\n      description: 'This action cannot be undone, are you sure?'\n    });\n\n    if (action === 'confirm') {\n      setSurvey(handleSurveyOptionRemove(survey, index, option));\n    }\n  };\n\n  return (\n    <Box className={classes.section}>\n      <Typography variant=\"h6\">{l('questionOptionsText')}</Typography>\n      <Typography variant=\"body2\" className={classes.subtitle}>\n        {l('questionOptionsInfo')}\n      </Typography>\n\n      {question.options.map((x, i) => (\n        <Box key={x.id} className={classes.option}>\n          <Box className={classes.optionContainer}>\n            <RadioButtonUncheckedIcon />\n            <Box className={classes.optionMain}>\n              <TextField\n                className={classes.optionInput}\n                margin=\"dense\"\n                label={l('questionOptionNameLabel')}\n                InputLabelProps={{\n                  shrink: true\n                }}\n                value={x.name}\n                onChange={handleNameUpdate(i)}\n              />\n\n              <Box className={classes.optionAdvanced}>\n                <TextField\n                  className={classes.optionInputScore}\n                  margin=\"dense\"\n                  type=\"number\"\n                  label={\n                    <span className={classes.optionIconLabel}>\n                      <SpellcheckIcon\n                        style={{ color: '#56B47C' }}\n                        className={classes.optionIconLabelIcon}\n                      />{' '}\n                      {l('questionOptionScoreLabel')}\n                    </span>\n                  }\n                  InputLabelProps={{\n                    shrink: true\n                  }}\n                  InputProps={{\n                    style: {\n                      marginTop: 19\n                    }\n                  }}\n                  value={x.score}\n                  onChange={handleScoreUpdate(i)}\n                />\n\n                <QuestionOptionRoute\n                  survey={survey}\n                  index={index}\n                  value={x.route}\n                  onChange={handleRouteUpdate(i)}\n                  className={classes.optionInputSecondary}\n                />\n              </Box>\n              <Box className={classes.optionSecondary}>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={x.isOther}\n                      onChange={handleOtherUpdate(i)}\n                      value=\"checkedB\"\n                      color=\"primary\"\n                    />\n                  }\n                  label={\n                    <Typography variant=\"body2\">\n                      Allow Explanation\n                      <Typography variant=\"caption\" display=\"block\">\n                        Show an optional text field when this option is picked\n                      </Typography>\n                    </Typography>\n                  }\n                />\n              </Box>\n            </Box>\n          </Box>\n          <Box className={classes.optionMove}>\n            <Tooltip title=\"Move Up\" placement=\"right\">\n              <IconButton\n                aria-label=\"move up\"\n                onClick={handleOptionReorder(i, 1)}\n              >\n                <KeyboardArrowUpIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Move Down\" placement=\"right\">\n              <IconButton\n                aria-label=\"move down\"\n                onClick={handleOptionReorder(i, -1)}\n              >\n                <KeyboardArrowDownIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Box style={{ flex: 1 }} />\n            <Tooltip title=\"Remove\" placement=\"right\">\n              <IconButton\n                aria-label=\"remove\"\n                className={classes.optionRemove}\n                onClick={handleOptionRemove(i)}\n                size=\"small\"\n              >\n                <DeleteIcon fontSize=\"inherit\" />\n              </IconButton>\n            </Tooltip>\n          </Box>\n        </Box>\n      ))}\n\n      <Box style={{ display: 'flex', flexDirection: 'row-reverse' }}>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.optionButton}\n          startIcon={<AddIcon />}\n          onClick={handleOptionCreate}\n        >\n          {l('questionOptionAddText')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file The route table for a single question. Will display all incoming and outgoing routes.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport React from 'react';\nimport Locale from '../Locale';\nimport Translation from './questionLocale.json';\nimport { listIncomingRoutes, listOutgoingRoutes } from './QuestionUtil';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  routeSection: {\n    marginBottom: theme.spacing(3)\n  },\n  table: {\n    tableLayout: 'fixed'\n  },\n  routeCell: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  routeIconCell: {},\n  routeIconCellIcon: {\n    width: 16,\n    height: 16\n  }\n}));\n\nexport const QuestionRouteTable = ({ index, survey }) => {\n  const classes = useStyles();\n\n  const incomingRoutes = listIncomingRoutes(survey.questions, index);\n  const outgoingRoutes = listOutgoingRoutes(survey.questions, index);\n\n  return (\n    <Box className={classes.routeSection}>\n      <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\n        {!!incomingRoutes.length && (\n          <TableHead>\n            <TableRow>\n              <TableCell\n                width={16}\n              >{l`questionRouteTableDirectionIn`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableSource`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableOption`}</TableCell>\n            </TableRow>\n          </TableHead>\n        )}\n        <TableBody>\n          {incomingRoutes.map((x, i) => (\n            <TableRow key={i}>\n              <TableCell\n                width={16}\n                className={classes.routeIconCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                <ArrowForwardIcon\n                  className={classes.routeIconCellIcon}\n                  style={{ fill: '#56B47C' }}\n                />\n              </TableCell>\n              <TableCell\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                <span>{x.question.index + 1}.</span> {x.question.title}\n              </TableCell>\n              <TableCell\n                style={{ color: x.option ? 'inherit' : 'rgba(0, 0, 0, 0.54)' }}\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                {x.option ? x.option.name : l`questionRouteTableDefault`}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n        {!!outgoingRoutes.length && (\n          <TableHead>\n            <TableRow>\n              <TableCell\n                width={16}\n              >{l`questionRouteTableDirectionOut`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableOption`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableDestination`}</TableCell>\n            </TableRow>\n          </TableHead>\n        )}\n        <TableBody>\n          {outgoingRoutes.map((x, i) => (\n            <TableRow key={i}>\n              <TableCell\n                width={16}\n                className={classes.routeIconCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                <ArrowBackIcon\n                  className={classes.routeIconCellIcon}\n                  style={{ fill: '#CD5B5B' }}\n                />\n              </TableCell>\n              <TableCell\n                style={{ color: x.option ? 'inherit' : 'rgba(0, 0, 0, 0.54)' }}\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                {x.option ? x.option.name : l`questionRouteTableDefault`}\n              </TableCell>\n              <TableCell\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                {(x.option && x.option.route === 'end') || !x.question ? (\n                  l`questionRouteTableEndSurvey`\n                ) : (\n                  <>\n                    <span>{x.question.index + 1}.</span> {x.question.title}\n                  </>\n                )}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </Box>\n  );\n};\n","/**\r\n * @file Handle everything to do with the custom score data.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\n\r\nconst l = Locale(Translation);\r\n\r\nexport const SCORE_TYPE = {\r\n  ID: 1,\r\n  VALUE: 2,\r\n  CONDITIONAL: 3,\r\n  OPERATOR: 4,\r\n  COMPARATOR: 5\r\n};\r\n\r\nexport const OPERATOR_TYPE = {\r\n  ADD: 'addition',\r\n  SUBTRACT: 'subtraction',\r\n  MULTIPLY: 'multiplication',\r\n  DIVIDE: 'division'\r\n};\r\n\r\nexport const OPERATOR_SIGN = {\r\n  '+': OPERATOR_TYPE.ADD,\r\n  '-': OPERATOR_TYPE.SUBTRACT,\r\n  '*': OPERATOR_TYPE.MULTIPLY,\r\n  '/': OPERATOR_TYPE.DIVIDE\r\n};\r\n\r\nexport const COMPARATOR_TYPE = {\r\n  GREATER_THAN: 1,\r\n  LESS_THAN: 2,\r\n  GREATER_THAN_OR_EQUAL: 3,\r\n  LESS_THAN_OR_EQUAL: 4,\r\n  EQUAL: 5,\r\n  AND: 6,\r\n  OR: 7\r\n};\r\n\r\nexport const COMPARATOR_SIGN = {\r\n  '>': COMPARATOR_TYPE.GREATER_THAN,\r\n  '<': COMPARATOR_TYPE.LESS_THAN,\r\n  '>=': COMPARATOR_TYPE.GREATER_THAN_OR_EQUAL,\r\n  '<=': COMPARATOR_TYPE.LESS_THAN_OR_EQUAL,\r\n  '=': COMPARATOR_TYPE.EQUAL,\r\n  '&': COMPARATOR_TYPE.AND,\r\n  '|': COMPARATOR_TYPE.OR\r\n};\r\n\r\nexport const parseScore = score => {\r\n  const parsedScore = {\r\n    id: null,\r\n    name: '',\r\n    steps: []\r\n  };\r\n\r\n  for (const row of score) {\r\n    const parts = row.split('.');\r\n    const type = parts[0];\r\n\r\n    if (type === 'id') {\r\n      parsedScore.id = parts[1];\r\n      parsedScore.name = row\r\n        .split('.')\r\n        .splice(2)\r\n        .join('.');\r\n\r\n      if (parsedScore.id === 'score') {\r\n        parsedScore.name = l`questionScoreSourceDynamicDefaultTitle`;\r\n      }\r\n    }\r\n\r\n    if (type === 'value') {\r\n      const from = parts[1];\r\n\r\n      if (from === 'static') {\r\n        parsedScore.steps.push({\r\n          type: SCORE_TYPE.VALUE,\r\n          from: null,\r\n          value: `${parts[2]}.${parts[3] || '0'}`\r\n        });\r\n      } else if (from === 'placeholder') {\r\n        parsedScore.steps.push({\r\n          type: SCORE_TYPE.VALUE,\r\n          from: null,\r\n          value: null\r\n        });\r\n      } else {\r\n        parsedScore.steps.push({\r\n          type: SCORE_TYPE.VALUE,\r\n          from: parts[1],\r\n          value: parts[2]\r\n        });\r\n      }\r\n    }\r\n\r\n    if (type === 'operator') {\r\n      parsedScore.steps.push({\r\n        type: SCORE_TYPE.OPERATOR,\r\n        sign: OPERATOR_SIGN[parts[1]]\r\n      });\r\n    }\r\n\r\n    if (type === 'conditional') {\r\n      parsedScore.steps.push({\r\n        type: SCORE_TYPE.CONDITIONAL,\r\n        step: parts[1]\r\n      });\r\n    }\r\n\r\n    if (type === 'comparator') {\r\n      parsedScore.steps.push({\r\n        type: SCORE_TYPE.COMPARATOR,\r\n        compare: COMPARATOR_SIGN[parts[1]]\r\n      });\r\n    }\r\n  }\r\n\r\n  return parsedScore;\r\n};\r\n\r\nexport const createValue = ({ from = null, value }) => {\r\n  if (from === null && value === null) return 'value.placeholder';\r\n  return `value.${from ? from : 'static'}.${value}`;\r\n};\r\n\r\nexport const createOperator = type => {\r\n  return `operator.${Object.keys(OPERATOR_SIGN).find(\r\n    key => OPERATOR_SIGN[key] === type\r\n  )}`;\r\n};\r\n\r\nexport const createConditional = () => {\r\n  return [\r\n    'conditional.if',\r\n    'value.placeholder',\r\n    'conditional.then',\r\n    'value.placeholder',\r\n    'conditional.else',\r\n    'value.placeholder',\r\n    'conditional.end'\r\n  ];\r\n};\r\n\r\nexport const createComparator = type => {\r\n  return `comparator.${Object.keys(COMPARATOR_SIGN).find(\r\n    key => COMPARATOR_SIGN[key] === type\r\n  )}`;\r\n};\r\n","/**\r\n * @file The source picker for a score input. Lists all possible input sources and options. Used by {@link QuestionScoreDialog}.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\r\nimport React from 'react';\r\nimport { HelpBox } from '../HelpBox';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport { createValue, parseScore } from './Score';\r\n\r\nconst l = Locale(Translation);\r\n\r\nlet setOpenState = null;\r\nlet currentSourceId = null;\r\nlet currentQuestionId = null;\r\nlet setContentState = null;\r\nlet setSectionState = null;\r\nlet setSourceState = null;\r\nlet setValueState = null;\r\nlet resolveDialog = null;\r\nlet isFirst = false;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.paper,\r\n    position: 'relative',\r\n    overflow: 'auto',\r\n    maxHeight: 250\r\n  },\r\n  listSection: {\r\n    backgroundColor: 'inherit'\r\n  },\r\n  ul: {\r\n    backgroundColor: 'inherit',\r\n    padding: 0\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4)\r\n  },\r\n  header: {\r\n    marginTop: theme.spacing(2)\r\n  },\r\n  section: {\r\n    paddingLeft: theme.spacing(2)\r\n  },\r\n  sectionInput: {\r\n    marginTop: theme.spacing(1),\r\n    paddingLeft: theme.spacing(3.9)\r\n  }\r\n}));\r\n\r\nconst closeDialog = action => {\r\n  setOpenState(false);\r\n\r\n  if (action === 'cancel' || action === 'dismiss') {\r\n    resolveDialog(null);\r\n    resolveDialog = null;\r\n    return;\r\n  }\r\n\r\n  if (resolveDialog) {\r\n    resolveDialog(action);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = (id = null, questionId = null, first = false) =>\r\n  new Promise(resolve => {\r\n    setContentState(questionId ? [questionId] : []);\r\n    setSectionState(null);\r\n    setSourceState(null);\r\n    setValueState(null);\r\n\r\n    isFirst = first;\r\n    currentSourceId = id;\r\n    currentQuestionId = questionId;\r\n    resolveDialog = resolve;\r\n\r\n    setOpenState(true);\r\n  });\r\n\r\nconst QuestionScoreInputDialog = ({ survey }) => {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [openList, setOpenList] = React.useState([]);\r\n  const [selectedSection, setSelectedSection] = React.useState(null);\r\n  const [selectedSource, setSelectedSource] = React.useState(null);\r\n\r\n  const [value, setValue] = React.useState(null);\r\n\r\n  const handleValueChange = event => {\r\n    setValue(!event.target.value ? null : Number(event.target.value));\r\n\r\n    if (selectedSection !== 'static') {\r\n      setSelectedSection('static');\r\n      setSelectedSource(null);\r\n    }\r\n  };\r\n\r\n  setOpenState = setOpen;\r\n  setContentState = setOpenList;\r\n  setSectionState = setSelectedSection;\r\n  setSourceState = setSelectedSource;\r\n  setValueState = setValue;\r\n\r\n  let isConfirmEnabled = false;\r\n  if (selectedSection === 'source' && selectedSource) {\r\n    isConfirmEnabled = true;\r\n  }\r\n  if (selectedSection === 'static' && value !== '' && value !== null) {\r\n    isConfirmEnabled = true;\r\n  }\r\n  if (selectedSection === 'if') {\r\n    isConfirmEnabled = true;\r\n  }\r\n\r\n  const handleClose = action => () => {\r\n    if (action === 'confirm') {\r\n      if (selectedSection === 'source' && selectedSource) {\r\n        closeDialog(\r\n          createValue({\r\n            from: selectedSource.question,\r\n            value: selectedSource.score\r\n          })\r\n        );\r\n      } else if (selectedSection === 'static' && (value || value === 0)) {\r\n        closeDialog(createValue({ value }));\r\n      } else if (selectedSection === 'if') {\r\n        closeDialog('if');\r\n      } else {\r\n        closeDialog('cancel');\r\n      }\r\n    } else {\r\n      closeDialog(action);\r\n    }\r\n  };\r\n\r\n  const toggleListOpen = question => () => {\r\n    const list = [...openList];\r\n    const index = list.indexOf(question.id);\r\n    if (index >= 0) {\r\n      list.splice(index, 1);\r\n    } else {\r\n      list.push(question.id);\r\n    }\r\n\r\n    setOpenList(list);\r\n  };\r\n\r\n  const handleRadioButtonToggle = section => event => {\r\n    if (event.target.checked) setSelectedSection(section);\r\n\r\n    if (event.target.checked && section === 'static') {\r\n      setSelectedSource(null);\r\n    }\r\n  };\r\n\r\n  const handleQuestionSourceSelect = (question, score) => () => {\r\n    setSelectedSource(question ? { question, score } : null);\r\n\r\n    if (question && selectedSection !== 'source') {\r\n      setSelectedSection('source');\r\n    }\r\n  };\r\n\r\n  let questionList = [...survey.questions];\r\n  if (currentQuestionId)\r\n    questionList = questionList.filter(x => x.id === currentQuestionId);\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose(null)}\r\n      aria-labelledby=\"input-dialog-title\"\r\n      aria-describedby=\"input-dialog-description\"\r\n      maxWidth=\"xs\"\r\n      fullWidth\r\n      fullHeight\r\n    >\r\n      <DialogTitle id=\"input-dialog-title\">{l`questionScoreSourceTitle`}</DialogTitle>\r\n      <DialogContent>\r\n        <FormControlLabel\r\n          value=\"if\"\r\n          control={\r\n            <Radio\r\n              checked={selectedSection === 'if'}\r\n              onChange={handleRadioButtonToggle('if')}\r\n            />\r\n          }\r\n          label={`Logic \"If\" statement`}\r\n        />\r\n\r\n        <FormControlLabel\r\n          value=\"source\"\r\n          control={\r\n            <Radio\r\n              checked={selectedSection === 'source'}\r\n              onChange={handleRadioButtonToggle('source')}\r\n            />\r\n          }\r\n          label={l`questionScoreSourceDynamicRadio`}\r\n        />\r\n\r\n        <Box\r\n          className={classes.section}\r\n          style={{ opacity: selectedSection === 'static' ? 0.5 : 1 }}\r\n        >\r\n          <List className={classes.root} subheader={<li />}>\r\n            {/*\r\n          <li key={`question-section`} className={classes.listSection}>\r\n            <ul className={classes.ul}>\r\n              <ListSubheader>Questions</ListSubheader>\r\n          */}\r\n\r\n            {questionList.map(question => (\r\n              <Box key={`question-${question.id}`}>\r\n                <ListItem\r\n                  button\r\n                  onClick={toggleListOpen(question)}\r\n                  key={`question-${question.id}`}\r\n                >\r\n                  <ListItemText\r\n                    disableTypography\r\n                    primary={\r\n                      <Typography\r\n                        variant=\"body1\"\r\n                        style={{ fontWeight: 'bold' }}\r\n                        noWrap\r\n                      >\r\n                        {question.index + 1}. {question.title}\r\n                      </Typography>\r\n                    }\r\n                  />\r\n                  {openList.includes(question.id) ? (\r\n                    <ExpandLess />\r\n                  ) : (\r\n                    <ExpandMore />\r\n                  )}\r\n                </ListItem>\r\n                <Collapse\r\n                  in={openList.includes(question.id)}\r\n                  timeout=\"auto\"\r\n                  unmountOnExit\r\n                  key={`question-${question.id}-collapse`}\r\n                >\r\n                  <List component=\"div\" disablePadding>\r\n                    <ListItem\r\n                      button\r\n                      key={`question-${question.id}-score`}\r\n                      role={undefined}\r\n                      onClick={handleQuestionSourceSelect(question.id, 'score')}\r\n                    >\r\n                      <ListItemIcon>\r\n                        <StarRoundedIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        id={`question-${question.id}-score-text`}\r\n                        primary={l`questionScoreSourceDynamicDefaultTitle`}\r\n                        secondary={l`questionScoreSourceDynamicDefaultDescription`}\r\n                      />\r\n                      <ListItemSecondaryAction>\r\n                        <Checkbox\r\n                          edge=\"start\"\r\n                          checked={\r\n                            selectedSource !== null &&\r\n                            selectedSource.question === question.id &&\r\n                            selectedSource.score === 'score'\r\n                          }\r\n                          tabIndex={-1}\r\n                          disableRipple\r\n                          inputProps={{\r\n                            'aria-labelledby': `question-${question.id}-score-text`\r\n                          }}\r\n                          onChange={handleQuestionSourceSelect(\r\n                            question.id,\r\n                            'score'\r\n                          )}\r\n                        />\r\n                      </ListItemSecondaryAction>\r\n                    </ListItem>\r\n\r\n                    {question.score\r\n                      .filter(\r\n                        x =>\r\n                          x[0].split('.')[1] !== 'score' &&\r\n                          x[0].split('.')[1] !== currentSourceId\r\n                      )\r\n                      .map(parseScore)\r\n                      .map(score => (\r\n                        <ListItem\r\n                          button\r\n                          key={`${question.id}-${score.id}`}\r\n                          onClick={handleQuestionSourceSelect(\r\n                            question.id,\r\n                            score.id\r\n                          )}\r\n                        >\r\n                          <ListItemIcon>\r\n                            <StarBorderRoundedIcon />\r\n                          </ListItemIcon>\r\n                          <ListItemText\r\n                            id={`${question.id}-${score.id}-text`}\r\n                            primary={score.name}\r\n                            secondary={l`questionScoreSourceDynamicCustomDescription`}\r\n                          />\r\n                          <ListItemSecondaryAction>\r\n                            <Checkbox\r\n                              edge=\"start\"\r\n                              checked={\r\n                                selectedSource !== null &&\r\n                                selectedSource.question === question.id &&\r\n                                selectedSource.score === score.id\r\n                              }\r\n                              tabIndex={-1}\r\n                              disableRipple\r\n                              onChange={handleQuestionSourceSelect(\r\n                                question.id,\r\n                                score.id\r\n                              )}\r\n                              inputProps={{\r\n                                'aria-labelledby': `${question.id}-${score.id}-text`\r\n                              }}\r\n                            />\r\n                          </ListItemSecondaryAction>\r\n                        </ListItem>\r\n                      ))}\r\n                  </List>\r\n                </Collapse>\r\n              </Box>\r\n            ))}\r\n            {/*\r\n            </ul>\r\n          </li>\r\n              */}\r\n          </List>\r\n        </Box>\r\n\r\n        <FormControlLabel\r\n          value=\"static\"\r\n          control={\r\n            <Radio\r\n              checked={selectedSection === 'static'}\r\n              onChange={handleRadioButtonToggle('static')}\r\n            />\r\n          }\r\n          label={l`questionScoreSourceStaticRadio`}\r\n        />\r\n\r\n        <Box\r\n          className={classes.sectionInput}\r\n          style={{ opacity: selectedSection === 'source' ? 0.5 : 1 }}\r\n        >\r\n          <TextField\r\n            autoFocus\r\n            id=\"value\"\r\n            label={l`questionScoreSourceStaticLabel`}\r\n            fullWidth\r\n            value={value}\r\n            onChange={handleValueChange}\r\n            variant=\"outlined\"\r\n            type=\"number\"\r\n            autoComplete=\"false\"\r\n            inputProps={{\r\n              autocompletetype: 'false'\r\n            }}\r\n          />\r\n        </Box>\r\n\r\n        {isFirst && <HelpBox>{l`questionScoreSourceHelp`}</HelpBox>}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose('cancel')} color=\"primary\">\r\n          {l`dialogButtonCancel`}\r\n        </Button>\r\n        <Button\r\n          onClick={handleClose('confirm')}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          disabled={!isConfirmEnabled}\r\n        >\r\n          {l`dialogButtonConfirm`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuestionScoreInputDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\r\n * @file Displays the logic that calculates a single score. Handles adding to and modifying that logic.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\r\nimport {\r\n  mdiCalculator,\r\n  mdiCalculatorVariant,\r\n  mdiCloseBox,\r\n  mdiDivisionBox,\r\n  mdiMinusBox,\r\n  mdiPlusBox,\r\n  mdiCodeGreaterThan,\r\n  mdiCodeLessThan,\r\n  mdiCodeGreaterThanOrEqual,\r\n  mdiCodeLessThanOrEqual,\r\n  mdiEqualBox,\r\n  mdiCircle,\r\n  mdiCircleOutline\r\n} from '@mdi/js';\r\nimport Icon from '@mdi/react';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport * as inputDialog from './QuestionScoreInputDialog';\r\nimport {\r\n  createConditional,\r\n  createOperator,\r\n  OPERATOR_TYPE,\r\n  parseScore,\r\n  SCORE_TYPE,\r\n  COMPARATOR_TYPE,\r\n  createComparator\r\n} from './Score';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst mathIconList = {\r\n  addition: mdiPlusBox,\r\n  subtraction: mdiMinusBox,\r\n  multiplication: mdiCloseBox,\r\n  division: mdiDivisionBox\r\n};\r\n\r\nconst comparatorIconList = {\r\n  1: mdiCodeGreaterThan,\r\n  2: mdiCodeLessThan,\r\n  3: mdiCodeGreaterThanOrEqual,\r\n  4: mdiCodeLessThanOrEqual,\r\n  5: mdiEqualBox,\r\n  6: mdiCircle,\r\n  7: mdiCircleOutline\r\n};\r\n\r\nlet setOpenState = null;\r\nlet currentScoreId = null;\r\nlet currentQuestionId = null;\r\nlet setContentState = null;\r\nlet resolveDialog = null;\r\nlet menuEditIndex = null;\r\nlet menuEditReplace = true;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper,\r\n    position: 'relative',\r\n    overflow: 'auto',\r\n    maxHeight: 300\r\n  },\r\n  listSection: {\r\n    backgroundColor: 'inherit'\r\n  },\r\n  ul: {\r\n    backgroundColor: 'inherit',\r\n    padding: 0\r\n  },\r\n  mdi: {\r\n    fill: theme.palette.primary.main\r\n  },\r\n  button: {\r\n    marginLeft: 0\r\n  },\r\n  buttonItem: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    padding: 0,\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2)\r\n  },\r\n  helperArrow: {\r\n    position: 'absolute',\r\n    marginTop: theme.spacing(4.5),\r\n    left: theme.spacing(1.5),\r\n    width: 16,\r\n    height: 16\r\n  },\r\n  if: {\r\n    borderLeft: `3px solid ${theme.palette.primary.main}`\r\n  }\r\n}));\r\n\r\nconst closeDialog = data => {\r\n  setOpenState(false);\r\n  if (resolveDialog) {\r\n    resolveDialog(data);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = (questionId = null, score) =>\r\n  new Promise(resolve => {\r\n    setContentState(score);\r\n    const scoreStep = parseScore(score);\r\n    currentScoreId = scoreStep.id;\r\n\r\n    currentQuestionId = questionId;\r\n\r\n    resolveDialog = resolve;\r\n    setOpenState(true);\r\n  });\r\n\r\nconst QuestionScoreDialog = ({ survey }) => {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [input, setInput] = React.useState([]);\r\n  const theme = useTheme();\r\n\r\n  setOpenState = setOpen;\r\n  setContentState = setInput;\r\n\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n  const [comparatorMenuAnchorEl, setComparatorMenuAnchorEl] = React.useState(\r\n    null\r\n  );\r\n\r\n  const mathOperatorTexts = l('questionScoreOperatorText');\r\n  const comparatorTexts = l('questionScoreComparatorText');\r\n\r\n  const scoreStep = parseScore(input);\r\n\r\n  let depthLevel = 0;\r\n  let lastStep = null;\r\n\r\n  const handleMenuClick = (index = null, replace = true) => event => {\r\n    menuEditIndex = index;\r\n    menuEditReplace = replace;\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = action => async () => {\r\n    setMenuAnchorEl(null);\r\n    if (!action) return;\r\n\r\n    if (menuEditIndex !== null && menuEditReplace) {\r\n      const inputCache = [...input];\r\n      inputCache[menuEditIndex] = createOperator(action);\r\n\r\n      setInput([...inputCache]);\r\n      return;\r\n    }\r\n\r\n    const value = await inputDialog.openDialog(\r\n      currentScoreId,\r\n      currentQuestionId,\r\n      input.length <= 1\r\n    );\r\n\r\n    if (value || value === 0) {\r\n      const inputCombiner = createOperator(action);\r\n      const inputValue =\r\n        value === 'if'\r\n          ? [inputCombiner, ...createConditional()]\r\n          : [inputCombiner, value];\r\n\r\n      if (menuEditIndex !== null) {\r\n        const inputCache = [...input];\r\n        inputCache.splice(menuEditIndex + 1, 0, ...inputValue);\r\n        setInput([...inputCache]);\r\n      } else {\r\n        setInput([...input, inputCombiner, value]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleComparatorMenuClick = (index = null, replace = true) => event => {\r\n    menuEditIndex = index;\r\n    menuEditReplace = replace;\r\n    setComparatorMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleComparatorMenuClose = action => async () => {\r\n    setComparatorMenuAnchorEl(null);\r\n\r\n    if (!action) return;\r\n\r\n    if (menuEditIndex !== null && menuEditReplace) {\r\n      const inputCache = [...input];\r\n      inputCache[menuEditIndex] = createComparator(action);\r\n\r\n      setInput([...inputCache]);\r\n      return;\r\n    }\r\n\r\n    const value = await inputDialog.openDialog(\r\n      currentScoreId,\r\n      currentQuestionId,\r\n      input.length <= 1\r\n    );\r\n\r\n    if (value || value === 0) {\r\n      const inputComparator = createComparator(action);\r\n      const inputValue =\r\n        value === 'if'\r\n          ? [inputComparator, ...createConditional()]\r\n          : [inputComparator, value];\r\n\r\n      if (menuEditIndex !== null) {\r\n        const inputCache = [...input];\r\n        inputCache.splice(menuEditIndex + 1, 0, ...inputValue);\r\n        setInput([...inputCache]);\r\n      } else {\r\n        setInput([...input, inputComparator, value]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = action => () => {\r\n    if (action === 'confirm') {\r\n      closeDialog([...input]);\r\n    } else {\r\n      closeDialog(null);\r\n    }\r\n  };\r\n\r\n  const handleAddSourceClick = (index = null) => async event => {\r\n    if (index === null && scoreStep.steps.length > 0) {\r\n      return handleMenuClick(null)(event);\r\n    }\r\n\r\n    const value = await inputDialog.openDialog(\r\n      currentScoreId,\r\n      currentQuestionId,\r\n      input.length <= 1\r\n    );\r\n\r\n    if (value || value === 0) {\r\n      let insertValue = [value];\r\n      if (value === 'if') {\r\n        insertValue = createConditional();\r\n      }\r\n\r\n      if (index === null) {\r\n        setInput([...input, ...insertValue]);\r\n      } else {\r\n        const inputCache = [...input];\r\n        inputCache.splice(index, 1, ...insertValue);\r\n        setInput([...inputCache]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRemove = index => () => {\r\n    if (index <= 1) return;\r\n\r\n    const inputCache = [...input];\r\n    inputCache.splice(index - 1, 2);\r\n    setInput([...inputCache]);\r\n  };\r\n\r\n  const renderInlineButtons = (i, depthStyle, comparator = false) => (\r\n    <ListItem button key={i} className={classes.if} style={depthStyle}>\r\n      <ListItemText>\r\n        {comparator && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={handleComparatorMenuClick(i + 1, false)}\r\n            startIcon={\r\n              <Icon\r\n                path={mdiCodeGreaterThanOrEqual}\r\n                size={1}\r\n                color={theme.palette.primary.main}\r\n              />\r\n            }\r\n          >\r\n            Compare\r\n          </Button>\r\n        )}\r\n        <Button\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          onClick={handleMenuClick(i + 1, false)}\r\n          style={{ marginLeft: comparator ? theme.spacing(1) : 0 }}\r\n          startIcon={\r\n            <Icon\r\n              path={mdiCalculatorVariant}\r\n              size={1}\r\n              color={theme.palette.primary.main}\r\n            />\r\n          }\r\n        >\r\n          Combine\r\n        </Button>\r\n      </ListItemText>\r\n    </ListItem>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose('dismiss')}\r\n        aria-labelledby=\"input-dialog-title\"\r\n        aria-describedby=\"input-dialog-description\"\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        fullHeight\r\n      >\r\n        <DialogTitle id=\"input-dialog-title\">{l`questionScoreValueTitle`}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"input-dialog-description\">\r\n            <Typography variant=\"body2\">\r\n              {l`questionScoreValueDescription`}\r\n            </Typography>\r\n          </DialogContentText>\r\n\r\n          {scoreStep.steps.length > 1 && (\r\n            <ArrowDownwardIcon className={classes.helperArrow} />\r\n          )}\r\n\r\n          <List component=\"nav\" aria-label=\"source\">\r\n            {scoreStep.steps.map((value, i) => {\r\n              // Calculating if start statement depth\r\n              if (\r\n                value.type === SCORE_TYPE.CONDITIONAL &&\r\n                value.step === 'if'\r\n              ) {\r\n                depthLevel++;\r\n              }\r\n\r\n              // Styling based on depth\r\n              let depthColor =\r\n                depthLevel % 2 === 0\r\n                  ? theme.palette.secondary.main\r\n                  : theme.palette.primary.main;\r\n              let depthStyle = {\r\n                marginLeft: Math.max(0, depthLevel - 1) * 16,\r\n                borderLeft: `3px solid ${depthColor}`\r\n              };\r\n              if (depthLevel === 0) depthStyle = null;\r\n\r\n              const isInsideIfCondition = depthLevel > 0 && lastStep === 'if';\r\n              const isInsideIfOutput =\r\n                depthLevel > 0 &&\r\n                (lastStep === 'then' || lastStep === 'else') &&\r\n                value.type !== SCORE_TYPE.CONDITIONAL;\r\n              const isLastInsideIfCondition =\r\n                isInsideIfCondition &&\r\n                scoreStep.steps[i + 1].type === SCORE_TYPE.CONDITIONAL &&\r\n                scoreStep.steps[i + 1].step === 'then';\r\n              const isLastInsideIfOutput =\r\n                isInsideIfOutput &&\r\n                scoreStep.steps[i + 1].type === SCORE_TYPE.CONDITIONAL &&\r\n                (scoreStep.steps[i + 1].step === 'else' ||\r\n                  scoreStep.steps[i + 1].step === 'end');\r\n\r\n              const isPermanent =\r\n                (isInsideIfCondition &&\r\n                  scoreStep.steps[i - 1].type === SCORE_TYPE.CONDITIONAL &&\r\n                  scoreStep.steps[i - 1].step === 'if') ||\r\n                (isInsideIfOutput &&\r\n                  scoreStep.steps[i - 1].type === SCORE_TYPE.CONDITIONAL);\r\n\r\n              // Calculating if end statement depth\r\n              if (\r\n                value.type === SCORE_TYPE.CONDITIONAL &&\r\n                value.step === 'end'\r\n              ) {\r\n                depthLevel--;\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.CONDITIONAL) {\r\n                lastStep = value.step;\r\n\r\n                depthStyle.backgroundColor = depthColor;\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.OPERATOR) {\r\n                const text = mathOperatorTexts[value.sign];\r\n                const icon = mathIconList[value.sign];\r\n\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleMenuClick(i + 1)}\r\n                    key={i}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemIcon>\r\n                      <Icon path={icon} size={1} className={classes.mdi} />\r\n                    </ListItemIcon>\r\n                    <ListItemText>{text}</ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.COMPARATOR) {\r\n                const text = comparatorTexts[value.compare];\r\n                const icon = comparatorIconList[value.compare];\r\n\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleMenuClick(i + 1)}\r\n                    key={i}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemIcon>\r\n                      <Icon path={icon} size={1} className={classes.mdi} />\r\n                    </ListItemIcon>\r\n                    <ListItemText>{text}</ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.CONDITIONAL) {\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleMenuClick(i + 1)}\r\n                    key={i}\r\n                    className={classes.if}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemText>{value.step}</ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (\r\n                value.type === SCORE_TYPE.VALUE &&\r\n                value.from === null &&\r\n                value.value === null\r\n              ) {\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleAddSourceClick(i + 1)}\r\n                    key={i}\r\n                    className={classes.if}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemText>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                        startIcon={<AddIcon />}\r\n                      >\r\n                        Pick Value\r\n                      </Button>\r\n                    </ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.VALUE && value.from === null) {\r\n                return (\r\n                  <>\r\n                    <ListItem\r\n                      button\r\n                      onClick={handleAddSourceClick(i + 1)}\r\n                      key={i}\r\n                      style={depthStyle}\r\n                    >\r\n                      <ListItemIcon>\r\n                        <Icon\r\n                          path={mdiCalculator}\r\n                          size={1}\r\n                          color=\"rgba(0, 0, 0, 0.54)\"\r\n                        />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        primary={value.value}\r\n                        secondary={l`questionScoreValueStatic`}\r\n                      />\r\n                      <ListItemSecondaryAction>\r\n                        <IconButton\r\n                          edge=\"end\"\r\n                          aria-label=\"edit\"\r\n                          onClick={handleAddSourceClick(i + 1)}\r\n                        >\r\n                          <EditIcon />\r\n                        </IconButton>\r\n                        {i !== 0 && !isPermanent && (\r\n                          <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"remove\"\r\n                            onClick={handleRemove(i + 1)}\r\n                          >\r\n                            <DeleteIcon />\r\n                          </IconButton>\r\n                        )}\r\n                      </ListItemSecondaryAction>\r\n                    </ListItem>\r\n                    {isLastInsideIfCondition &&\r\n                      renderInlineButtons(i, depthStyle, true)}\r\n                    {isLastInsideIfOutput && renderInlineButtons(i, depthStyle)}\r\n                  </>\r\n                );\r\n              }\r\n\r\n              const question = survey.questions.find(x => x.id === value.from);\r\n              const score = parseScore(\r\n                question.score.find(x => x[0].split('.')[1] === value.value)\r\n              );\r\n\r\n              return (\r\n                <>\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleAddSourceClick(i + 1)}\r\n                    key={i}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemIcon>\r\n                      {value.value === 'score' ? (\r\n                        <StarRoundedIcon />\r\n                      ) : (\r\n                        <StarBorderRoundedIcon />\r\n                      )}\r\n                    </ListItemIcon>\r\n                    <ListItemText\r\n                      primary={\r\n                        value.value === 'score'\r\n                          ? l`questionScoreSourceDynamicDefaultTitle`\r\n                          : score.name\r\n                      }\r\n                      secondary={`${question.index + 1}. ${question.title}`}\r\n                    />\r\n\r\n                    <ListItemSecondaryAction>\r\n                      <IconButton\r\n                        edge=\"end\"\r\n                        aria-label=\"edit\"\r\n                        onClick={handleAddSourceClick(i + 1)}\r\n                      >\r\n                        <EditIcon />\r\n                      </IconButton>\r\n                      {i !== 0 && !isPermanent && (\r\n                        <IconButton\r\n                          edge=\"end\"\r\n                          aria-label=\"remove\"\r\n                          onClick={handleRemove(i + 1)}\r\n                        >\r\n                          <DeleteIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                  {isLastInsideIfCondition &&\r\n                    renderInlineButtons(i, depthStyle, true)}\r\n                  {isLastInsideIfOutput && renderInlineButtons(i, depthStyle)}\r\n                </>\r\n              );\r\n            })}\r\n\r\n            <ListItem className={classes.buttonItem}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size={scoreStep.steps.length ? 'small' : 'large'}\r\n                className={classes.button}\r\n                startIcon={\r\n                  scoreStep.steps.length ? (\r\n                    <Icon path={mdiCalculatorVariant} size={1} color=\"#FFF\" />\r\n                  ) : (\r\n                    <AddIcon />\r\n                  )\r\n                }\r\n                onClick={handleAddSourceClick(null)}\r\n              >\r\n                {scoreStep.steps.length\r\n                  ? l`questionScoreValueCreateButton`\r\n                  : l`questionScoreValueCreateButtonFirst`}\r\n              </Button>\r\n            </ListItem>\r\n          </List>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose('cancel')} color=\"primary\">\r\n            {l`dialogButtonCancel`}\r\n          </Button>\r\n          <Button\r\n            onClick={handleClose('confirm')}\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            {l`dialogButtonConfirm`}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Menu\r\n        id=\"operator-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleMenuClose(null)}\r\n        style={{ zIndex: 2000 }}\r\n      >\r\n        {Object.values(OPERATOR_TYPE).map(x => (\r\n          <MenuItem onClick={handleMenuClose(x)} key={x}>\r\n            <ListItemIcon>\r\n              <Icon path={mathIconList[x]} size={1} className={classes.mdi} />\r\n            </ListItemIcon>\r\n            {mathOperatorTexts[x]}\r\n          </MenuItem>\r\n        ))}\r\n      </Menu>\r\n\r\n      <Menu\r\n        id=\"comparator-menu\"\r\n        anchorEl={comparatorMenuAnchorEl}\r\n        keepMounted\r\n        open={Boolean(comparatorMenuAnchorEl)}\r\n        onClose={handleComparatorMenuClose(null)}\r\n        style={{ zIndex: 2000 }}\r\n      >\r\n        {Object.values(COMPARATOR_TYPE).map(x => (\r\n          <MenuItem onClick={handleComparatorMenuClose(x)} key={x}>\r\n            <ListItemIcon>\r\n              <Icon\r\n                path={comparatorIconList[x]}\r\n                size={1}\r\n                className={classes.mdi}\r\n              />\r\n            </ListItemIcon>\r\n            {comparatorTexts[x]}\r\n          </MenuItem>\r\n        ))}\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default QuestionScoreDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\r\n * @file Lists the scores attached to a single question. Handles modifying and removing simgle scores. Used by {@link QuestionScore}\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport AttachmentIcon from '@material-ui/icons/Attachment';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport { openDialog } from './QuestionScoreDialog';\r\nimport { handleSurveyQuestionUpdate } from './QuestionUtil';\r\nimport { parseScore, SCORE_TYPE } from './Score';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  value: {},\r\n  label: {\r\n    margin: '0 3px',\r\n    padding: '0 3px',\r\n    backgroundColor: '#FFFFFF',\r\n    fontWeight: 'bold',\r\n    color: theme.palette.text.primary,\r\n    borderRadius: 3\r\n  },\r\n  row: {\r\n    marginBottom: theme.spacing(1)\r\n  }\r\n}));\r\n\r\nexport const QuestionScoreList = ({\r\n  survey,\r\n  index,\r\n  questionId,\r\n  scoreList,\r\n  setSurvey\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const handleScoreUpdate = score => {\r\n    if (index !== null) {\r\n      setSurvey(\r\n        handleSurveyQuestionUpdate(survey, index, {\r\n          score\r\n        })\r\n      );\r\n    } else {\r\n      setSurvey({ ...survey, score });\r\n    }\r\n  };\r\n\r\n  const handleValueUpdate = p => async () => {\r\n    const value = await openDialog(questionId, scoreList[p]);\r\n\r\n    if (value) {\r\n      const dataCache = [...scoreList];\r\n      dataCache[p] = value;\r\n      handleScoreUpdate([...dataCache]);\r\n    }\r\n  };\r\n\r\n  return scoreList.map((line, p) => {\r\n    // const locked = !!line[0].locked;\r\n\r\n    const scoreStepList = parseScore(line);\r\n    const labelParts = l`questionScoreVariable`.split('SCORE');\r\n\r\n    const actualStepCount = scoreStepList.steps.filter(\r\n      x => x.type !== SCORE_TYPE.OPERATOR && x.type !== SCORE_TYPE.COMPARATOR\r\n    ).length;\r\n    const hasBadge = actualStepCount > 1;\r\n    const hasContent = !!actualStepCount;\r\n    const isDefault = scoreStepList.id === 'score';\r\n\r\n    const currentQuestion = survey.questions.find(x => x.id === questionId);\r\n\r\n    let name = l`questionScorePickValue`;\r\n    if (hasContent && scoreStepList.steps[0].type === SCORE_TYPE.VALUE) {\r\n      if (scoreStepList.steps[0].from === null) {\r\n        name = scoreStepList.steps[0].value;\r\n      } else {\r\n        const question = survey.questions.find(\r\n          x => x.id === scoreStepList.steps[0].from\r\n        );\r\n        const score = parseScore(\r\n          question.score.find(\r\n            x => x[0].split('.')[1] === scoreStepList.steps[0].value\r\n          )\r\n        );\r\n\r\n        name = score.name;\r\n      }\r\n    }\r\n\r\n    if (hasBadge) {\r\n      name += '';\r\n    }\r\n\r\n    const createAnswerScoreName = () => {\r\n      const answerList = [\r\n        ...new Set(currentQuestion.options.map(x => `${x.score}`))\r\n      ];\r\n      return (\r\n        answerList.slice(0, -1).join(',') +\r\n        ` ${l`questionScoreListOr`} ` +\r\n        answerList.slice(-1)\r\n      );\r\n    };\r\n\r\n    const chip = (\r\n      <Chip\r\n        icon={<AttachmentIcon className={classes.value} />}\r\n        label={isDefault ? createAnswerScoreName() : name}\r\n        style={{\r\n          borderRadius: '0 16px 16px 0'\r\n        }}\r\n        color={hasContent || isDefault ? 'primary' : 'secondary'}\r\n        variant=\"outlined\"\r\n        onClick={isDefault ? null : handleValueUpdate(p)}\r\n        onDelete={isDefault ? null : () => {}}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <Box className={classes.row} key={`line-${p}`}>\r\n        <Chip\r\n          icon={<ArrowForwardIcon className={classes.value} />}\r\n          label={\r\n            <>\r\n              {labelParts[0]}\r\n              <span className={classes.label}>{scoreStepList.name}</span>\r\n              {labelParts[1]}\r\n            </>\r\n          }\r\n          style={{\r\n            borderRadius: '16px 0 0 16px'\r\n          }}\r\n          color=\"primary\"\r\n        />\r\n        {hasBadge && (\r\n          <Badge badgeContent={actualStepCount} max={9} color=\"secondary\">\r\n            {chip}\r\n          </Badge>\r\n        )}\r\n        {!hasBadge && chip}\r\n        {/*\r\n          if (firstValue.type === 'question') {\r\n            // Input\r\n            let name = l`questionScoreSourceDynamicDefaultTitle`;\r\n            if (firstValue.value !== 'score') {\r\n              name = firstValue.value[0].value;\r\n            }\r\n\r\n            let label = l`questionScoreSourceDynamicDefaultTitle`;\r\n            if (!locked) {\r\n              label = `${firstValue.source.index + 1}. ${name}`;\r\n            }\r\n\r\n            props.label = label;\r\n          } else {\r\n            // Static value\r\n            props.label = `${firstValue.source}.${firstValue.value || 0}`;\r\n          }\r\n\r\n          if (source.value.length > 1) {\r\n            props.label += ' ';\r\n          }\r\n        */}\r\n\r\n        {isDefault && (\r\n          <Tooltip\r\n            title={`Every question will output the default \"Score\" source`}\r\n            placement=\"right\"\r\n          >\r\n            <LockIcon />\r\n          </Tooltip>\r\n        )}\r\n      </Box>\r\n    );\r\n  });\r\n};\r\n","/**\r\n * @file Handles picking a name for a new score.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n// import { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\n\r\nconst l = Locale(Translation);\r\n\r\nlet setOpenState = null;\r\nlet setInputState = null;\r\nlet resolveDialog = null;\r\n\r\n/*\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper,\r\n    position: 'relative',\r\n    overflow: 'auto',\r\n    maxHeight: 300\r\n  },\r\n  listSection: {\r\n    backgroundColor: 'inherit'\r\n  },\r\n  ul: {\r\n    backgroundColor: 'inherit',\r\n    padding: 0\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4)\r\n  }\r\n}));\r\n*/\r\n\r\nconst closeDialog = action => {\r\n  setOpenState(false);\r\n  if (resolveDialog) {\r\n    resolveDialog(action);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = () =>\r\n  new Promise(resolve => {\r\n    setInputState('');\r\n    resolveDialog = resolve;\r\n    setOpenState(true);\r\n  });\r\n\r\nconst QuestionScoreCreateDialog = () => {\r\n  // const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [name, setName] = React.useState('');\r\n\r\n  setOpenState = setOpen;\r\n  setInputState = setName;\r\n\r\n  const handleClose = action => () => {\r\n    if (action === 'confirm') {\r\n      closeDialog(name);\r\n    } else {\r\n      closeDialog(null);\r\n    }\r\n  };\r\n\r\n  const handleNameChange = event => {\r\n    setName(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose(null)}\r\n      aria-labelledby=\"input-dialog-title\"\r\n      aria-describedby=\"input-dialog-description\"\r\n      maxWidth=\"xs\"\r\n      fullWidth\r\n      fullHeight\r\n    >\r\n      <DialogTitle id=\"input-dialog-title\">{l`questionScoreCreateTitle`}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"input-dialog-description\">\r\n          <Typography variant=\"body2\">\r\n            {l`questionScoreCreateDescription`}\r\n          </Typography>\r\n        </DialogContentText>\r\n\r\n        <TextField\r\n          autoFocus\r\n          id=\"name\"\r\n          label={l`questionScoreCreateNameLabel`}\r\n          fullWidth\r\n          value={name}\r\n          onChange={handleNameChange}\r\n          variant=\"outlined\"\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose('cancel')} color=\"primary\">\r\n          {l`dialogButtonCancel`}\r\n        </Button>\r\n        <Button\r\n          onClick={handleClose('confirm')}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          autoFocus\r\n        >\r\n          {l`dialogButtonConfirm`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuestionScoreCreateDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\r\n * @file Scoring functionality for a single question. Will handle displaying and adding scores.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AttachmentIcon from '@material-ui/icons/Attachment';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport React from 'react';\r\nimport uuid from 'uuid/v4';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport { QuestionScoreList } from './QuestionScoreList';\r\nimport QuestionScoreCreateDialog, * as sourceDialog from './QuestionScoreCreateDialog';\r\nimport { handleSurveyQuestionUpdate } from './QuestionUtil';\r\n\r\nconst l = Locale(Translation);\r\n\r\nexport const QuestionScore = ({ survey, index, question, setSurvey }) => {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n\r\n  /*\r\n  const handleSourceUpdate = source => {\r\n    setSurvey(\r\n      handleSurveyQuestionUpdate(survey, index, {\r\n        source\r\n      })\r\n    );\r\n  };\r\n  */\r\n\r\n  const handleScoreUpdate = score => {\r\n    setSurvey(\r\n      handleSurveyQuestionUpdate(survey, index, {\r\n        score\r\n      })\r\n    );\r\n  };\r\n\r\n  /*\r\n  const handleMenuClick = event => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n  */\r\n\r\n  const handleMenuClose = action => async () => {\r\n    setMenuAnchorEl(null);\r\n\r\n    if (action === 'variable') {\r\n      const name = await sourceDialog.openDialog();\r\n      if (!name) return;\r\n\r\n      handleScoreUpdate([...question.score, [`id.${uuid()}.${name}`]]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box>\r\n        <Box>\r\n          <QuestionScoreList\r\n            survey={survey}\r\n            index={index}\r\n            questionId={question.id}\r\n            scoreList={question.score}\r\n            setSurvey={setSurvey}\r\n          />\r\n\r\n          <Chip\r\n            icon={<AddIcon />}\r\n            label={l`questionScoreVariableCreateButton`}\r\n            onClick={handleMenuClose('variable')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n            style={{ marginRight: 8 }}\r\n          />\r\n\r\n          <Chip\r\n            icon={<DonutLargeIcon />}\r\n            label=\"Modify User Meters\"\r\n            onClick={handleMenuClose('meter')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleMenuClose(null)}\r\n        style={{ zIndex: 2000 }}\r\n      >\r\n        <MenuItem onClick={handleMenuClose('variable')}>\r\n          <ListItemIcon>\r\n            <AttachmentIcon />\r\n          </ListItemIcon>\r\n          Create Score\r\n        </MenuItem>\r\n        <MenuItem onClick={handleMenuClose('meter')}>\r\n          <ListItemIcon>\r\n            <DonutLargeIcon />\r\n          </ListItemIcon>\r\n          Move Meter\r\n        </MenuItem>\r\n      </Menu>\r\n\r\n      <QuestionScoreCreateDialog\r\n        survey={survey}\r\n        index={index}\r\n        question={question}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","/**\n * @file Renders and manages the functionality of the \"Text\" question options.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport SubjectIcon from '@material-ui/icons/Subject';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport React from 'react';\n\nimport { handleSurveyOptionUpdate } from '../QuestionUtil';\n\nimport { QuestionOptionRoute } from '../QuestionOptionRoute';\n\nimport Translation from '../questionLocale.json';\nimport Locale from '../../Locale';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  badge: {\n    position: 'absolute',\n    display: 'block',\n    top: 0,\n    right: -6,\n    width: 12,\n    height: 12,\n    borderRadius: '50%',\n    backgroundColor: '#CD5B5B'\n  },\n  dialog: {\n    width: 600\n  },\n  option: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    padding: 0,\n    marginTop: 8,\n    borderRadius: 4,\n    border: `1px solid ${theme.palette.divider}`\n  },\n  optionContainer: {\n    display: 'flex',\n    flex: 1,\n    padding: theme.spacing(2),\n    maxWidth: 500\n  },\n  optionMain: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: theme.spacing(2)\n  },\n  optionTitle: {\n    marginTop: -5,\n    marginBottom: theme.spacing(1.5)\n  },\n  optionAdvanced: {\n    display: 'flex'\n  },\n  optionInput: {\n    flex: 1,\n    marginLeft: 0,\n    marginTop: 0\n  },\n  optionInputSecondary: {\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: 0,\n    marginTop: theme.spacing(2)\n  },\n  optionInputMenu: {\n    maxWidth: 500\n  },\n  optionInputMenuItem: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  optionInputScore: {\n    marginLeft: 0,\n    marginRight: theme.spacing(3),\n    marginTop: theme.spacing(2),\n    width: 100\n  },\n  optionIconLabel: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: -4\n  },\n  optionIconLabelIcon: {\n    marginRight: theme.spacing(0.75)\n  },\n  subtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(2)\n  }\n}));\n\nexport const QuestionText = ({ index, survey, setSurvey }) => {\n  const classes = useStyles();\n\n  const question = survey.questions[index];\n  const option = question.options[0];\n\n  const questionTypes = l('questionsType');\n\n  const handleAllowEmptyUpdate = event => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, 0, {\n        allowAmpty: !!event.target.checked,\n        route: !event.target.checked ? null : option.route\n      })\n    );\n  };\n\n  const handleRouteUpdate = route => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, 0, {\n        route\n      })\n    );\n  };\n\n  return (\n    <Box className={classes.section}>\n      <Typography variant=\"h6\">{l('questionOptionsText')}</Typography>\n      <Typography variant=\"body2\" className={classes.subtitle}>\n        {l('questionOptionsInfo')}\n      </Typography>\n\n      <Box className={classes.option}>\n        <Box className={classes.optionContainer}>\n          <SubjectIcon />\n          <Box className={classes.optionMain}>\n            <Typography variant=\"h6\" className={classes.optionTitle}>\n              {questionTypes[question.type]}\n            </Typography>\n\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={option.allowAmpty}\n                  onChange={handleAllowEmptyUpdate}\n                  value={true}\n                />\n              }\n              label={l('questionOptionAllowEmptyLabel')}\n            />\n\n            {!!option.allowAmpty && (\n              <Box className={classes.optionAdvanced}>\n                <QuestionOptionRoute\n                  survey={survey}\n                  index={index}\n                  value={option.route}\n                  onChange={handleRouteUpdate}\n                  className={classes.optionInputSecondary}\n                  helperText={l('questionOptionEmptyRouteInfo')}\n                />\n              </Box>\n            )}\n          </Box>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Common functionality amongst different question types. Will also render the appropriate question type options.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport Locale from '../Locale';\nimport TextField from '../CachedInput';\nimport { QuestionChooseMultiple } from './type/QuestionChooseMultiple';\nimport { QuestionChooseOne } from './type/QuestionChooseOne';\nimport Translation from './questionLocale.json';\nimport { QuestionRouteTable } from './QuestionRouteTable';\nimport { QuestionScore } from './QuestionScore';\nimport { QuestionText } from './type/QuestionText';\nimport {\n  getDefaultRoute,\n  handleSurveyQuestionUpdate,\n  listPossibleRoutes\n} from './QuestionUtil';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  box: {\n    width: '100%'\n  },\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  input: {\n    width: '100%',\n    flex: 1\n  },\n  menu: {\n    width: 200\n  },\n  details: {\n    paddingTop: '0 !important',\n    paddingBottom: '0 !important'\n  },\n  routeSection: {\n    marginBottom: theme.spacing(3)\n  },\n  routeSectionInput: {\n    width: '100%',\n    maxWidth: 518\n  },\n  subtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(1.5)\n  },\n  divider: {\n    padding: 0,\n    marginTop: theme.spacing(1.5),\n    marginBottom: theme.spacing(1.5),\n    height: 0,\n    backgroundColor: theme.palette.divider,\n    border: 'none'\n  },\n  inputMenu: {\n    maxWidth: 500\n  },\n  inputMenuItem: {\n    maxWidth: '100%',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  }\n}));\n\nexport const QuestionDetails = ({ index, survey, question, setSurvey }) => {\n  const classes = useStyles();\n\n  let defaultRoute = getDefaultRoute(survey.questions, index);\n  if (defaultRoute && defaultRoute !== 'end') defaultRoute = defaultRoute.id;\n\n  const questionTypes = l('questionsType');\n\n  let content = null;\n  switch (question.type) {\n    case 'selectOne':\n      content = (\n        <QuestionChooseOne\n          index={index}\n          survey={survey}\n          question={question}\n          setSurvey={setSurvey}\n        />\n      );\n      break;\n    case 'selectMultiple':\n      content = (\n        <QuestionChooseMultiple\n          index={index}\n          survey={survey}\n          question={question}\n          setSurvey={setSurvey}\n        />\n      );\n      break;\n    case 'text':\n      content = (\n        <QuestionText index={index} survey={survey} setSurvey={setSurvey} />\n      );\n      break;\n    default:\n      break;\n  }\n\n  const handleTitleUpdate = title => {\n    setSurvey(\n      handleSurveyQuestionUpdate(survey, index, {\n        title\n      })\n    );\n  };\n\n  const handleRouteUpdate = route => {\n    setSurvey(\n      handleSurveyQuestionUpdate(survey, index, {\n        defaultRoute: route\n      })\n    );\n  };\n\n  return (\n    <Box className={classes.box}>\n      {/* Details */}\n      <Box className={classes.section}>\n        {/*\n        <Typography variant=\"h6\">{l('questionDetailsText')}</Typography>\n        <Typography variant=\"body2\" className={classes.subtitle}>\n          {l('questionDetailsInfo')}\n        </Typography>\n        */}\n\n        <Grid container spacing={4}>\n          <Grid item md={8} sm={12} xs={12} className={classes.details}>\n            <TextField\n              variant=\"outlined\"\n              className={classes.input}\n              label={l('questionDetailsTitleLabel')}\n              value={question.title}\n              margin=\"normal\"\n              onChange={handleTitleUpdate}\n            />\n          </Grid>\n          <Grid item md={4} sm={12} xs={12} className={classes.details}>\n            <TextField\n              variant=\"outlined\"\n              select\n              label={l('questionDetailsTypeLabel')}\n              className={classes.input}\n              value={question.type}\n              SelectProps={{\n                MenuProps: {\n                  className: classes.menu\n                }\n              }}\n              helperText={l('questionDetailsTypeInfo')}\n              margin=\"normal\"\n              disabled\n            >\n              <MenuItem key={question.type} value={question.type}>\n                {questionTypes[question.type]}\n              </MenuItem>\n            </TextField>\n          </Grid>\n        </Grid>\n      </Box>\n\n      <hr className={classes.divider} />\n\n      {/* Options */}\n      <Box className={classes.section}>{content}</Box>\n\n      <hr className={classes.divider} />\n\n      {/* Routing */}\n      <Box className={classes.section}>\n        <Typography variant=\"h6\">{l('questionRouteText')}</Typography>\n        <Typography variant=\"body2\" className={classes.subtitle}>\n          {l('questionRouteInfo')}\n        </Typography>\n\n        {/* TODO: Figure out if this is nessesary... */}\n        {false && (\n          <Box className={classes.routeSection}>\n            <TextField\n              select\n              label=\"Default Next Question\"\n              className={classes.routeSectionInput}\n              value={defaultRoute}\n              onChange={handleRouteUpdate}\n              SelectProps={{\n                MenuProps: {\n                  className: classes.inputMenu\n                }\n              }}\n              helperText=\"Next question for options without custom route rules\"\n              margin=\"normal\"\n              variant=\"outlined\"\n            >\n              {listPossibleRoutes(survey.questions, index).map(x => (\n                <MenuItem\n                  className={classes.inputMenuItem}\n                  key={x.id}\n                  value={x.id}\n                >\n                  {x.index + 1}. {x.title}\n                </MenuItem>\n              ))}\n\n              <MenuItem key=\"end\" value=\"end\">\n                End Survey\n              </MenuItem>\n            </TextField>\n          </Box>\n        )}\n\n        <QuestionRouteTable index={index} survey={survey} question={question} />\n      </Box>\n\n      {/* Scoring */}\n      <Box className={classes.section}>\n        <Typography variant=\"h6\">{l('questionScoreText')}</Typography>\n        <Typography variant=\"body2\" className={classes.subtitle}>\n          {l('questionScoreInfo')}\n        </Typography>\n\n        <QuestionScore\n          index={index}\n          survey={survey}\n          question={question}\n          setSurvey={setSurvey}\n        />\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file The primary component for a question. Will handle all the nessesary logic for single question management.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\nimport { QuestionDetails } from './QuestionDetails';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport { checkScoreStatus, checkRouteStatus } from './QuestionUtil';\n\nimport SpellcheckIcon from '@material-ui/icons/Spellcheck';\nimport CallSplitIcon from '@material-ui/icons/CallSplit';\n\nimport Translation from './questionLocale.json';\nimport Locale from '../Locale';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  title: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  panel: {\n    width: '100%'\n  },\n  header: {\n    maxWidth: 'calc(100% - 70px)'\n  },\n  statusIconContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    position: 'absolute',\n    height: '100%',\n    top: 0,\n    right: theme.spacing(8)\n  },\n  statusIcon: {\n    padding: 3,\n    marginLeft: theme.spacing(1),\n    borderRadius: '50%',\n    width: 20,\n    height: 20\n    // backgroundColor: '#eee'\n    //fill: '#fff'\n  },\n  list: {\n    margin: 0,\n    paddingLeft: 19,\n    paddingTop: 0,\n    paddingBottom: 0,\n    fontSize: '0.8em',\n    color: theme.palette.text.secondary\n  },\n  number: {\n    position: 'absolute',\n    left: -16,\n    backgroundColor: theme.palette.primary.main,\n    width: 32,\n    height: 32,\n    borderRadius: '50%',\n    boxShadow:\n      '0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)',\n    textAlign: 'center',\n    lineHeight: '32px',\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#fff'\n  }\n}));\n\nconst StyledExpansionPanelSummary = withStyles({\n  content: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  }\n})(ExpansionPanelSummary);\n\nexport const Question = ({\n  index,\n  survey,\n  question,\n  setSurvey,\n  expanded,\n  handleExpandChange\n}) => {\n  const classes = useStyles();\n\n  const contentRef = React.useRef(null);\n\n  const questionTypes = l('questionsType');\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpandChange(index)}>\n      <StyledExpansionPanelSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls=\"panel1bh-content\"\n        id=\"panel1bh-header\"\n      >\n        <Box className={classes.number}>{index + 1}</Box>\n        <Box className={classes.panel}>\n          <Box className={classes.header}>\n            <Typography variant=\"h6\" display=\"block\" className={classes.title}>\n              {question.title}\n            </Typography>\n            <Typography variant=\"caption\" display=\"block\">\n              {questionTypes[question.type]}\n            </Typography>\n\n            <Box className={classes.statusIconContainer}>\n              {checkScoreStatus(question) && (\n                <SpellcheckIcon\n                  style={{ fill: '#56B47C' }}\n                  className={classes.statusIcon}\n                />\n              )}\n              {checkRouteStatus(question) && (\n                <CallSplitIcon\n                  style={{ fill: '#CD5B5B' }}\n                  className={classes.statusIcon}\n                />\n              )}\n            </Box>\n          </Box>\n          {!expanded && question.type === 'selectOne' && (\n            <Box>\n              <ul className={classes.list}>\n                {question.options.map(x => (\n                  <li>{x.name}</li>\n                ))}\n              </ul>\n            </Box>\n          )}\n        </Box>\n      </StyledExpansionPanelSummary>\n      <ExpansionPanelDetails ref={contentRef}>\n        {(expanded || !contentRef.current) && (\n          <QuestionDetails\n            index={index}\n            survey={survey}\n            question={question}\n            setSurvey={setSurvey}\n          />\n        )}\n        {!expanded && contentRef.current && (\n          <Box style={{ height: contentRef.current.offsetHeight }} />\n        )}\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n};\n","/**\r\n * @file List all custom and default scores in the survey. Used in {@link SurveyEdit}\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { parseScore } from './Score';\r\n\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\r\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  routeSection: {\r\n    marginBottom: theme.spacing(3)\r\n  },\r\n  table: {\r\n    tableLayout: 'fixed'\r\n  },\r\n  routeCell: {\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden'\r\n  },\r\n  routeIconCell: {},\r\n  routeIconCellIcon: {\r\n    width: 16,\r\n    height: 16\r\n  }\r\n}));\r\n\r\nexport const SurveyScoreTable = ({ survey }) => {\r\n  const classes = useStyles();\r\n\r\n  const scoreList = survey.questions\r\n    .map(x =>\r\n      x.score.map(parseScore).map(y => ({\r\n        source: y,\r\n        question: x,\r\n        isAnswerScore: y.id === 'score'\r\n      }))\r\n    )\r\n    .flat();\r\n\r\n  return (\r\n    <Box className={classes.routeSection}>\r\n      {/*\r\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\r\n        Route Table\r\n      </InputLabel>\r\n      */}\r\n\r\n      <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell width={16}></TableCell>\r\n            <TableCell width=\"45%\">Question</TableCell>\r\n            <TableCell width=\"45%\">Score</TableCell>\r\n            <TableCell width=\"10%\" align=\"right\">\r\n              Save\r\n            </TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {scoreList.map((x, i) => (\r\n            <TableRow key={x.source.id}>\r\n              <TableCell\r\n                width={16}\r\n                className={classes.routeIconCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n              >\r\n                {x.isAnswerScore ? (\r\n                  <StarRoundedIcon className={classes.routeIconCellIcon} />\r\n                ) : (\r\n                  <StarBorderRoundedIcon\r\n                    className={classes.routeIconCellIcon}\r\n                  />\r\n                )}\r\n              </TableCell>\r\n              <TableCell\r\n                width=\"45%\"\r\n                className={classes.routeCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n              >\r\n                {x.question.index + 1}. {x.question.title}\r\n              </TableCell>\r\n              <TableCell\r\n                width=\"45%\"\r\n                className={classes.routeCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n              >\r\n                <Typography variant=\"body2\" style={{ fontWeight: 'bold' }}>\r\n                  {x.source.name}\r\n                </Typography>\r\n                <Typography variant=\"caption\" component=\"div\">\r\n                  {x.isAnswerScore\r\n                    ? l`questionScoreSourceDynamicDefaultDescription`\r\n                    : l`questionScoreSourceDynamicCustomDescription`}\r\n                </Typography>\r\n              </TableCell>\r\n              <TableCell\r\n                width=\"10%\"\r\n                defaultChecked={true}\r\n                className={classes.routeCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n                align=\"right\"\r\n              >\r\n                <Checkbox\r\n                  value={x.source.id}\r\n                  inputProps={{\r\n                    'aria-label': 'save score'\r\n                  }}\r\n                />\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </Box>\r\n  );\r\n};\r\n","/**\r\n * @file Scoring functionality for a single question. Will handle displaying and adding scores.\r\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport React from 'react';\r\nimport uuid from 'uuid/v4';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport QuestionScoreCreateDialog, * as sourceDialog from './QuestionScoreCreateDialog';\r\nimport { QuestionScoreList } from './QuestionScoreList';\r\n\r\nconst l = Locale(Translation);\r\n\r\nexport const SurveyScore = ({ survey, setSurvey }) => {\r\n  /*\r\n  const handleSourceUpdate = source => {\r\n    setSurvey(\r\n      handleSurveyQuestionUpdate(survey, index, {\r\n        source\r\n      })\r\n    );\r\n  };\r\n  */\r\n\r\n  const handleScoreUpdate = score => {\r\n    setSurvey({ ...survey, score });\r\n  };\r\n\r\n  /*\r\n  const handleMenuClick = event => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n  */\r\n\r\n  const handleMenuClose = action => async () => {\r\n    if (action === 'variable') {\r\n      const name = await sourceDialog.openDialog();\r\n      if (!name) return;\r\n\r\n      handleScoreUpdate([...survey.score, [`id.${uuid()}.${name}`]]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box>\r\n        <Box>\r\n          <QuestionScoreList\r\n            survey={survey}\r\n            index={null}\r\n            scoreList={survey.score}\r\n            setSurvey={setSurvey}\r\n          />\r\n\r\n          <Chip\r\n            icon={<AddIcon />}\r\n            label={l`questionScoreVariableCreateButton`}\r\n            onClick={handleMenuClose('variable')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n            style={{ marginRight: 8 }}\r\n          />\r\n\r\n          <Chip\r\n            icon={<DonutLargeIcon />}\r\n            label=\"Modify User Meters\"\r\n            onClick={handleMenuClose('meter')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <QuestionScoreCreateDialog survey={survey} />\r\n    </>\r\n  );\r\n};\r\n","/**\n * @file The primary view for the survey editor. Handles modification of the basic survey data, and lists all the questions.\n * @author Tuomas Pyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Grid from '@material-ui/core/Grid';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport SubjectIcon from '@material-ui/icons/Subject';\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport uuid from 'uuid/v4';\nimport { openDialog } from '../components/ConfirmationDialog';\nimport { HelpBox } from '../components/HelpBox';\nimport Locale from '../components/Locale';\nimport TextField from '../components/CachedInput';\nimport { Question } from '../components/question/Question';\nimport Translation from '../components/question/questionLocale.json';\nimport QuestionScoreDialog from '../components/question/QuestionScoreDialog';\nimport QuestionScoreInputDialog from '../components/question/QuestionScoreInputDialog';\nimport { handleSurveyQuestionCreate } from '../components/question/QuestionUtil';\nimport { SurveyScoreTable } from '../components/question/SurveyScoreTable';\nimport { SurveyScore } from '../components/question/SurveyScore';\n\nconst l = Locale(Translation);\n\nlet data = {\n  title: '',\n  description: '',\n  intro: '',\n  questions: [],\n  score: []\n};\n\nconst enabledQuestionTypes = {\n  selectOne: <RadioButtonCheckedIcon fontSize=\"small\" />,\n  text: <SubjectIcon fontSize=\"small\" />\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: 64\n  },\n  title: {\n    width: '100%',\n    marginLeft: 16,\n    marginBottom: theme.spacing(1),\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  subtitle: {\n    marginLeft: 16,\n    marginBottom: theme.spacing(4)\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  list: {\n    width: '100%'\n  },\n  fab: {\n    margin: theme.spacing(1)\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  },\n  input: {\n    width: '100%'\n  },\n  section: {\n    marginBottom: 48\n  },\n  sectionTitle: {\n    marginLeft: 16,\n    marginBottom: 10\n  },\n  sectionSubtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(1.5)\n  },\n  sectionPaper: {\n    padding: '0 16px 16px 16px'\n  },\n  sectionPaperScore: {\n    padding: theme.spacing(3)\n  },\n  questionButton: {\n    marginTop: theme.spacing(2)\n  },\n  developmentButton: {\n    marginBottom: theme.spacing(2),\n    marginRight: theme.spacing(2)\n  },\n  scoreHeader: {\n    maxWidth: 'calc(100% - 70px)'\n  },\n  scoreTitle: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  scoreHelpBox: {\n    marginTop: 0,\n    marginBottom: theme.spacing(3)\n  }\n}));\n\nexport const SurveyEdit = ({ match, history }) => {\n  const { id } = match.params;\n\n  const classes = useStyles();\n\n  const [survey, setSurvey] = React.useState({ ...data, id });\n  const [expanded, setExpanded] = React.useState([]);\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\n  const [presetMenuAnchorEl, setPresetMenuAnchorEl] = React.useState(null);\n\n  React.useEffect(() => {\n    if (!id) return;\n\n    const surveyData = JSON.parse(\n      localStorage.getItem(`survey.${id}`) || 'null'\n    );\n    if (surveyData) {\n      setSurvey(surveyData);\n    }\n  }, [id]);\n\n  // Redirect to new survey ID if none is provided\n  if (!id) {\n    return <Redirect to={`/survey/${uuid()}`} />;\n  }\n\n  const handleChange = panel => (event, isExpanded) => {\n    let expandedCache = [...expanded];\n    if (expandedCache.includes(panel)) {\n      if (!isExpanded) {\n        expandedCache.splice(expandedCache.indexOf(expandedCache), 1);\n      }\n    } else {\n      if (isExpanded) {\n        expandedCache.push(panel);\n      }\n    }\n\n    setExpanded([...expandedCache]);\n  };\n\n  const handleTitleUpdate = title => {\n    setSurvey({ ...survey, title });\n  };\n\n  const handleDescriptionUpdate = description => {\n    setSurvey({ ...survey, description });\n  };\n\n  const handleIntroUpdate = intro => {\n    setSurvey({ ...survey, intro });\n  };\n\n  const handleQuestionCreate = event => {\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleQuestionTypeClose = type => () => {\n    setMenuAnchorEl(null);\n\n    if (type) {\n      setSurvey(handleSurveyQuestionCreate(survey, type));\n    }\n  };\n\n  const handlePresetSave = () => {\n    localStorage.setItem(`survey.${id}`, JSON.stringify(survey));\n  };\n\n  const handlePresetClear = async () => {\n    const action = await openDialog({\n      description:\n        'This will remove the current survey from the local database. You can still continue to edit it and save it untill the window is refreshed.'\n    });\n\n    if (action === 'confirm') {\n      localStorage.removeItem(`survey.${id}`);\n    }\n  };\n\n  const handlePresetClearAll = async () => {\n    const action = await openDialog({\n      description:\n        'This will remove ALL survey presets from the local database! This action cannot be undone. Are you absolutely sure?'\n    });\n\n    if (action === 'confirm') {\n      for (const item in localStorage) {\n        if (item && item.includes('survey.')) {\n          localStorage.removeItem(item);\n        }\n      }\n    }\n  };\n\n  const handlePresetMenuOpen = event => {\n    setPresetMenuAnchorEl(event.currentTarget);\n  };\n\n  const handlePresetMenuClose = surveyId => () => {\n    setPresetMenuAnchorEl(null);\n\n    if (surveyId) {\n      // Load saved survey from local storage\n      history.push(`/survey/${surveyId}`);\n    }\n  };\n\n  const surveyPresets = [];\n  for (const item in localStorage) {\n    if (item && item.includes('survey.')) {\n      const survey = JSON.parse(localStorage.getItem(item) || 'null');\n      if (!survey) continue;\n      surveyPresets.push({\n        id: survey.id,\n        title: survey.title\n      });\n    }\n  }\n\n  const isFirstQuestion = !survey.questions.length;\n\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={0}>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h3\" className={classes.title}>\n            {survey.title ? survey.title : l`infoText`}\n          </Typography>\n          <Typography\n            variant=\"subtitle1\"\n            color=\"textSecondary\"\n            className={classes.subtitle}\n          >\n            {survey.questions.length} {l`infoQuestions`}  {l`infoStateDraft`}\n          </Typography>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              {l('detailsText')}\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <TextField\n                className={classes.input}\n                label={l('detailsTitleLabel')}\n                margin=\"normal\"\n                variant=\"outlined\"\n                value={survey.title}\n                onChange={handleTitleUpdate}\n              />\n              <TextField\n                className={classes.input}\n                label={l('detailsDescriptionLabel')}\n                multiline\n                rows=\"4\"\n                margin=\"normal\"\n                variant=\"outlined\"\n                helperText={l('detailsDescriptionInfo')}\n                value={survey.description}\n                onChange={handleDescriptionUpdate}\n              />\n            </Paper>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              {l('introText')}\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <TextField\n                className={classes.input}\n                label={l('introTextLabel')}\n                multiline\n                rows=\"4\"\n                margin=\"normal\"\n                variant=\"outlined\"\n                helperText={l('introTextInfo')}\n                value={survey.intro}\n                onChange={handleIntroUpdate}\n              />\n            </Paper>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              {l('questionsText')}\n            </Typography>\n\n            <Box>\n              {survey.questions.map((x, i) => (\n                <Question\n                  key={x.id}\n                  index={i}\n                  survey={survey}\n                  question={x}\n                  setSurvey={setSurvey}\n                  expanded={expanded.includes(i)}\n                  handleExpandChange={handleChange}\n                />\n              ))}\n\n              <Box\n                style={{\n                  display: 'flex',\n                  flexDirection: isFirstQuestion ? 'row' : 'row-reverse'\n                }}\n              >\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className={classes.questionButton}\n                  startIcon={<AddIcon />}\n                  size=\"large\"\n                  onClick={handleQuestionCreate}\n                >\n                  {isFirstQuestion\n                    ? l`questionCreateButtonFirst`\n                    : l`questionCreateButton`}\n                </Button>\n              </Box>\n            </Box>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Scoring & Grading\n            </Typography>\n\n            <Box>\n              <ExpansionPanel\n                expanded={expanded.includes('definedScores')}\n                onChange={handleChange('definedScores')}\n              >\n                <ExpansionPanelSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls=\"panel1bh-content\"\n                  id=\"panel1bh-header\"\n                >\n                  <Box className={classes.scoreHeader}>\n                    <Typography\n                      variant=\"h6\"\n                      display=\"block\"\n                      className={classes.scoreTitle}\n                    >\n                      Defined Scores\n                    </Typography>\n                    <Typography variant=\"caption\" display=\"block\">\n                      See all defined scores from all questions in this survey\n                    </Typography>\n                  </Box>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Box>\n                    <HelpBox className={classes.scoreHelpBox}>\n                      The values from scores with the \"Saved\" checkbox ticked\n                      will be saved to the system after a user completes this\n                      survey. All other values will be lost. The unsaved score\n                      values, however, can still be used while calculating other\n                      score values.\n                    </HelpBox>\n                    <SurveyScoreTable survey={survey} />\n                  </Box>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n              <ExpansionPanel\n                expanded={expanded.includes('customScores')}\n                onChange={handleChange('customScores')}\n              >\n                <ExpansionPanelSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls=\"panel1bh-content\"\n                  id=\"panel1bh-header\"\n                >\n                  <Box className={classes.scoreHeader}>\n                    <Typography\n                      variant=\"h6\"\n                      display=\"block\"\n                      className={classes.scoreTitle}\n                    >\n                      Custom Scores\n                    </Typography>\n                    <Typography variant=\"caption\" display=\"block\">\n                      Combine scores from questions into new custom scores with\n                      logical and mathematical statements.\n                    </Typography>\n                  </Box>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <SurveyScore survey={survey} setSurvey={setSurvey} />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Box>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Development\n            </Typography>\n\n            <Paper className={classes.sectionPaperScore}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.developmentButton}\n                onClick={handlePresetSave}\n              >\n                Save to presets\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.developmentButton}\n                onClick={handlePresetMenuOpen}\n              >\n                Load from presets\n              </Button>\n              <br />\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                className={classes.developmentButton}\n                onClick={handlePresetClear}\n              >\n                Discard this survey\n              </Button>\n              <br />\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                className={classes.developmentButton}\n                onClick={handlePresetClearAll}\n              >\n                Clear survey presets\n              </Button>\n            </Paper>\n          </Box>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}></Grid>\n      </Grid>\n\n      <QuestionScoreInputDialog survey={survey} />\n      <QuestionScoreDialog survey={survey} />\n\n      <Menu\n        id=\"question-type-menu\"\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleQuestionTypeClose(null)}\n      >\n        {Object.keys(enabledQuestionTypes).map(x => (\n          <MenuItem onClick={handleQuestionTypeClose(x)} key={x}>\n            <ListItemIcon>{enabledQuestionTypes[x]}</ListItemIcon>\n            <Typography variant=\"inherit\">{l`questionsType`[x]}</Typography>\n          </MenuItem>\n        ))}\n      </Menu>\n\n      <Menu\n        id=\"question-preset-menu\"\n        anchorEl={presetMenuAnchorEl}\n        keepMounted\n        open={Boolean(presetMenuAnchorEl)}\n        onClose={handlePresetMenuClose(null)}\n      >\n        {surveyPresets.map(x => (\n          <MenuItem onClick={handlePresetMenuClose(x.id)} key={x}>\n            <ListItemText\n              primary={x.title || 'Untitled Survey'}\n              secondary={x.id}\n            />\n          </MenuItem>\n        ))}\n      </Menu>\n    </div>\n  );\n};\n","/**\n * @file Redirects user's from login and register pages if already logged in\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nimport { AuthContext } from './auth';\n\nfunction AuthRoute({ component: Component, ...rest }) {\n  const { user } = useContext(AuthContext);\n  function handleRedirect() {\n    const type = user.type;\n    switch (type) {\n      case 'S':\n        return <Redirect to=\"/specialist\" />;\n      case 'O':\n        return <Redirect to=\"/organization\" />;\n      default:\n        return <Redirect to=\"/\" />;\n    }\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={props => (user ? handleRedirect() : <Component {...props} />)}\n    />\n  );\n}\n\nexport default AuthRoute;\n","/**\n * @file The Home view page\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles(theme => ({\n  page: {\n    display: 'flex',\n    height: 'calc(100vh - 64px)',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  button: {\n    margin: theme.spacing(1),\n    width: 300\n  }\n}));\n\nfunction Home() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.page}>\n      <Link to=\"/organization\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          className={classes.button}\n          startIcon={<AssignmentIcon />}\n        >\n          Organization Editor\n        </Button>\n      </Link>\n      <Link to=\"/survey\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          className={classes.button}\n          startIcon={<AssignmentIndIcon />}\n        >\n          Survey Editor\n        </Button>\n      </Link>\n    </div>\n  );\n}\n\nexport default Home;\n","/**\n * @file The Login view page\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { useContext, useState } from 'react';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport TextField from '../components/CachedInput';\nimport Locale from '../components/Locale';\nimport Translation from '../components/question/questionLocale.json';\nimport { AuthContext } from '../context/auth';\n\nconst l = Locale(Translation);\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  section: {\n    marginBottom: 15,\n    width: 500\n  },\n  sectionTitle: {\n    margin: 15\n  },\n  sectionPaper: {\n    padding: '0 16px 16px 16px'\n  },\n  input: {\n    width: '100%'\n  },\n  button: {\n    width: '100%',\n    marginTop: theme.spacing(2)\n  }\n}));\n\nfunction Login(props) {\n  const classes = useStyles();\n  const context = useContext(AuthContext);\n\n  let inputs = {\n    username: '',\n    password: ''\n  };\n  const [values, setValues] = useState({ ...inputs });\n  const [errors, setErrors] = useState({});\n\n  const onChange = input => value => {\n    switch (input) {\n      case 'username':\n        return setValues({ ...values, username: value });\n      case 'password':\n        return setValues({ ...values, password: value });\n      default:\n        return values;\n    }\n  };\n\n  const [loginUser] = useMutation(LOGIN_USER, {\n    update(proxy, result) {\n      // Parse the result to the app context\n      context.login(result.data.login);\n      // redirect user to home page based on user's type\n      const category = result.data.login.type;\n      switch (category) {\n        case 'S':\n          return props.history.push('/specialist');\n        case 'O':\n          return props.history.push('/organization');\n        default:\n          return props.history.push('/');\n      }\n    },\n    onError(err) {\n      setErrors(err.graphQLErrors[0].extensions.exception.errors);\n    },\n    variables: values\n  });\n\n  const onSubmit = event => {\n    event.preventDefault();\n    loginUser();\n  };\n\n  return (\n    <div>\n      <Grid container justify=\"center\" spacing={2}>\n        <Grid item>\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Login\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <form\n                className={classes.container}\n                onSubmit={onSubmit}\n                noValidate\n                autoComplete=\"off\"\n              >\n                <TextField\n                  className={classes.input}\n                  label=\"Username\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"text\"\n                  error={errors.username ? true : false}\n                  value={values.username}\n                  onChange={onChange('username')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Password\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"password\"\n                  error={errors.password ? true : false}\n                  value={values.password}\n                  onChange={onChange('password')}\n                />\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\"\n                  type=\"submit\"\n                >\n                  Login\n                </Button>\n              </form>\n              {Object.keys(errors).length > 0 && (\n                <div>\n                  <ul>\n                    {Object.values(errors).map(value => (\n                      <li key={value}>{value}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </Paper>\n          </Box>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nconst LOGIN_USER = gql`\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      type\n      username\n      email\n      createdAt\n      token\n    }\n  }\n`;\nexport default Login;\n","/**\n * @file The registration view page\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { useContext, useState } from 'react';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '../components/CachedInput';\nimport Button from '@material-ui/core/Button';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { AuthContext } from '../context/auth';\nimport Locale from '../components/Locale';\nimport Translation from '../components/question/questionLocale.json';\n\nconst l = Locale(Translation);\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  input: {\n    width: '100%'\n  },\n  button: {\n    width: '100%',\n    marginTop: theme.spacing(2)\n  },\n  section: {\n    marginBottom: 15,\n    width: 500\n  },\n  sectionTitle: {\n    margin: 15\n  },\n  sectionPaper: {\n    padding: '0 16px 16px 16px'\n  }\n}));\n\nfunction Register(props) {\n  const classes = useStyles();\n  const context = useContext(AuthContext);\n  // registration variables\n  let inputs = {\n    type: '',\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  };\n\n  const [values, setValues] = useState({ ...inputs });\n  const [errors, setErrors] = useState({});\n\n  const onChange = input => value => {\n    switch (input) {\n      case 'U':\n        return setValues({ ...values, type: 'U' });\n      case 'S':\n        return setValues({ ...values, type: 'S' });\n      case 'O':\n        return setValues({ ...values, type: 'O' });\n      case 'username':\n        return setValues({ ...values, username: value });\n      case 'email':\n        return setValues({ ...values, email: value });\n      case 'password':\n        return setValues({ ...values, password: value });\n      case 'confirmPassword':\n        return setValues({ ...values, confirmPassword: value });\n      default:\n        return values;\n    }\n  };\n\n  const [addUser] = useMutation(REGISTER_USER, {\n    update(proxy, result) {\n      context.login(result.data.register);\n      const category = result.data.register.type;\n      switch (category) {\n        case 'S':\n          return props.history.push('/specialist');\n        case 'O':\n          return props.history.push('/organization');\n        default:\n          return props.history.push('/');\n      }\n    },\n    onError(err) {\n      setErrors(err.graphQLErrors[0].extensions.exception.errors);\n    },\n    variables: values\n  });\n\n  const onSubmit = event => {\n    event.preventDefault();\n    addUser();\n  };\n\n  return (\n    <div>\n      <Grid container justify=\"center\" spacing={2}>\n        <Grid item>\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Registration\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <form\n                className={classes.container}\n                onSubmit={onSubmit}\n                noValidate\n                autoComplete=\"off\"\n              >\n                <br />\n                <FormControl component=\"fieldset\">\n                  <FormLabel component=\"legend\">Select User Group</FormLabel>\n                  <RadioGroup aria-label=\"position\" name=\"type\">\n                    <FormControlLabel\n                      value=\"U\"\n                      control={<Radio color=\"primary\" />}\n                      label=\"User Registration\"\n                      labelPlacement=\"end\"\n                      onChange={onChange('U')}\n                    />\n                    <FormControlLabel\n                      value=\"S\"\n                      control={<Radio color=\"primary\" />}\n                      label=\"Specialist Registration\"\n                      labelPlacement=\"end\"\n                      onChange={onChange('S')}\n                    />\n                    <FormControlLabel\n                      value=\"O\"\n                      control={<Radio color=\"primary\" />}\n                      label=\"Organization Registration\"\n                      labelPlacement=\"end\"\n                      onChange={onChange('O')}\n                    />\n                  </RadioGroup>\n                </FormControl>\n                <TextField\n                  className={classes.input}\n                  label=\"Username\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"text\"\n                  error={errors.username ? true : false}\n                  value={values.username}\n                  onChange={onChange('username')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Email\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"email\"\n                  error={errors.email ? true : false}\n                  value={values.email}\n                  onChange={onChange('email')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Password\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"password\"\n                  error={errors.password ? true : false}\n                  value={values.password}\n                  onChange={onChange('password')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Confirm Password\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"password\"\n                  error={errors.confirmPassword ? true : false}\n                  value={values.confirmPassword}\n                  onChange={onChange('confirmPassword')}\n                />\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\"\n                  type=\"submit\"\n                >\n                  Submit\n                </Button>\n              </form>\n              {Object.keys(errors).length > 0 && (\n                <div>\n                  <ul>\n                    {Object.values(errors).map(value => (\n                      <li key={value}>{value}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </Paper>\n          </Box>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nconst REGISTER_USER = gql`\n  mutation register(\n    $type: String!\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      registerInput: {\n        type: $type\n        username: $username\n        email: $email\n        password: $password\n        confirmPassword: $confirmPassword\n      }\n    ) {\n      type\n      username\n      email\n      createdAt\n      token\n    }\n  }\n`;\n\nexport default Register;\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport { Header } from './components/Header';\nimport { SpecialistDashboard } from './views/SpecialistDashboard';\nimport { OrganizationPanel } from './views/OrganizationPanel';\nimport { SurveyEdit } from './views/SurveyEdit';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/core/styles';\n\nimport { AuthProvider } from './context/auth';\nimport AuthRoute from './context/AuthRoute';\nimport ConfirmationDialog from './components/ConfirmationDialog';\nimport { Home, Login, Register } from './views';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#5A5C9C'\n    }\n  }\n});\n\nconst App = () => (\n  <AuthProvider>\n    <ThemeProvider theme={theme}>\n      <Router>\n        <div style={{ backgroundColor: '#EEE' }}>\n          <Header />\n\n          <Switch>\n            <AuthRoute exact path=\"/\" component={Home} />\n            <AuthRoute exact path=\"/login\" component={Login} />\n            <AuthRoute exact path=\"/register\" component={Register} />\n            <Route path=\"/test\">\n              <div>This is a test page.</div>\n            </Route>\n            <Route path=\"/survey/:id\" component={SurveyEdit} />\n            <Route path=\"/survey\" component={SurveyEdit} />\n            <Route path=\"/specialist\">\n              <SpecialistDashboard />\n            </Route>\n            <Route path=\"/organization\">\n              <OrganizationPanel />\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n\n      <ConfirmationDialog />\n    </ThemeProvider>\n  </AuthProvider>\n);\n\nexport default App;\n","import React from 'react';\nimport App from './App';\nimport ApolloClient from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { createHttpLink } from 'apollo-link-http';\nimport { ApolloProvider } from '@apollo/react-hooks';\n\nconst httpLink = createHttpLink({\n    uri: 'http://localhost:4000'\n});\n\nconst client = new ApolloClient({\n    link: httpLink,\n    cache: new InMemoryCache()\n});\n\nexport default (\n    <ApolloProvider client = { client }>\n        <App />\n    </ApolloProvider>\n)","import ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport ApolloProvider from './ApolloProvider';\n\nimport 'typeface-roboto';\n\nif (!localStorage.getItem('lang')) {\n  localStorage.setItem('lang', 'en');\n}\n\nReactDOM.render(ApolloProvider, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}