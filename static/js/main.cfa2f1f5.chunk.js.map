{"version":3,"sources":["img/Image.png","serviceWorker.js","context/auth.js","components/Locale.js","components/ConfirmationDialog.js","components/Header.js","views/SpecialistDashboard.js","components/organization/styles.js","components/organization/Keywords.js","components/CachedInput.js","components/organization/StyledExpansionPanelSummary.js","components/organization/Contact.js","components/organization/EmptySection.js","components/organization/Contacts.js","components/organization/Feed.js","components/organization/Feeds.js","components/organization/Location.js","components/organization/Locations.js","components/organization/GenderCriteria.js","components/organization/AgeCriteria.js","components/organization/Service.js","components/organization/Services.js","components/organization/Targets.js","views/OrganizationPanel.js","components/HelpBox.js","components/question/type/QuestionChooseMultiple.js","components/question/QuestionOptionDefaults.js","components/question/QuestionUtil.js","components/question/QuestionOptionRoute.js","components/question/type/QuestionChooseOne.js","components/question/QuestionRouteTable.js","components/question/Score.js","components/question/QuestionScoreInputDialog.js","components/question/QuestionScoreDialog.js","components/question/QuestionScoreList.js","components/question/QuestionScoreCreateDialog.js","components/question/QuestionScore.js","components/question/type/QuestionText.js","components/question/QuestionDetails.js","components/question/Question.js","components/question/SurveyScoreTable.js","components/question/SurveyScore.js","views/SurveyEdit.js","context/AuthRoute.js","views/Home.js","views/Login.js","views/Register.js","App.js","ApolloProvider.js","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","initialState","user","localStorage","getItem","decodedToken","jwtDecode","exp","Date","now","removeItem","AuthContext","createContext","login","userData","logout","authReducer","state","action","type","payload","AuthProvider","props","useReducer","dispatch","Provider","value","setItem","token","dataset","language","option","section","hasOwnProperty","text","l","Locale","Translation","setOpenState","setContentState","resolveDialog","data","title","description","openDialog","Promise","resolve","ConfirmationDialog","React","useState","open","setOpen","content","setContent","handleClose","closeDialog","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","color","variant","autoFocus","useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","display","breakpoints","up","sectionDesktop","sectionMobile","Header","useContext","classes","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","isMobileMenuOpen","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","handleLanguageChange","a","lang","reload","languageIcon","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","renderMobileMenu","IconButton","aria-label","src","alt","width","height","to","style","textDecoration","Badge","badgeContent","aria-controls","aria-haspopup","AppBar","position","Toolbar","edge","Typography","className","noWrap","ongoing","date","root","padding","paper","textAlign","palette","secondary","header","justifyContent","list","fab","margin","extendedIcon","SpecialistDashboard","Grid","container","direction","item","xs","gutterBottom","Fab","md","sm","List","map","x","ListItem","ListItemText","primary","ListItemSecondaryAction","styles","marginBottom","flexDirection","sectionTitleContainer","alignItems","sectionTitle","fontSize","fontWeight","marginLeft","expansionPanelContainer","expansionPanel","outerContainerPadding","expansionPanelPaddingReset","summaryWrapper","detailsWrapper","formControl","buttonAdd","alignSelf","hide","textCapitalizedSmall","letterSpacing","lineHeight","textTransform","textEmphasis","removeIconButton","unsavedChangesIcon","background","borderRadius","expansionPanelRemoveActionContainer","feedInnerContent","paddingTop","removeIconButton2","right","bottom","smallSpacingLeft","editSectionButton","infoTooltip","helpIcon","sectionButtonsContainer","iconButtonAdd","minWidth","saveBtnContainer","wrapper","summary","selectEmpty","marginTop","selectFormCtrl","chip","addKeywordWrapper","textField","headerBox","changed","globalClasses","globalStyles","editable","setEditable","keywords","setKeywords","useEffect","storedKeywords","JSON","parse","setText","handleAddKeyword","e","Box","Card","CardContent","word","Chip","key","index","label","FormControl","TextField","placeholder","onKeyDown","keyCode","onChange","target","InputProps","startAdornment","InputAdornment","onDelete","chipToDelete","newKeywords","chipIndex","findIndex","splice","stringify","cache","setCache","onBlur","select","StyledExpansionPanelSummary","withStyles","overflow","textOverflow","ExpansionPanelSummary","textInternalMsg","grid1","name","phone","email","internalMsg","handleOpen","handleEdit","handleRemove","icon","handleConfirmationDialog","ExpansionPanel","expanded","isExpanded","expandIcon","ExpansionPanelDetails","multiline","rows","defaultValue","Tooltip","size","contacts","setContacts","storedContacts","isOpen","newContacts","newLocations","hasData","length","EmptySection","contact","Contact","lastIndex","internal_msg","identifierAddWrapper","editableContainer","chipContainer","username","hashtags","hashtag","setHashtag","handleIdentifierRemove","setIcon","push","identifier","enabledFeeds","instagram","facebook","twitter","feeds","setFeeds","storedFeeds","newFeeds","handleAdd","feedSelectMenuAnchorEl","setFeedSelectMenuAnchorEl","handleCloseFeedSelectMenu","console","log","feed","Feed","Object","keys","ListItemIcon","city","country","address","postalCode","InputLabel","Select","labelid","countries","code","cities","i","locations","setLocations","storedLocations","handleLocationEdit","handleLocationRemove","Location","handleGenderChange","RadioGroup","FormControlLabel","control","Radio","handleAgeChange","Slider","valueLabelDisplay","criterias","openService","requirements","openState","criteriaMenuAnchorEl","setCriteriaMenuAnchorEl","setGenderValue","isMale","requirementsCache","genderIndex","setAgeValues","min","max","ageIndex","newValue","setKelaValue","isRequired","kelaIndex","handleCloseAddCriteriaMenu","isFirstRequirement","checked","Switch","GenderCriteria","AgeCriteria","ageValue","Checkbox","startIcon","age","gender","kelaRehabilitee","services","setServices","storedServices","newServices","service","Service","targetBox","targets","setTargets","chipData","storedTargets","handleChipRemove","availableTargets","includes","top","left","profileImage","grid","maxWidth","topSection","bottomSection","sectionWrapper","OrganizationPanel","DefaultImage","Services","Locations","Contacts","Targets","Keywords","Feeds","infoSection","infoIcon","fill","main","HelpBox","children","options","optionInput","flex","optionButton","QuestionChooseMultiple","defaults","selectOne","one","uuid","score","route","isOther","many","selectMultiple","getDefaultRoute","questionList","questionIndex","question","defaultRoute","find","generateEmptyQuestion","OptionDefaults","handleSurveyQuestionUpdate","survey","surveyUpdate","questions","handleSurveyOptionUpdate","optionIndex","questionUpdate","handleSurveyOptionRemove","optionInputMenu","optionInputMenuItem","whiteSpace","optionIconLabel","optionIconLabelIcon","QuestionOptionRoute","helperText","defaultNextQuestionNumber","getDefaultRouteNumber","possibleRoutes","filter","InputLabelProps","shrink","SelectProps","MenuProps","badge","backgroundColor","dialog","border","divider","optionContainer","optionMain","optionAdvanced","optionSecondary","optionInputSecondary","optionInputScore","optionMove","borderLeft","optionRemove","subtitle","QuestionChooseOne","setSurvey","handleOtherUpdate","handleScoreUpdate","handleRouteUpdate","handleOptionReorder","b","optionCache","handleSurveyOptionReorder","handleOptionRemove","placement","handleSurveyOptionCreate","routeSection","table","tableLayout","routeCell","routeIconCell","routeIconCellIcon","QuestionRouteTable","incomingRoutes","routeList","q","unshift","listIncomingRoutes","outgoingRoutes","y","listOutgoingRoutes","Table","TableHead","TableRow","TableCell","TableBody","component","scope","SCORE_TYPE","OPERATOR_TYPE","ADD","SUBTRACT","MULTIPLY","DIVIDE","OPERATOR_SIGN","COMPARATOR_TYPE","GREATER_THAN","LESS_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN_OR_EQUAL","EQUAL","AND","OR","COMPARATOR_SIGN","parseScore","parsedScore","steps","row","parts","split","join","from","sign","step","compare","createValue","createOperator","createComparator","currentSourceId","currentQuestionId","setSectionState","setSourceState","setValueState","isFirst","maxHeight","listSection","ul","nested","paddingLeft","sectionInput","questionId","first","QuestionScoreInputDialog","openList","setOpenList","selectedSection","setSelectedSection","selectedSource","setSelectedSource","setValue","isConfirmEnabled","toggleListOpen","indexOf","handleRadioButtonToggle","handleQuestionSourceSelect","fullWidth","fullHeight","opacity","subheader","button","disableTypography","Collapse","in","timeout","unmountOnExit","disablePadding","role","undefined","tabIndex","disableRipple","inputProps","Number","autoComplete","autocompletetype","disabled","mathIconList","addition","mdiPlusBox","subtraction","mdiMinusBox","multiplication","mdiCloseBox","division","mdiDivisionBox","comparatorIconList","1","mdiCodeGreaterThan","2","mdiCodeLessThan","3","mdiCodeGreaterThanOrEqual","4","mdiCodeLessThanOrEqual","5","mdiEqualBox","6","mdiCircle","7","mdiCircleOutline","currentScoreId","menuEditIndex","menuEditReplace","mdi","buttonItem","paddingBottom","helperArrow","if","scoreStep","QuestionScoreDialog","input","setInput","useTheme","menuAnchorEl","setMenuAnchorEl","comparatorMenuAnchorEl","setComparatorMenuAnchorEl","mathOperatorTexts","comparatorTexts","depthLevel","lastStep","handleMenuClick","replace","inputCache","inputDialog","inputCombiner","inputValue","handleComparatorMenuClick","handleComparatorMenuClose","inputComparator","handleAddSourceClick","insertValue","renderInlineButtons","depthStyle","comparator","path","mdiCalculatorVariant","depthColor","Math","isInsideIfCondition","isInsideIfOutput","isLastInsideIfCondition","isLastInsideIfOutput","isPermanent","mdiCalculator","zIndex","values","QuestionScoreList","scoreList","handleValueUpdate","p","dataCache","line","scoreStepList","labelParts","actualStepCount","hasBadge","hasContent","isDefault","currentQuestion","answerList","Set","slice","createAnswerScoreName","setInputState","QuestionScoreCreateDialog","setName","QuestionScore","sourceDialog","optionTitle","QuestionText","questionTypes","allowAmpty","box","menu","details","routeSectionInput","inputMenu","inputMenuItem","QuestionDetails","panel","statusIconContainer","statusIcon","number","boxShadow","Question","handleExpandChange","contentRef","useRef","checkScoreStatus","checkRouteStatus","ref","current","offsetHeight","SurveyScoreTable","source","isAnswerScore","flat","align","defaultChecked","SurveyScore","intro","enabledQuestionTypes","sectionSubtitle","sectionPaper","sectionPaperScore","questionButton","developmentButton","scoreHeader","scoreTitle","scoreHelpBox","SurveyEdit","history","params","setExpanded","presetMenuAnchorEl","setPresetMenuAnchorEl","surveyData","handleChange","expandedCache","handleQuestionTypeClose","handleSurveyQuestionCreate","handlePresetClear","handlePresetClearAll","handlePresetMenuClose","surveyId","surveyPresets","isFirstQuestion","Paper","AuthRoute","Component","rest","render","handleRedirect","page","Home","LOGIN_USER","gql","Login","context","password","setValues","errors","setErrors","useMutation","update","proxy","result","onError","err","graphQLErrors","extensions","exception","variables","loginUser","justify","onSubmit","preventDefault","noValidate","error","REGISTER_USER","Register","confirmPassword","register","addUser","FormLabel","labelPlacement","createMuiTheme","App","ThemeProvider","exact","httpLink","createHttpLink","uri","client","ApolloClient","link","InMemoryCache","ReactDOM","ApolloProvider","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.cfa2f1f5.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/**\n * @file The file holds user data at different states of authentication.\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { createContext, useReducer } from 'react';\nimport jwtDecode from 'jwt-decode';\n\nconst initialState = {\n  user: null\n};\n\n// Check local storage for authentication token\nif (localStorage.getItem('jwtToken')) {\n  const decodedToken = jwtDecode(localStorage.getItem('jwtToken'));\n\n  if (decodedToken.exp * 1000 < Date.now()) {\n    localStorage.removeItem('jwtToken');\n  } else {\n    initialState.user = decodedToken;\n  }\n}\n\nconst AuthContext = createContext({\n  user: null,\n  login: userData => {},\n  logout: () => {}\n});\n\nfunction authReducer(state, action) {\n  switch (action.type) {\n    case 'LOGIN':\n      return {\n        ...state,\n        user: action.payload\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        user: null\n      };\n    default:\n      return state;\n  }\n}\n\nfunction AuthProvider(props) {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  function login(userData) {\n    localStorage.setItem('jwtToken', userData.token);\n    dispatch({\n      type: 'LOGIN',\n      payload: userData\n    });\n  }\n\n  function logout() {\n    localStorage.removeItem('jwtToken');\n    dispatch({ type: 'LOGOUT' });\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{ user: state.user, login, logout }}\n      {...props}\n    />\n  );\n}\n\nexport { AuthContext, AuthProvider };\n","/**\n * @file A tiny but handy translation library that uses JSON files to translate between different languages.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nexport default (dataset, language = null) => option => {\n  if (!language) language = localStorage.getItem('lang') || 'en';\n\n  let section = dataset[option];\n  if (!section) return 'Unknown';\n\n  if (typeof section === 'string' && dataset.hasOwnProperty(section)) {\n    section = dataset[section];\n  }\n\n  let text = 'Unknown';\n  if (section.hasOwnProperty(language)) {\n    text = section[language];\n  } else if (section.hasOwnProperty('en')) {\n    text = section['en'];\n  }\n\n  return text;\n};\n","/**\r\n * @file Generic confirmation dialog that can be called from anywhere and uses promises for response handling.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport Translation from './question/questionLocale.json';\r\nimport Locale from './Locale';\r\n\r\nconst l = Locale(Translation);\r\n\r\nlet setOpenState = null;\r\nlet setContentState = null;\r\nlet resolveDialog = null;\r\nlet data = { title: 'Unknown', description: 'An error occurred.' };\r\n\r\nconst closeDialog = action => {\r\n  setOpenState(false);\r\n  if (resolveDialog) {\r\n    resolveDialog(action);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = ({ title = l`dialogTitleDefault`, description }) =>\r\n  new Promise(resolve => {\r\n    data = { title, description };\r\n    setContentState(data);\r\n    resolveDialog = resolve;\r\n    setOpenState(true);\r\n  });\r\n\r\nconst ConfirmationDialog = () => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [content, setContent] = React.useState(data);\r\n\r\n  setOpenState = setOpen;\r\n  setContentState = setContent;\r\n\r\n  const handleClose = action => () => {\r\n    closeDialog(action);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose('dismiss')}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{content.title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n          {content.description}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose('cancel')} color=\"primary\">\r\n          {l`dialogButtonCancel`}\r\n        </Button>\r\n        <Button\r\n          onClick={handleClose('confirm')}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          autoFocus\r\n        >\r\n          {l`dialogButtonConfirm`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ConfirmationDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\n * @file The placeholder header. Currently only has language change functionality.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Badge from '@material-ui/core/Badge';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { AuthContext } from '../context/auth';\nimport { openDialog } from './ConfirmationDialog';\n\nimport Translation from './headerLocale.json';\nimport Locale from './Locale';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex'\n    }\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none'\n    }\n  }\n}));\n\nexport const Header = () => {\n  const { logout } = useContext(AuthContext);\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n  const handleProfileMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = event => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const handleLanguageChange = async () => {\n    const action = await openDialog({\n      description: l`languageDialogConfirm`\n    });\n\n    if (action === 'confirm') {\n      let lang = 'en';\n      if ((localStorage.getItem('lang') || 'en') === 'en') lang = 'fi';\n\n      localStorage.setItem('lang', lang);\n\n      window.location.reload();\n    }\n  };\n\n  const language = localStorage.getItem('lang') || 'en';\n  let languageIcon = '/english.png';\n  if (language === 'fi') languageIcon = '/finnish.png';\n\n  const menuId = 'primary-search-account-menu';\n  const renderMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={menuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n    >\n      <MenuItem onClick={handleMenuClose}>{l`profileTitle`}</MenuItem>\n      <MenuItem onClick={logout}>{l`signOutTitle`}</MenuItem>\n    </Menu>\n  );\n\n  const mobileMenuId = 'primary-search-account-menu-mobile';\n  const renderMobileMenu = (\n    <Menu\n      anchorEl={mobileMoreAnchorEl}\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n      id={mobileMenuId}\n      keepMounted\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n      open={isMobileMenuOpen}\n      onClose={handleMobileMenuClose}\n    >\n      <MenuItem onClick={handleLanguageChange}>\n        <IconButton aria-label=\"language\" color=\"inherit\">\n          <img\n            src={languageIcon}\n            alt={l`languageName`}\n            width={24}\n            height={24}\n          />\n        </IconButton>\n        <p>{l`languageTitle`}</p>\n      </MenuItem>\n      <Link to=\"/test\" style={{ color: 'inherit', textDecoration: 'none' }}>\n        <MenuItem>\n          <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\n            <Badge badgeContent={11} color=\"secondary\">\n              <NotificationsIcon />\n            </Badge>\n          </IconButton>\n          <p>{l`notificationsTitle`}</p>\n        </MenuItem>\n      </Link>\n      <MenuItem onClick={handleProfileMenuOpen}>\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"primary-search-account-menu\"\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n        <p>{l`profileTitle`}</p>\n      </MenuItem>\n    </Menu>\n  );\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n\n          <Typography className={classes.title} variant=\"h6\" noWrap>\n            Peili\n          </Typography>\n\n          <div className={classes.grow} />\n          <div className={classes.sectionDesktop}>\n            <IconButton\n              aria-label=\"language\"\n              color=\"inherit\"\n              onClick={handleLanguageChange}\n            >\n              <img\n                src={languageIcon}\n                alt={l`languageName`}\n                width={24}\n                height={24}\n              />\n            </IconButton>\n\n            <Link to=\"/test\" style={{ color: 'inherit' }}>\n              <IconButton\n                aria-label=\"show 17 new notifications\"\n                color=\"inherit\"\n              >\n                <Badge badgeContent={17} color=\"secondary\">\n                  <NotificationsIcon />\n                </Badge>\n              </IconButton>\n            </Link>\n            <IconButton\n              edge=\"end\"\n              aria-label=\"account of current user\"\n              aria-controls={menuId}\n              aria-haspopup=\"true\"\n              onClick={handleProfileMenuOpen}\n              color=\"inherit\"\n            >\n              <AccountCircle />\n            </IconButton>\n          </div>\n          <div className={classes.sectionMobile}>\n            <IconButton\n              aria-label=\"show more\"\n              aria-controls={mobileMenuId}\n              aria-haspopup=\"true\"\n              onClick={handleMobileMenuOpen}\n              color=\"inherit\"\n            >\n              <MoreIcon />\n            </IconButton>\n          </div>\n        </Toolbar>\n      </AppBar>\n      {renderMobileMenu}\n      {renderMenu}\n    </>\n  );\n};\n","/**\n * @file A placeholder view for the specialists that lists all their surveys.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Fab from '@material-ui/core/Fab';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport React from 'react';\n\nconst data = {\n  ongoing: [\n    {\n      title: 'Test Survey #1',\n      date: '10.12.2020'\n    },\n    {\n      title: 'Test Survey #2',\n      date: '10.12.2020'\n    },\n    {\n      title: 'Test Survey #3',\n      date: '10.12.2020'\n    },\n    {\n      title: 'Test Survey #4',\n      date: '10.12.2020'\n    }\n  ]\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: 64\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  list: {\n    width: '100%'\n  },\n  fab: {\n    margin: theme.spacing(1)\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\nexport const SpecialistDashboard = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={3} direction=\"row-reverse\">\n        <Grid item xs={12} className={classes.header}>\n          <div>\n            <Typography variant=\"h3\">Survey Dashboard</Typography>\n            <Typography variant=\"subtitle1\" gutterBottom>\n              Create, Edit and Follow your surveys\n            </Typography>\n          </div>\n          <div>\n            <Fab\n              color=\"primary\"\n              variant=\"extended\"\n              aria-label=\"like\"\n              className={classes.fab}\n            >\n              <AddIcon className={classes.extendedIcon} />\n              Create Survey\n            </Fab>\n          </div>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h6\">Upcoming Surveys</Typography>\n          <List className={classes.list}>\n            {data.ongoing.map(x => (\n              <ListItem>\n                <ListItemText primary={x.title} secondary={x.date} />\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" aria-label=\"options\">\n                    <MoreIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h6\">Ongoing Surveys</Typography>\n          <List className={classes.list}>\n            {data.ongoing.map(x => (\n              <ListItem>\n                <ListItemText primary={x.title} secondary={x.date} />\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" aria-label=\"options\">\n                    <MoreIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h6\">Past Surveys</Typography>\n          <List className={classes.list}>\n            {data.ongoing.map(x => (\n              <ListItem>\n                <ListItemText primary={x.title} secondary={x.date} />\n                <ListItemSecondaryAction>\n                  <IconButton edge=\"end\" aria-label=\"options\">\n                    <MoreIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n","/**\n * @file Global styles\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport { makeStyles } from '@material-ui/styles';\n\nconst styles = makeStyles(theme => ({\n  section: {\n    marginBottom: '2rem',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  sectionTitleContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '0.5rem'\n  },\n  sectionTitle: {\n    fontSize: '1.125rem', // 18px\n    fontWeight: 600,\n    marginLeft: '1rem',\n    position: 'relative',\n    marginBottom: '0 !important'\n  },\n  expansionPanelContainer: {\n    marginBottom: '8px'\n  },\n  expansionPanel: {\n    padding: '1rem'\n  },\n  outerContainerPadding: {\n    padding: '1rem',\n    position: 'relative'\n  },\n  expansionPanelPaddingReset: {\n    padding: '0 !important',\n    margin: '0 !important'\n  },\n  summaryWrapper: {\n    flexDirection: 'column'\n  },\n  detailsWrapper: {\n    marginBottom: '20px'\n  },\n  formControl: {\n    width: '100%'\n  },\n  buttonAdd: {\n    width: 'fit-content',\n    alignSelf: 'flex-end'\n  },\n  hide: {\n    display: 'none'\n  },\n  textCapitalizedSmall: {\n    fontSize: '0.625rem', // 10px\n    fontWeight: 600,\n    letterSpacing: '1.5px',\n    lineHeight: 2,\n    textTransform: 'uppercase'\n  },\n  textEmphasis: {\n    fontWeight: 600,\n    fontSize: '1.25rem', // 20px\n    letterSpacing: '0.15px',\n    lineHeight: 1\n  },\n  removeIconButton: {\n    width: 'fit-content',\n    height: 'fit-content',\n    alignSelf: 'flex-end'\n  },\n  unsavedChangesIcon: {\n    width: '8px',\n    height: '8px',\n    background: 'red',\n    display: 'inline-block',\n    marginLeft: '0.5rem',\n    borderRadius: '100%'\n  },\n  expansionPanelRemoveActionContainer: {\n    display: 'flex',\n    alignSelf: 'flex-end',\n    justifyContent: 'flex-end'\n  },\n  feedInnerContent: {\n    padding: '0.5rem',\n    paddingTop: '1rem'\n  },\n  removeIconButton2: {\n    position: 'absolute',\n    right: '1rem',\n    bottom: '1rem'\n  },\n  smallSpacingLeft: {\n    marginLeft: '0.5rem'\n  },\n  editSectionButton: {\n    padding: '0.5rem'\n  },\n  infoTooltip: {\n    position: 'absolute',\n    right: '-1.5rem'\n  },\n  helpIcon: {\n    width: '1rem',\n    height: '1rem'\n  },\n  sectionButtonsContainer: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  iconButtonAdd: {\n    minWidth: '36px',\n    width: '36px',\n    height: '36px',\n    alignSelf: 'center',\n    marginLeft: '0.5rem',\n    borderRadius: '100%',\n    background: '#5A5C9C',\n    color: 'white'\n  },\n  saveBtnContainer: {\n    display: 'flex',\n    justifyContent: 'flex-end'\n  }\n}));\n\nexport default styles;\n","/**\n * @file Composition and functionality of adding custom keywords\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Grid,\n  IconButton,\n  InputAdornment,\n  FormControl,\n  TextField,\n  Typography\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EditIcon from '@material-ui/icons/Edit';\nimport AddIcon from '@material-ui/icons/Add';\nimport React from 'react';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport globalStyles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    marginBottom: 8\n  },\n  summary: {\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  formControl: {\n    marginBottom: '0px'\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  selectFormCtrl: {\n    margin: theme.spacing(1),\n    width: '45%'\n  },\n  buttonAdd: {\n    marginLeft: theme.spacing(2)\n  },\n  chip: {\n    margin: theme.spacing(0.5)\n  },\n  addKeywordWrapper: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  textField: {\n    margin: 0\n  },\n  headerBox: {\n    marginBottom: '1rem'\n  }\n}));\n\nexport default ({ changed }) => {\n  const classes = useStyles();\n  const globalClasses = globalStyles();\n  const [editable, setEditable] = React.useState(false);\n  const [keywords, setKeywords] = React.useState([]);\n\n  React.useEffect(() => {\n    const storedKeywords = JSON.parse(localStorage.getItem('keywords') || '[]');\n    setKeywords(storedKeywords);\n  }, [setKeywords]);\n\n  const [text, setText] = React.useState('');\n\n  const handleKeywordChange = e => setText(e.target.value);\n\n  const handleAddKeyword = e => {\n    if (text) {\n      setKeywords([...keywords, text]);\n      setText('');\n    }\n  };\n\n  const keyPress = event => {\n    if (event.keyCode === 13) {\n      handleAddKeyword();\n    }\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleDelete = chipToDelete => () => {\n    let newKeywords = [...keywords];\n    const chipIndex = newKeywords.findIndex(\n      newKeywords => newKeywords === chipToDelete\n    );\n    newKeywords.splice(chipIndex, 1);\n    setKeywords(newKeywords);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('keywords', JSON.stringify(keywords));\n    setEditable(false);\n  };\n\n  const summary = () => {\n    return (\n      <Box className={globalClasses.expansionPanelPaddingReset}>\n        <Box className={!editable ? classes.headerBox : null}>\n          <Typography className={globalClasses.textCapitalizedSmall}>\n            {keywords.map(word => {\n              return (\n                <Chip\n                  color=\"primary\"\n                  key={word.index}\n                  label={word}\n                  className={classes.chip}\n                />\n              );\n            })}\n          </Typography>\n        </Box>\n      </Box>\n    );\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('keywordHeader')}\n          <span\n            className={changed ? globalClasses.unsavedChangesIcon : ''}\n          ></span>\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      <Box className={globalClasses.expansionPanelContainer}>\n        <Card className={globalClasses.outerContainerPadding}>\n          <CardContent className={globalClasses.expansionPanelPaddingReset}>\n            {!editable ? summary() : null}\n            <Grid container spacing={2}>\n              <Grid item xs={12} className={editable ? '' : globalClasses.hide}>\n                <Box className={classes.addKeywordWrapper}>\n                  <FormControl className={classes.formControl}>\n                    <TextField\n                      className={classes.textField}\n                      placeholder={l('addKeywordLabelText')}\n                      margin=\"normal\"\n                      variant=\"outlined\"\n                      value={text}\n                      onKeyDown={keyPress}\n                      onChange={handleKeywordChange}\n                      InputProps={{\n                        startAdornment: (\n                          <InputAdornment position=\"start\">#</InputAdornment>\n                        )\n                      }}\n                    />\n                  </FormControl>\n                  <Button\n                    className={\n                      editable\n                        ? globalClasses.iconButtonAdd\n                        : globalClasses.hide\n                    }\n                    color=\"primary\"\n                    onClick={handleAddKeyword}\n                  >\n                    <AddIcon />\n                  </Button>\n                </Box>\n              </Grid>\n              <Grid\n                className={!editable ? globalClasses.hide : ''}\n                item\n                xs={12}\n              >\n                {keywords.map(word => {\n                  return (\n                    <Chip\n                      color=\"primary\"\n                      key={word.index}\n                      label={word}\n                      onDelete={handleDelete(word)}\n                      className={classes.chip}\n                    />\n                  );\n                })}\n              </Grid>\n            </Grid>\n          </CardContent>\n        </Card>\n      </Box>\n      <Box\n        className={\n          editable ? globalClasses.saveBtnContainer : globalClasses.hide\n        }\n      >\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Make the onChange event work like an onBlur event in the Material UI TextField. The new onChange event also returns the input value as the first parameter.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport TextField from '@material-ui/core/TextField';\nimport React from 'react';\n\nexport default ({ value, onChange, ...props }) => {\n  const [cache, setCache] = React.useState(value);\n\n  React.useEffect(() => {\n    setCache(value);\n  }, [value]);\n\n  const handleCacheUpdate = event => {\n    setCache(event.target.value);\n    if (props.select) onChange(event.target.value);\n  };\n\n  const handleUpdate = event => {\n    onChange(event.target.value);\n  };\n\n  return (\n    <TextField\n      {...props}\n      value={cache}\n      onBlur={handleUpdate}\n      onChange={handleCacheUpdate}\n    />\n  );\n};\n","import { ExpansionPanelSummary, withStyles } from '@material-ui/core';\n\nexport const StyledExpansionPanelSummary = withStyles({\n  content: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    margin: 0\n  }\n})(ExpansionPanelSummary);\n","/**\n * @file Functionality of single contact. Handle edit, add & remove\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport {\n  Box,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  FormControl,\n  Grid,\n  IconButton,\n  Tooltip,\n  Typography\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport HelpIcon from '@material-ui/icons/HelpOutline';\nimport { makeStyles } from '@material-ui/styles';\nimport React from 'react';\nimport TextField from '../CachedInput';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport { StyledExpansionPanelSummary } from './StyledExpansionPanelSummary';\nimport globalStyles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    marginBottom: 8\n  },\n  textInternalMsg: {\n    fontSize: '12px',\n    letterSpacing: '0.4px',\n    lineHeight: '1rem',\n    color: 'rgba(0, 0, 0, 0.6)',\n    marginTop: '0.5rem'\n  },\n  grid1: {\n    background: 'red'\n  }\n}));\n\nexport default ({\n  name,\n  phone,\n  email,\n  description,\n  internalMsg,\n  open,\n  editable,\n  handleOpen,\n  handleEdit,\n  handleRemove\n}) => {\n  const classes = useStyles();\n  const globalClasses = globalStyles();\n\n  const icon = editable ? <ExpandMoreIcon /> : null;\n\n  const handleExpandedChange = (event, isExpanded) => {\n    if (!editable) return;\n    handleOpen(isExpanded);\n  };\n\n  const handleNameChange = name => {\n    handleEdit({ name });\n  };\n\n  const handlePhoneChange = phone => {\n    handleEdit({ phone });\n  };\n\n  const handleEmailChange = email => {\n    handleEdit({ email });\n  };\n\n  const handleDescriptionChange = description => {\n    handleEdit({ description });\n  };\n\n  const handleInternalMsgChange = internalMsg => {\n    handleEdit({ internalMsg });\n  };\n\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeLocationConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') {\n      handleRemove();\n    }\n  };\n\n  const summary = () => {\n    return (\n      <StyledExpansionPanelSummary\n        className={globalClasses.expansionPanelPaddingReset}\n        expandIcon={icon}\n      >\n        <Box className={globalClasses.summaryWrapper}>\n          <Typography className={globalClasses.textCapitalizedSmall}>\n            {name}\n          </Typography>\n          <Typography className={globalClasses.textEmphasis}>\n            {phone}\n          </Typography>\n          <Typography>{description}</Typography>\n          <Typography className={classes.textInternalMsg}>\n            {internalMsg}\n          </Typography>\n        </Box>\n      </StyledExpansionPanelSummary>\n    );\n  };\n\n  return (\n    <Box className={classes.wrapper}>\n      <ExpansionPanel\n        className={globalClasses.expansionPanel}\n        expanded={editable ? open : false}\n        onChange={handleExpandedChange}\n      >\n        {!editable ? summary() : null}\n\n        <ExpansionPanelDetails\n          className={globalClasses.expansionPanelPaddingReset}\n        >\n          <Grid container spacing={2}>\n            <Grid item xs={10}>\n              <Grid\n                container\n                spacing={2}\n                className={globalClasses.detailsWrapper}\n              >\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('name')}\n                      value={name}\n                      onChange={handleNameChange}\n                    />\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('phone')}\n                      value={phone}\n                      onChange={handlePhoneChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('email')}\n                      value={email}\n                      onChange={handleEmailChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('description')}\n                      multiline\n                      rows=\"4\"\n                      variant=\"outlined\"\n                      defaultValue={description}\n                      onChange={handleDescriptionChange}\n                    />\n                    <Tooltip\n                      title={l('contactDescriptionHelpText')}\n                      className={globalClasses.infoTooltip}\n                    >\n                      <HelpIcon\n                        color=\"primary\"\n                        className={globalClasses.helpIcon}\n                      />\n                    </Tooltip>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('internalMsg')}\n                      multiline\n                      rows=\"2\"\n                      variant=\"outlined\"\n                      defaultValue={internalMsg}\n                      onChange={handleInternalMsgChange}\n                    />\n                    <Tooltip\n                      title={l('contactInternalMsgHelperText')}\n                      className={globalClasses.infoTooltip}\n                    >\n                      <HelpIcon\n                        color=\"primary\"\n                        className={globalClasses.helpIcon}\n                      />\n                    </Tooltip>\n                  </FormControl>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={2}>\n            <Grid container>\n              <Grid item xs={12}>\n                <Tooltip title={l('removeText')}>\n                  <IconButton></IconButton>\n                </Tooltip>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Tooltip title={l('removeText')}>\n            <IconButton\n              className={\n                editable ? globalClasses.removeIconButton2 : globalClasses.hide\n              }\n              onClick={handleConfirmationDialog}\n              aria-label={l('removeText')}\n              size=\"small\"\n            >\n              <DeleteIcon fontSize=\"inherit\" />\n            </IconButton>\n          </Tooltip>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </Box>\n  );\n};\n","/**\n * @file Template for displaying if user hasn't add any content\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport React from 'react';\nimport { Card, Typography } from '@material-ui/core';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    background: '#dcdde7',\n    padding: '1rem',\n    margin: '0 1rem',\n    marginBottom: '1rem'\n  }\n}));\n\nexport default () => {\n  const classes = useStyles();\n  return (\n    <Card className={classes.container}>\n      <Typography>{l('emptySectionTitle')}</Typography>\n      <Typography>{l('emptySectionText')}</Typography>\n    </Card>\n  );\n};\n","/**\n * @file Functionality of single contact. Editing address, country, region & postal code\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport React from 'react';\nimport { Typography, Button, Box, IconButton } from '@material-ui/core';\n\nimport Contact from './Contact';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport EmptySection from './EmptySection';\n\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default () => {\n  const globalClasses = styles();\n\n  const [open, setOpen] = React.useState(null);\n  const [editable, setEditable] = React.useState(false);\n  const [contacts, setContacts] = React.useState([]);\n\n  React.useEffect(() => {\n    const storedContacts = JSON.parse(localStorage.getItem('contacts') || '[]');\n    setContacts(storedContacts);\n  }, [setContacts]);\n\n  const handleOpen = index => isOpen => {\n    setOpen(isOpen ? index : null);\n  };\n\n  const handleEdit = index => data => {\n    let newContacts = [...contacts];\n    newContacts[index] = { ...newContacts[index], ...data };\n    setContacts(newContacts);\n  };\n\n  const handleAddContact = () => {\n    let lastIndex = contacts.length;\n\n    setContacts([\n      ...contacts,\n      {\n        name: '',\n        phone: '',\n        email: '',\n        description: '',\n        internal_msg: ''\n      }\n    ]);\n\n    setOpen(lastIndex);\n  };\n\n  const handleRemove = index => () => {\n    let newLocations = [...contacts];\n    newLocations.splice(index, 1);\n    setContacts(newLocations);\n  };\n\n  let hasData = contacts.length;\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('contacts', JSON.stringify(contacts));\n    setOpen(false);\n    setEditable(false);\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('contactsHeader')}\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n\n      {!hasData ? <EmptySection /> : null}\n      {contacts.map((contact, index) => (\n        <Contact\n          {...contact}\n          key={index}\n          editable={editable}\n          open={open === index}\n          handleOpen={handleOpen(index)}\n          handleEdit={handleEdit(index)}\n          handleRemove={handleRemove(index)}\n        />\n      ))}\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button color=\"primary\" onClick={handleAddContact}>\n          {l('addLocationButtonText')}\n        </Button>\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Functionality of single social media feed. Editing username and adding hashtags\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Chip,\n  Grid,\n  IconButton,\n  InputAdornment,\n  TextField,\n  Tooltip,\n  Typography\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddIcon from '@material-ui/icons/Add';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport InstagramIcon from '@material-ui/icons/Instagram';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport { makeStyles } from '@material-ui/styles';\nimport React from 'react';\nimport CustomTextField from '../CachedInput';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport globalStyles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  identifierAddWrapper: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  editableContainer: {\n    marginTop: '8px'\n  },\n  chipContainer: {\n    paddingTop: '0px !important'\n  },\n  chip: {\n    marginRight: '0.25rem'\n  }\n}));\n\nexport default ({\n  type,\n  username,\n  hashtags,\n  editable,\n  handleEdit,\n  handleRemove\n}) => {\n  const classes = useStyles();\n  const globalClasses = globalStyles();\n\n  const [hashtag, setHashtag] = React.useState('');\n\n  const setIcon = () => {\n    switch (type) {\n      case 'instagram':\n        return <InstagramIcon color=\"primary\" fontSize=\"small\" />;\n      case 'facebook':\n        return <FacebookIcon color=\"primary\" fontSize=\"small\" />;\n      case 'twitter':\n        return <TwitterIcon color=\"primary\" fontSize=\"small\" />;\n      default:\n        return;\n    }\n  };\n\n  const handleUsernameChange = username => {\n    handleEdit({ username });\n  };\n\n  const handleHashtagChange = e => setHashtag(e.target.value);\n\n  const handleAddHashtag = e => {\n    if (hashtag) {\n      hashtags.push(hashtag);\n      setHashtag('');\n    }\n  };\n\n  const keyPress = event => {\n    if (event.keyCode === 13) {\n      const hashtagsCache = hashtags;\n      hashtagsCache.push(event.target.value);\n      handleEdit({ hashtags });\n      event.target.value = '';\n    }\n  };\n\n  const handleIdentifierRemove = index => () => {\n    hashtags.splice(index, 1);\n    handleEdit({ hashtags });\n  };\n\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeServiceConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') handleRemove();\n  };\n\n  return (\n    <Box className={globalClasses.expansionPanelContainer}>\n      <Card className={globalClasses.outerContainerPadding}>\n        <CardContent className={globalClasses.expansionPanelPaddingReset}>\n          <Typography\n            style={{ display: 'flex' }}\n            className={globalClasses.textEmphasis}\n          >\n            <span style={{ marginRight: '0.25rem' }}>{setIcon()}</span>\n            {type}\n          </Typography>\n          <Grid\n            container\n            spacing={2}\n            className={\n              editable ? classes.editableContainer : globalClasses.hide\n            }\n          >\n            <Grid item xs={4}>\n              <CustomTextField\n                value={username}\n                variant=\"outlined\"\n                onChange={handleUsernameChange}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">@</InputAdornment>\n                  )\n                }}\n              />\n            </Grid>\n            <Grid item xs={6}>\n              <Box>\n                <TextField\n                  variant=\"outlined\"\n                  value={hashtag}\n                  onChange={handleHashtagChange}\n                  onKeyDown={keyPress}\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">#</InputAdornment>\n                    )\n                  }}\n                />\n                <Button\n                  className={\n                    editable ? globalClasses.iconButtonAdd : globalClasses.hide\n                  }\n                  color=\"primary\"\n                  onClick={handleAddHashtag}\n                >\n                  <AddIcon />\n                </Button>\n              </Box>\n            </Grid>\n            <Grid item xs={12}>\n              {hashtags.map((identifier, index) => {\n                return (\n                  <Chip\n                    className={classes.chip}\n                    label={'#' + identifier}\n                    color=\"primary\"\n                    key={index}\n                    onDelete={handleIdentifierRemove(index)}\n                  />\n                );\n              })}\n            </Grid>\n          </Grid>\n          <Grid\n            container\n            spacing={2}\n            className={editable ? globalClasses.hide : ''}\n          >\n            <Grid item xs={12}>\n              <Typography>{'@' + username}</Typography>\n            </Grid>\n            <Grid item xs={12} className={classes.chipContainer}>\n              {hashtags.map((identifier, index) => {\n                return (\n                  <Chip\n                    className={classes.chip}\n                    styles={{ marginRight: '0.25rem' }}\n                    label={'#' + identifier}\n                    color=\"primary\"\n                    key={index}\n                  />\n                );\n              })}\n            </Grid>\n          </Grid>\n        </CardContent>\n        <Tooltip title={l('removeText')}>\n          <IconButton\n            className={\n              editable ? globalClasses.removeIconButton2 : globalClasses.hide\n            }\n            onClick={handleConfirmationDialog}\n            aria-label={l('removeText')}\n            size=\"small\"\n          >\n            <DeleteIcon fontSize=\"inherit\" />\n          </IconButton>\n        </Tooltip>\n      </Card>\n    </Box>\n  );\n};\n","import {\n  Box,\n  Button,\n  IconButton,\n  ListItemIcon,\n  Menu,\n  MenuItem,\n  Typography\n} from '@material-ui/core';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport InstagramIcon from '@material-ui/icons/Instagram';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport React from 'react';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport EmptySection from './EmptySection';\nimport Locale from '../Locale';\nimport Feed from './Feed';\nimport Translation from './organizationLocale';\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default () => {\n  const globalClasses = styles();\n\n  const enabledFeeds = {\n    instagram: <InstagramIcon fontSize=\"small\" />,\n    facebook: <FacebookIcon fontSize=\"small\" />,\n    twitter: <TwitterIcon fontSize=\"small\" />\n  };\n\n  const [editable, setEditable] = React.useState(false);\n  const [feeds, setFeeds] = React.useState([]);\n\n  React.useEffect(() => {\n    const storedFeeds = JSON.parse(localStorage.getItem('feeds') || '[]');\n    setFeeds(storedFeeds);\n  }, [setFeeds]);\n\n  const handleEdit = index => data => {\n    let newFeeds = [...feeds];\n    newFeeds[index] = { ...newFeeds[index], ...data };\n    setFeeds(newFeeds);\n  };\n\n  const handleAdd = type => {\n    setFeeds([\n      ...feeds,\n      {\n        type: type,\n        username: '',\n        hashtags: []\n      }\n    ]);\n  };\n\n  const handleRemove = index => () => {\n    let newFeeds = [...feeds];\n    newFeeds.splice(index, 1);\n    setFeeds(newFeeds);\n  };\n\n  let hasData = feeds.length;\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('feeds', JSON.stringify(feeds));\n    setEditable(false);\n  };\n\n  // New feed creation\n  const [feedSelectMenuAnchorEl, setFeedSelectMenuAnchorEl] = React.useState(\n    null\n  );\n  const handleOpenFeedSelectMenu = event => {\n    setFeedSelectMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseFeedSelectMenu = type => () => {\n    setFeedSelectMenuAnchorEl(null);\n    console.log(type);\n\n    switch (type) {\n      case 'instagram':\n        handleAdd(type);\n        console.log(feeds);\n        break;\n      case 'facebook':\n        handleAdd(type);\n        break;\n      case 'twitter':\n        handleAdd(type);\n        break;\n      default:\n        return;\n    }\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('feedsHeader')}\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n\n      {!hasData ? <EmptySection /> : null}\n      {feeds.map((feed, index) => (\n        <Feed\n          {...feed}\n          key={index}\n          editable={editable}\n          type={feeds[index].type}\n          handleEdit={handleEdit(index)}\n          handleRemove={handleRemove(index)}\n        />\n      ))}\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button\n          className={editable ? globalClasses.buttonAdd : globalClasses.hide}\n          color=\"primary\"\n          onClick={handleOpenFeedSelectMenu}\n        >\n          {l('addFeedButtonText')}\n        </Button>\n        <Menu\n          id=\"add-feed-type-menu\"\n          anchorEl={feedSelectMenuAnchorEl}\n          keepMounted\n          open={Boolean(feedSelectMenuAnchorEl)}\n          onClose={handleCloseFeedSelectMenu}\n        >\n          {Object.keys(enabledFeeds).map(x => (\n            <MenuItem onClick={handleCloseFeedSelectMenu(x)} key={x}>\n              <ListItemIcon>{enabledFeeds[x]}</ListItemIcon>\n              <Typography>{l`feedType`[x]}</Typography>\n            </MenuItem>\n          ))}\n        </Menu>\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Composition and functionality of single location\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport React from 'react';\nimport {\n  Box,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  FormControl,\n  Grid,\n  IconButton,\n  InputLabel,\n  MenuItem,\n  Select,\n  Tooltip,\n  Typography\n} from '@material-ui/core';\nimport TextField from '../CachedInput';\n\nimport { StyledExpansionPanelSummary } from './StyledExpansionPanelSummary';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport cities from '../../data/cities';\n// data\nimport countries from '../../data/countries';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport globalStyles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    marginBottom: 8\n  },\n  formControl: {\n    width: '80%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  selectFormCtrl: {\n    width: '100%'\n  },\n  removeIconButton: {\n    width: 'fit-content',\n    height: 'fit-content',\n    alignSelf: 'flex-end'\n  }\n}));\n\nexport default ({\n  city,\n  country,\n  address,\n  postalCode,\n  editable,\n  open,\n  handleOpen,\n  handleEdit,\n  handleRemove\n}) => {\n  const classes = useStyles();\n  const globalClasses = globalStyles();\n\n  // Editable\n  const icon = editable ? <ExpandMoreIcon /> : null;\n\n  const handleExpandedChange = (event, isExpanded) => {\n    if (!editable) return;\n    handleOpen(isExpanded);\n  };\n\n  // Country select\n  const handleCountryChange = event => {\n    handleEdit({ country: event.target.value });\n  };\n\n  // City select\n  const handleCityChange = event => {\n    handleEdit({ city: event.target.value });\n  };\n\n  // Address\n  const handleAddressChange = address => {\n    handleEdit({ address });\n  };\n\n  const handlePostalCodeChange = postalCode => {\n    handleEdit({ postalCode });\n  };\n\n  // Opens the location remove confirmation panel\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeLocationConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') {\n      handleRemove();\n    }\n  };\n\n  const summary = () => {\n    return (\n      <StyledExpansionPanelSummary\n        className={globalClasses.expansionPanelPaddingReset}\n        expandIcon={icon}\n        aria-controls=\"panel1bh-content\"\n        id=\"panel1bh-header\"\n      >\n        <Box className={globalClasses.summaryWrapper}>\n          <Typography className={globalClasses.textCapitalizedSmall}>\n            {postalCode + ', ' + city}\n          </Typography>\n          <Typography className={globalClasses.textEmphasis}>\n            {address}\n          </Typography>\n        </Box>\n      </StyledExpansionPanelSummary>\n    );\n  };\n\n  return (\n    <Box className={classes.wrapper}>\n      <ExpansionPanel\n        expanded={editable ? open : false}\n        className={globalClasses.expansionPanel}\n        onChange={handleExpandedChange}\n      >\n        {!editable ? summary() : null}\n        <ExpansionPanelDetails\n          className={globalClasses.expansionPanelPaddingReset}\n        >\n          <FormControl className={classes.formControl}>\n            <Grid container spacing={2}>\n              <Grid item xs={6}>\n                <FormControl className={globalClasses.formControl}>\n                  <InputLabel id=\"location-select-country-label\">\n                    {l('countrySelectLabel')}\n                  </InputLabel>\n                  <Select\n                    className={classes.select}\n                    labelid=\"location-select-country-label\"\n                    value={country}\n                    onChange={handleCountryChange}\n                  >\n                    {countries.map(x => (\n                      <MenuItem key={x.code} value={x.code}>\n                        {x.name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={6}>\n                <FormControl className={globalClasses.formControl}>\n                  <InputLabel id=\"location-select-city-label\">\n                    {l('citySelectLabel')}\n                  </InputLabel>\n                  <Select\n                    className={classes.select}\n                    labelid=\"location-select-city-label\"\n                    value={city}\n                    onChange={handleCityChange}\n                  >\n                    {cities.map((x, i) => (\n                      <MenuItem key={i} value={x.name}>\n                        {x.name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n            </Grid>\n            <FormControl>\n              <TextField\n                label={l('addressInputLabel')}\n                margin=\"normal\"\n                value={address}\n                onChange={handleAddressChange}\n              />\n            </FormControl>\n            <Grid container>\n              <Grid item xs={6}>\n                <FormControl>\n                  <TextField\n                    label={l('postalCodeInputLabel')}\n                    margin=\"normal\"\n                    value={postalCode}\n                    onChange={handlePostalCodeChange}\n                  />\n                </FormControl>\n              </Grid>\n            </Grid>\n          </FormControl>\n          <Tooltip title={l('removeText')}>\n            <IconButton\n              className={\n                editable ? globalClasses.removeIconButton2 : globalClasses.hide\n              }\n              onClick={handleConfirmationDialog}\n              aria-label={l('removeText')}\n              size=\"small\"\n            >\n              <DeleteIcon fontSize=\"inherit\" />\n            </IconButton>\n          </Tooltip>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </Box>\n  );\n};\n","/**\n * @file Create, edit & remove logic for locations\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport { Box, Button, IconButton, Typography } from '@material-ui/core';\nimport React from 'react';\nimport Locale from '../Locale';\nimport Location from './Location';\nimport Translation from './organizationLocale';\nimport styles from './styles';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst l = Locale(Translation);\n\nexport default () => {\n  const globalClasses = styles();\n\n  const [locations, setLocations] = React.useState([]);\n  const [open, setOpen] = React.useState(null);\n  const [editable, setEditable] = React.useState(false);\n\n  React.useEffect(() => {\n    // get locations (or empty array if there are no locations) from local storage\n    const storedLocations = JSON.parse(\n      localStorage.getItem('locations') || '[]'\n    );\n    // display retrieved locations on the screen\n    setLocations(storedLocations);\n  }, [setLocations]);\n\n  // Handles opening of expandable cards\n  const handleOpen = index => isOpen => {\n    setOpen(isOpen ? index : null);\n  };\n\n  // Save changes to the edited location(s)\n  const handleLocationEdit = index => data => {\n    let newLocations = [...locations];\n    newLocations[index] = { ...newLocations[index], ...data };\n    setLocations(newLocations);\n  };\n\n  // Remove selected location by index\n  const handleLocationRemove = index => () => {\n    let newLocations = [...locations];\n    newLocations.splice(index, 1);\n    setLocations(newLocations);\n  };\n\n  // Create new location\n  const handleAddLocation = () => {\n    let lastIndex = locations.length;\n\n    setLocations([\n      ...locations,\n      {\n        country: 'FI',\n        city: '',\n        address: '',\n        postalCode: ''\n      }\n    ]);\n\n    // Set created location card to be expanded\n    setOpen(lastIndex);\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('locations', JSON.stringify(locations));\n    setOpen(false);\n    setEditable(false);\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('locationsHeader')}\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      {locations.map((location, index) => (\n        <Location\n          {...location}\n          key={index}\n          editable={editable}\n          open={open === index}\n          handleOpen={handleOpen(index)}\n          handleEdit={handleLocationEdit(index)}\n          handleRemove={handleLocationRemove(index)}\n        />\n      ))}\n\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button\n          className={editable ? globalClasses.buttonAdd : globalClasses.hide}\n          color=\"primary\"\n          onClick={handleAddLocation}\n        >\n          {l('addLocationButtonText')}\n        </Button>\n\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Gender criteria component\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport React from 'react';\nimport {\n  Typography,\n  FormControl,\n  FormControlLabel,\n  RadioGroup,\n  Radio,\n  Box\n} from '@material-ui/core';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default ({ value, handleGenderChange }) => {\n  const globalClasses = styles();\n\n  return (\n    <Box>\n      <Typography className={globalClasses.textCapitalizedSmall}>\n        {l('gender')}\n      </Typography>\n      <FormControl>\n        <RadioGroup\n          value={value ? 'male' : 'female'}\n          onChange={handleGenderChange}\n        >\n          <FormControlLabel\n            value=\"female\"\n            label=\"female\"\n            control={<Radio color=\"primary\" />}\n          />\n          <FormControlLabel\n            value=\"male\"\n            label=\"male\"\n            control={<Radio color=\"primary\" />}\n          />\n        </RadioGroup>\n      </FormControl>\n    </Box>\n  );\n};\n","/**\n * @file Age criteria component\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport React from 'react';\nimport { Box, Slider, Typography } from '@material-ui/core';\n\nimport styles from './styles';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nconst l = Locale(Translation);\n\nexport default ({ value, handleAgeChange }) => {\n  const globalClasses = styles();\n\n  return (\n    <Box>\n      <Typography className={globalClasses.textCapitalizedSmall}>\n        {l('age')}\n      </Typography>\n      <Slider\n        value={value}\n        onChange={handleAgeChange}\n        valueLabelDisplay=\"auto\"\n      />\n    </Box>\n  );\n};\n","/**\n * @file Composition and functionality of single service\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport {\n  Box,\n  Button,\n  Checkbox,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  FormControl,\n  FormControlLabel,\n  Grid,\n  IconButton,\n  Menu,\n  MenuItem,\n  Radio,\n  Switch,\n  Tooltip,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React from 'react';\nimport TextField from '../CachedInput';\nimport { openDialog } from '../ConfirmationDialog';\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport { StyledExpansionPanelSummary } from './StyledExpansionPanelSummary';\n\nimport globalStyles from './styles';\n\nimport GenderCriteria from './GenderCriteria';\nimport AgeCriteria from './AgeCriteria';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  description: {\n    marginTop: '0.75rem'\n  },\n  criterias: {\n    marginTop: '0.75rem'\n  }\n}));\n\nexport default ({\n  name,\n  description,\n  openService,\n  requirements,\n  open,\n  editable,\n  handleOpen,\n  handleEdit,\n  handleRemove\n}) => {\n  const globalClasses = globalStyles();\n  const classes = useStyles();\n\n  const [openState, setOpenState] = React.useState(false);\n  const [criteriaMenuAnchorEl, setCriteriaMenuAnchorEl] = React.useState(null);\n  // const [ageValue, setAgeValue] = React.useState([18, 30]);\n\n  const handleCheckedChange = event => {\n    setOpenState({ openState: event.target.checked });\n    handleEdit({ openService: openState });\n  };\n\n  const enabledCriterias = {\n    age: 'age',\n    gender: 'gender',\n    kelaRehabilitee: 'kelaRehabilitee'\n  };\n  const handleExpandedChange = (event, isExpanded) => {\n    if (!editable) return;\n    handleOpen(isExpanded);\n  };\n\n  const handleNameChange = name => {\n    handleEdit({ name });\n  };\n\n  const handleDescriptionChange = description => {\n    handleEdit({ description });\n  };\n\n  const handleOpenAddCriteriaMenu = event => {\n    setCriteriaMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleGenderChange = event => {\n    setGenderValue(event.target.value === 'male');\n  };\n\n  const setGenderValue = isMale => {\n    const requirementsCache = requirements;\n    const genderIndex = requirementsCache.findIndex(x => x.type === 'gender');\n    if (genderIndex < 0) {\n      requirementsCache.push({ type: 'gender', isMale });\n    } else {\n      requirementsCache[genderIndex].isMale = isMale;\n    }\n\n    handleEdit({ requirements: requirementsCache });\n  };\n\n  const setAgeValues = (min, max) => {\n    const requirementsCache = requirements;\n    const ageIndex = requirementsCache.findIndex(x => x.type === 'age');\n    if (ageIndex < 0) {\n      requirementsCache.push({ type: 'age', min, max });\n    } else {\n      requirementsCache[ageIndex].min = min;\n      requirementsCache[ageIndex].max = max;\n    }\n  };\n\n  const handleAgeChange = (event, newValue) => {\n    // setAgeValue(newValue);\n    setAgeValues(newValue[0], newValue[1]);\n  };\n\n  const setKelaValue = isRequired => {\n    const requirementsCache = requirements;\n    const kelaIndex = requirementsCache.findIndex(x => x.type === 'kela');\n\n    if (kelaIndex < 0) {\n      requirementsCache.push({ type: 'kela', isRequired });\n    } else {\n      requirementsCache[kelaIndex].isRequired = isRequired;\n    }\n\n    handleEdit({ requirements: requirementsCache });\n  };\n\n  const kela = value => {\n    return (\n      <Box>\n        <Typography className={globalClasses.textCapitalizedSmall}>\n          {l('serviceCriteriaKelaRehabilitee')}\n        </Typography>\n        <FormControl>\n          <FormControlLabel\n            label={l('serviceCriteriaKelaRehabilitee')}\n            control={\n              <Checkbox\n                checked={value}\n                onChange={setKelaValue}\n                value={value}\n                color=\"primary\"\n              />\n            }\n          />\n        </FormControl>\n      </Box>\n    );\n  };\n\n  const handleCloseAddCriteriaMenu = type => () => {\n    setCriteriaMenuAnchorEl(null);\n\n    switch (type) {\n      case 'gender':\n        setGenderValue(true);\n        break;\n      case 'age':\n        setAgeValues(0, 1);\n        break;\n      case 'kelaRehabilitee':\n        setKelaValue(true);\n        break;\n      default:\n        return;\n    }\n  };\n\n  const handleConfirmationDialog = async () => {\n    const action = await openDialog({\n      title: l('removeServiceConfirmationTitle'),\n      description: l('confirmationWarning')\n    });\n\n    if (action === 'confirm') handleRemove();\n  };\n\n  const summary = () => {\n    return (\n      <StyledExpansionPanelSummary\n        className={globalClasses.expansionPanelPaddingReset}\n      >\n        <Box className={globalClasses.summaryWrapper}>\n          <Typography className={globalClasses.textCapitalizedSmall}>\n            {openService ? l('serviceOpen') : l('serviceClosed')}\n          </Typography>\n          <Typography className={globalClasses.textEmphasis}>{name}</Typography>\n          <Typography className={classes.description}>{description}</Typography>\n          <Box className={classes.criterias}>\n            <Typography className={globalClasses.textCapitalizedSmall}>\n              {l('criterias')}\n            </Typography>\n            <Grid container spacing={1}>\n              {requirements.map(x => {\n                if (x.type === 'gender')\n                  return (\n                    <Grid item xs={12}>\n                      <FormControlLabel\n                        checked={true}\n                        label={x.isMale ? l('forMen') : l('forWomen')}\n                        control={<Radio color=\"primary\" />}\n                      />\n                    </Grid>\n                  );\n                if (x.type === 'kela')\n                  return (\n                    <Grid item xs={12}>\n                      <FormControlLabel\n                        checked={true}\n                        label={l('forKelaRehabs')}\n                        control={<Radio color=\"primary\" />}\n                      />\n                    </Grid>\n                  );\n                if (x.type === 'age')\n                  return (\n                    <Grid item xs={12}>\n                      <Typography>\n                        {'Ikäraja: ' + x.min + ' - ' + x.max}\n                      </Typography>\n                    </Grid>\n                  );\n\n                return null;\n              })}\n            </Grid>\n          </Box>\n        </Box>\n      </StyledExpansionPanelSummary>\n    );\n  };\n\n  const isFirstRequirement = !requirements.length;\n\n  return (\n    <Box className={globalClasses.expansionPanelContainer}>\n      <ExpansionPanel\n        className={globalClasses.expansionPanel}\n        expanded={editable ? open : false}\n        onChange={handleExpandedChange}\n      >\n        {!editable ? summary() : null}\n        <ExpansionPanelDetails\n          className={globalClasses.expansionPanelPaddingReset}\n        >\n          <Grid container spacing={2}>\n            <Grid item xs={10}>\n              <Grid\n                container\n                spacing={2}\n                className={globalClasses.detailsWrapper}\n              >\n                <Grid item xs={6}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('name')}\n                      value={name}\n                      onChange={handleNameChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl className={globalClasses.formControl}>\n                    <TextField\n                      label={l('inputDescription')}\n                      value={description}\n                      onChange={handleDescriptionChange}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  <FormControl>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          onChange={handleCheckedChange}\n                          value={openState}\n                          color=\"primary\"\n                        />\n                      }\n                      label={l('serviceClosedRadioButtonHelper')}\n                    />\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                  {requirements.map(x => {\n                    if (x.type === 'gender')\n                      return (\n                        <GenderCriteria\n                          value={x.isMale}\n                          handleGenderChange={handleGenderChange}\n                        />\n                      );\n                    if (x.type === 'age')\n                      return (\n                        <AgeCriteria\n                          value={x.ageValue}\n                          handleAgeChange={handleAgeChange}\n                        />\n                      );\n                    if (x.type === 'kela') return kela(x.isRequired);\n                    return null;\n                  })}\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<AddIcon />}\n                    size=\"small\"\n                    onClick={handleOpenAddCriteriaMenu}\n                  >\n                    {isFirstRequirement\n                      ? l('serviceCriteriaAddFirstButton')\n                      : l('serviceCriteriaAddButton')}\n                  </Button>\n                  <Menu\n                    id=\"service-menu-criteria-type\"\n                    anchorEl={criteriaMenuAnchorEl}\n                    keepMounted\n                    open={Boolean(criteriaMenuAnchorEl)}\n                    onClose={handleCloseAddCriteriaMenu}\n                  >\n                    {Object.keys(enabledCriterias).map(x => (\n                      <MenuItem onClick={handleCloseAddCriteriaMenu(x)} key={x}>\n                        <Typography variant=\"inherit\">\n                          {l`serviceCriteriaType`[x]}\n                        </Typography>\n                      </MenuItem>\n                    ))}\n                  </Menu>\n                </Grid>\n              </Grid>\n            </Grid>\n            <Grid\n              item\n              xs={2}\n              className={globalClasses.expansionPanelRemoveActionContainer}\n            >\n              <Tooltip title={l('removeText')}>\n                <IconButton\n                  className={globalClasses.removeIconButton}\n                  onClick={handleConfirmationDialog}\n                  aria-label={l('removeText')}\n                  size=\"small\"\n                >\n                  <DeleteIcon fontSize=\"inherit\" />\n                </IconButton>\n              </Tooltip>\n            </Grid>\n          </Grid>\n        </ExpansionPanelDetails>\n      </ExpansionPanel>\n    </Box>\n  );\n};\n","import React from 'react';\nimport { Typography, Button, Box, IconButton } from '@material-ui/core';\nimport EmptySection from './EmptySection';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport Service from './Service';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\n\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nexport default () => {\n  const globalClasses = styles();\n\n  const [open, setOpen] = React.useState(null);\n  const [editable, setEditable] = React.useState(false);\n  const [services, setServices] = React.useState([]);\n\n  React.useEffect(() => {\n    const storedServices = JSON.parse(localStorage.getItem('services') || '[]');\n    setServices(storedServices);\n  }, [setServices]);\n\n  const handleOpen = index => isOpen => {\n    setOpen(isOpen ? index : null);\n  };\n\n  const handleEdit = index => data => {\n    let newServices = [...services];\n    newServices[index] = { ...newServices[index], ...data };\n    setServices(newServices);\n  };\n\n  const handleAdd = () => {\n    let lastIndex = services.length;\n\n    setServices([\n      ...services,\n      {\n        name: '',\n        description: '',\n        openService: true,\n        requirements: []\n      }\n    ]);\n\n    setOpen(lastIndex);\n  };\n\n  const handleRemove = index => () => {\n    let newServices = [...services];\n    newServices.splice(index, 1);\n    setServices(newServices);\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('services', JSON.stringify(services));\n    setOpen(false);\n    setEditable(false);\n  };\n\n  let hasData = services.length;\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('servicesHeader')}\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      {!hasData ? <EmptySection /> : null}\n      {services.map((service, index) => (\n        <Service\n          {...service}\n          key={index}\n          editable={editable}\n          open={open === index}\n          handleOpen={handleOpen(index)}\n          handleEdit={handleEdit(index)}\n          handleRemove={handleRemove(index)}\n        />\n      ))}\n      <Box\n        className={\n          editable ? globalClasses.sectionButtonsContainer : globalClasses.hide\n        }\n      >\n        <Button\n          className={editable ? globalClasses.buttonAdd : globalClasses.hide}\n          color=\"primary\"\n          onClick={handleAdd}\n        >\n          {l('addServiceButtonText')}\n        </Button>\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Target section. Handles adding and removing targets\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport {\n  Box,\n  Chip,\n  Button,\n  Card,\n  IconButton,\n  CardContent,\n  Typography\n} from '@material-ui/core';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport Locale from '../Locale';\nimport Translation from './organizationLocale';\nimport styles from './styles';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  chip: {\n    marginRight: '0.25rem'\n  },\n  targetBox: {\n    marginBottom: '1rem'\n  }\n}));\n\nexport default () => {\n  const globalClasses = styles();\n  const classes = useStyles();\n\n  const [editable, setEditable] = React.useState(false);\n  const [targets, setTargets] = React.useState([]);\n  const [chipData /*setChipData*/] = React.useState([\n    { key: 0, label: l('loneliness') },\n    { key: 1, label: l('exclusion') },\n    { key: 2, label: l('socialIssues') },\n    { key: 3, label: l('mentalHealthProblems') }\n  ]);\n\n  React.useEffect(() => {\n    const storedTargets = JSON.parse(localStorage.getItem('targets') || '[]');\n    setTargets(storedTargets);\n  }, [setTargets]);\n\n  const handleChipClick = chip => () => {\n    if (!targets.includes(chip.label)) {\n      targets.push(chip.label);\n    }\n    setTargets([...targets]);\n  };\n\n  const handleChipRemove = index => () => {\n    targets.splice(index, 1);\n    setTargets([...targets]);\n  };\n\n  const handleEditClick = () => {\n    setEditable(true);\n  };\n\n  const handleSaveClick = () => {\n    localStorage.setItem('targets', JSON.stringify(targets));\n    setEditable(false);\n  };\n\n  return (\n    <Box className={globalClasses.section}>\n      <Box className={globalClasses.sectionTitleContainer}>\n        <Typography className={globalClasses.sectionTitle}>\n          {l('targetsHeader')}\n        </Typography>\n        <IconButton\n          onClick={handleEditClick}\n          className={globalClasses.editSectionButton}\n          aria-label=\"language\"\n          color=\"primary\"\n        >\n          <EditIcon />\n        </IconButton>\n      </Box>\n      <Box className={globalClasses.expansionPanelContainer}>\n        <Card className={globalClasses.outerContainerPadding}>\n          <CardContent className={globalClasses.expansionPanelPaddingReset}>\n            <Box className={editable ? classes.targetBox : null}>\n              <Typography className={globalClasses.textCapitalizedSmall}>\n                Valitut kohdesanat\n              </Typography>\n              {targets.map((target, index) => {\n                return (\n                  <Chip\n                    label={target}\n                    className={classes.chip}\n                    key={index}\n                    color=\"primary\"\n                    onDelete={editable ? handleChipRemove(index) : null}\n                  />\n                );\n              })}\n            </Box>\n            <Box\n              className={\n                editable ? classes.availableTargets : globalClasses.hide\n              }\n            >\n              <Typography className={globalClasses.textCapitalizedSmall}>\n                Valittavissa olevat kohdesanat\n              </Typography>\n              {chipData.map(data => {\n                return (\n                  <Chip\n                    label={data.label}\n                    className={classes.chip}\n                    key={data.key}\n                    onClick={handleChipClick(data)}\n                    color=\"primary\"\n                    variant=\"outlined\"\n                  />\n                );\n              })}\n            </Box>\n          </CardContent>\n        </Card>\n      </Box>\n      <Box\n        className={\n          editable ? globalClasses.saveBtnContainer : globalClasses.hide\n        }\n      >\n        <Button onClick={handleSaveClick} color=\"primary\" variant=\"contained\">\n          {l('save')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Structure of the organization panel\n * @author Sara Suviranta <sara.suviranta@metropolia.fi>\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport Card from '@material-ui/core/Card';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport Keywords from '../components/organization/Keywords';\nimport Contacts from '../components/organization/Contacts';\nimport Feeds from '../components/organization/Feeds';\nimport Locations from '../components/organization/Locations';\nimport Services from '../components/organization/Services';\nimport DefaultImage from '../img/Image.png';\nimport Targets from '../components/organization/Targets';\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  fab: {\n    margin: 0,\n    top: 'auto',\n    right: 20,\n    bottom: 20,\n    left: 'auto',\n    position: 'fixed'\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  },\n  profileImage: {\n    minWidth: 80\n  },\n  wrapper: {\n    padding: theme.spacing(1)\n  },\n  grid: {\n    maxWidth: 1320,\n    margin: '0 auto'\n  },\n  topSection: {\n    background: '#ffffff',\n    padding: '32px 64px'\n  },\n  bottomSection: {\n    padding: theme.spacing(0.5),\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(2)\n    }\n  },\n  root: {\n    background: '#f3f3f3'\n  },\n  sectionTitle: {\n    fontSize: '1.125rem', // 18px\n    fontWeight: 600,\n    marginLeft: '1rem',\n    marginBottom: '0.5rem'\n  },\n  sectionWrapper: {\n    display: 'flex',\n    flexDirection: 'column'\n  }\n}));\n\nexport const OrganizationPanel = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.topSection}>\n        <Grid className={classes.grid} container spacing={4}>\n          <Grid item xs={12}>\n            <Typography variant=\"h5\">Kohtaus Ry</Typography>\n          </Grid>\n          <Grid item xs={6}>\n            <Grid container spacing={2}>\n              <Grid item xs={4}>\n                <Card className={classes.profileImage}>\n                  <img alt=\"Organization Logo\" src={DefaultImage} />\n                </Card>\n              </Grid>\n              <Grid item xs={8}>\n                <div>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    Short Description\n                  </Typography>\n                  <Typography variant=\"body1\">\n                    Kohtaus ry on vuonna 2014 perustettu yhdistys, jonka\n                    tarkoituksena on vähentää nuorten aikuisten yksinäisyyttä ja\n                    syrjään jäämistä.\n                  </Typography>\n                </div>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={6}>\n            Pidempi kuvaus\n          </Grid>\n        </Grid>\n      </div>\n      <div className={classes.bottomSection}>\n        <Grid className={classes.grid} container spacing={4}>\n          {/* Left Column */}\n          <Grid item xs={12} md={6}>\n            <Services />\n            <Locations />\n            <Contacts />\n          </Grid>\n          {/* Right Column */}\n          <Grid item xs={12} md={6}>\n            <Targets />\n            <Keywords />\n            <Feeds />\n          </Grid>\n        </Grid>\n      </div>\n      <div></div>\n    </div>\n  );\n};\n","/**\r\n * @file A neat little helper box with text and an info icon.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  infoSection: {\r\n    display: 'flex',\r\n    marginTop: theme.spacing(2),\r\n    color: theme.palette.text.secondary\r\n  },\r\n  infoIcon: {\r\n    width: 16,\r\n    height: 16,\r\n    marginRight: theme.spacing(1),\r\n    fill: theme.palette.primary.main\r\n  }\r\n}));\r\n\r\nexport const HelpBox = ({ className = '', children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box className={`${classes.infoSection} ${className}`}>\r\n      <InfoIcon className={classes.infoIcon} />\r\n      <Typography variant=\"body2\">{children}</Typography>\r\n    </Box>\r\n  );\r\n};\r\n","/**\n * @file Renders and manages the functionality of the \"Choose Multiple\" question options.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport DragIndicatorIcon from '@material-ui/icons/DragIndicator';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport React from 'react';\n\nconst data = {\n  options: ['Option #1', 'Option #2', 'Option #3', 'Option #4', 'Option #5']\n};\n\nconst useStyles = makeStyles(theme => ({\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  option: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: 8,\n    maxWidth: 500\n  },\n  optionInput: {\n    flex: 1,\n    marginLeft: 12,\n    marginRight: 20\n  },\n  optionButton: {\n    marginTop: theme.spacing(1),\n    marginLeft: theme.spacing(4)\n  }\n}));\n\nexport const QuestionChooseMultiple = () => {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.section}>\n      <Typography variant=\"subtitle2\">Options</Typography>\n      {data.options.map(x => (\n        <Box className={classes.option}>\n          <CheckBoxOutlineBlankIcon />\n          <TextField className={classes.optionInput} margin=\"dense\" value={x} />\n          <DragIndicatorIcon color=\"disabled\" />\n        </Box>\n      ))}\n\n      <Button\n        color=\"primary\"\n        size=\"small\"\n        className={classes.optionButton}\n        startIcon={<AddIcon />}\n      >\n        Add Option\n      </Button>\n    </Box>\n  );\n};\n","/**\r\n * @file Default data for different question type options. This will be used when adding a new question to the survey.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Translation from './questionLocale.json';\r\nimport Locale from '../Locale';\r\nimport uuid from 'uuid/v4';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst defaults = {\r\n  selectOne: {\r\n    one: index => ({\r\n      id: uuid(),\r\n      name: `${l('questionOptionDefaultName')} #${index + 1}`,\r\n      score: index,\r\n      route: null,\r\n      isOther: false\r\n    }),\r\n    many: [\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #1`,\r\n        score: 0,\r\n        route: null,\r\n        isOther: false\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #2`,\r\n        score: 1,\r\n        route: null,\r\n        isOther: false\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #3`,\r\n        score: 2,\r\n        route: null,\r\n        isOther: true\r\n      }\r\n    ]\r\n  },\r\n  selectMultiple: {\r\n    one: index => ({\r\n      id: uuid(),\r\n      name: `${l('questionOptionDefaultName')} #${index + 1}`,\r\n      score: index,\r\n      route: null\r\n    }),\r\n    many: [\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #1`,\r\n        score: 0,\r\n        route: null\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #2`,\r\n        score: 1,\r\n        route: null\r\n      },\r\n      {\r\n        id: uuid(),\r\n        name: `${l('questionOptionDefaultName')} #3`,\r\n        score: 2,\r\n        route: null\r\n      }\r\n    ]\r\n  },\r\n  text: {\r\n    many: [\r\n      {\r\n        id: uuid(),\r\n        name: l('questionOptionNameLabel'),\r\n        score: 0,\r\n        route: null\r\n      }\r\n    ]\r\n  }\r\n};\r\n\r\nexport default defaults;\r\n","/**\n * @file Helper functions for question logic and data that are used in multiple different components.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Translation from './questionLocale.json';\nimport Locale from '../Locale';\nimport uuid from 'uuid/v4';\nimport OptionDefaults from './QuestionOptionDefaults';\n\nconst l = Locale(Translation);\n\n/**\n * List all possible outgoing routes for a question.\n */\nexport const listPossibleRoutes = (questionList, questionIndex) => {\n  return [...questionList.filter((x, i) => i > questionIndex)];\n};\n\n/**\n * List all active incoming routes for a question.\n */\nexport const listIncomingRoutes = (questionList, questionIndex) => {\n  const question = questionList[questionIndex];\n\n  let routeList = [];\n  for (const q of questionList) {\n    routeList = [\n      ...routeList,\n      ...q.options\n        .filter(x => x.route === question.id)\n        .map(x => ({ question: q, option: x }))\n    ];\n  }\n\n  if (questionIndex !== 0 && !questionList[questionIndex - 1].defaultRoute) {\n    routeList.unshift({\n      option: null,\n      question: questionList[questionIndex - 1]\n    });\n  }\n\n  for (const route of routeList) {\n    if (route.question && route.question.type === 'text' && route.option) {\n      route.option.name = l('questionOptionEmptyRouteLabel');\n    }\n  }\n\n  return routeList;\n};\n\n/**\n * List all active outgoing routes for a question.\n */\nexport const listOutgoingRoutes = (questionList, questionIndex) => {\n  const question = questionList[questionIndex];\n\n  const routeList = question.options\n    .filter(x => x.route)\n    .map(x => ({\n      option: x,\n      question: questionList.find(y => y.id === x.route)\n    }));\n\n  let defaultRoute = getDefaultRoute(questionList, questionIndex);\n  if (defaultRoute === 'end' || !defaultRoute) {\n    defaultRoute = { option: null, question: null };\n  } else {\n    defaultRoute = {\n      option: null,\n      question: questionList.find(x => x.id === defaultRoute.id)\n    };\n  }\n\n  if (routeList.length < question.options.length || question.type === 'text') {\n    routeList.push(defaultRoute);\n  }\n\n  if (question.type === 'text') {\n    for (let route of routeList) {\n      if (route.option) {\n        route.option.name = l('questionOptionEmptyRouteLabel');\n      }\n    }\n  }\n\n  return routeList;\n};\n\n/**\n * Get the default next question for a specific question.\n */\nexport const getDefaultRoute = (questionList, questionIndex) => {\n  const question = questionList[questionIndex];\n\n  let defaultRoute = null;\n  if (\n    question.defaultRoute === 'end' ||\n    (!question.defaultRoute && questionList.length === questionIndex + 1)\n  ) {\n    defaultRoute = 'end';\n  } else if (question.defaultRoute) {\n    defaultRoute = questionList.find(x => x.id === question.defaultRoute);\n  } else {\n    defaultRoute = questionList[questionIndex + 1];\n  }\n\n  return defaultRoute;\n};\n\n/**\n * Get the number of a default next question for a specific question.\n */\nexport const getDefaultRouteNumber = (questionList, questionIndex) => {\n  const route = getDefaultRoute(questionList, questionIndex);\n  if (route === 'end') return null;\n  return route ? `${route.index + 1}.` : null;\n};\n\n/**\n * Decide if a \"modified score\" badge should be visible in a question.\n */\nexport const checkScoreStatus = question => {\n  // TODO: Add support for custom score\n\n  if (question.type === 'text') return false;\n  if (question.type === 'selectOne' || question.type === 'selectMultiple') {\n    for (let i = 0; i < question.options.length; i++) {\n      if (question.options[i].score !== i) return true;\n    }\n  }\n};\n\n/**\n * Decide if a \"modified route\" badge should be visible in a question.\n */\nexport const checkRouteStatus = question => {\n  if (question.defaultRoute) return true;\n  for (const option of question.options) {\n    if (option.route) return true;\n  }\n\n  return false;\n};\n\n/**\n * Generate the data for a new empty question with default values fo type.\n */\nexport const generateEmptyQuestion = (index, type) => {\n  const id = uuid();\n\n  return {\n    id,\n    index,\n    title: `${l('questionDefaultName')} #${index + 1}`,\n    type,\n    defaultRoute: null,\n    options: [...OptionDefaults[type].many],\n    score: [['id.score']]\n  };\n};\n\n/**\n * Create a new empty question of type.\n */\nexport const handleSurveyQuestionCreate = (survey, type) => {\n  let surveyUpdate = { ...survey };\n  surveyUpdate.questions = [\n    ...surveyUpdate.questions,\n    { ...generateEmptyQuestion(surveyUpdate.questions.length, type) }\n  ];\n\n  return surveyUpdate;\n};\n\n/**\n * Update a specific question.\n */\nexport const handleSurveyQuestionUpdate = (survey, index, question) => {\n  let surveyUpdate = { ...survey };\n  surveyUpdate.questions[index] = {\n    ...surveyUpdate.questions[index],\n    ...question\n  };\n\n  return surveyUpdate;\n};\n\n/**\n * Switch places of two specific questions.\n */\nexport const handleSurveyQuestionReorder = (survey, a, b) => {\n  let surveyUpdate = { ...survey };\n  let questionCache = surveyUpdate.questions[a];\n\n  surveyUpdate.questions[a] = surveyUpdate.questions[b];\n  surveyUpdate.questions[b] = questionCache;\n\n  surveyUpdate.questions = surveyUpdate.questions.map((x, i) => ({\n    ...x,\n    index: i\n  }));\n\n  return surveyUpdate;\n};\n\n/**\n * Create a new empty option with default values fo type.\n */\nexport const handleSurveyOptionCreate = (survey, questionIndex, type) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[questionIndex] };\n\n  questionUpdate.options.push(\n    OptionDefaults[type].one(questionUpdate.options.length)\n  );\n\n  surveyUpdate.questions[questionIndex] = questionUpdate;\n\n  return surveyUpdate;\n};\n\n/**\n * Update a specific option.\n */\nexport const handleSurveyOptionUpdate = (\n  survey,\n  questionIndex,\n  optionIndex,\n  option\n) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[questionIndex] };\n\n  questionUpdate.options[optionIndex] = {\n    ...questionUpdate.options[optionIndex],\n    ...option\n  };\n\n  surveyUpdate.questions[questionIndex] = questionUpdate;\n\n  return surveyUpdate;\n};\n\n/**\n * Switch places of two specific options.\n */\nexport const handleSurveyOptionReorder = (survey, index, a, b) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[index] };\n  let optionCache = questionUpdate.options[a];\n\n  questionUpdate.options[a] = questionUpdate.options[b];\n  questionUpdate.options[b] = optionCache;\n\n  surveyUpdate.questions[index] = questionUpdate;\n\n  return surveyUpdate;\n};\n\n/**\n * Remove a specific option.\n */\nexport const handleSurveyOptionRemove = (\n  survey,\n  questionIndex,\n  optionIndex\n) => {\n  let surveyUpdate = { ...survey };\n  let questionUpdate = { ...surveyUpdate.questions[questionIndex] };\n\n  questionUpdate.options.splice(optionIndex, 1);\n\n  surveyUpdate.questions[questionIndex] = questionUpdate;\n\n  return surveyUpdate;\n};\n","/**\n * @file Route selector for a single question option.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CallSplitIcon from '@material-ui/icons/CallSplit';\nimport React from 'react';\nimport TextField from '../CachedInput';\nimport Locale from '../Locale';\nimport Translation from './questionLocale.json';\nimport { getDefaultRouteNumber, listPossibleRoutes } from './QuestionUtil';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  optionInputMenu: {\n    maxWidth: 500\n  },\n  optionInputMenuItem: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  optionIconLabel: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: -4\n  },\n  optionIconLabelIcon: {\n    marginRight: theme.spacing(0.75)\n  }\n}));\n\nexport const QuestionOptionRoute = ({\n  survey,\n  index,\n  value,\n  onChange,\n  helperText = l('questionOptionRouteInfo'),\n  className\n}) => {\n  const classes = useStyles();\n\n  const defaultNextQuestionNumber = getDefaultRouteNumber(\n    survey.questions,\n    index\n  );\n\n  const possibleRoutes = listPossibleRoutes(survey.questions, index);\n\n  return (\n    <TextField\n      select\n      className={className}\n      value={value}\n      onChange={onChange}\n      label={\n        <span className={classes.optionIconLabel}>\n          <CallSplitIcon\n            style={{ color: '#CD5B5B' }}\n            className={classes.optionIconLabelIcon}\n          />{' '}\n          {l('questionOptionRouteLabel')}\n        </span>\n      }\n      InputLabelProps={{\n        shrink: true\n      }}\n      SelectProps={{\n        MenuProps: {\n          className: classes.optionInputMenu\n        }\n      }}\n      helperText={helperText}\n      margin=\"normal\"\n    >\n      <MenuItem value={null} className={classes.optionInputMenuItem}>\n        <em>Default ({defaultNextQuestionNumber || 'End'})</em>\n      </MenuItem>\n\n      {possibleRoutes.map(x => (\n        <MenuItem value={x.id} key={x.id}>\n          {x.index + 1}. {x.title}\n        </MenuItem>\n      ))}\n\n      <MenuItem value=\"end\">End Survey</MenuItem>\n    </TextField>\n  );\n};\n","/**\n * @file Renders and manages the functionality of the \"Choose One\" question options.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked';\nimport SpellcheckIcon from '@material-ui/icons/Spellcheck';\nimport React from 'react';\nimport TextField from '../../CachedInput';\nimport { openDialog } from '../../ConfirmationDialog';\nimport Locale from '../../Locale';\nimport { QuestionOptionRoute } from '../QuestionOptionRoute';\nimport {\n  handleSurveyOptionCreate,\n  handleSurveyOptionRemove,\n  handleSurveyOptionReorder,\n  handleSurveyOptionUpdate\n} from '../QuestionUtil';\nimport Translation from '../questionLocale.json';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  badge: {\n    position: 'absolute',\n    display: 'block',\n    top: 0,\n    right: -6,\n    width: 12,\n    height: 12,\n    borderRadius: '50%',\n    backgroundColor: '#CD5B5B'\n  },\n  dialog: {\n    width: 600\n  },\n  option: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    padding: 0,\n    marginTop: 8,\n    borderRadius: 4,\n    border: `1px solid ${theme.palette.divider}`\n  },\n  optionContainer: {\n    display: 'flex',\n    flex: 1,\n    padding: theme.spacing(2),\n    maxWidth: 500\n  },\n  optionMain: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: theme.spacing(2)\n  },\n  optionAdvanced: {\n    display: 'flex'\n  },\n  optionSecondary: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(0)\n  },\n  optionInput: {\n    flex: 1,\n    marginLeft: 0,\n    marginTop: 0\n  },\n  optionInputSecondary: {\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: 0,\n    marginTop: theme.spacing(2)\n  },\n  optionInputMenu: {\n    maxWidth: 500\n  },\n  optionInputMenuItem: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  optionInputScore: {\n    marginLeft: 0,\n    marginRight: theme.spacing(3),\n    marginTop: theme.spacing(2),\n    width: 100\n  },\n  optionIconLabel: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: -4\n  },\n  optionIconLabelIcon: {\n    marginRight: theme.spacing(0.75)\n  },\n  optionButton: {\n    marginTop: theme.spacing(1)\n  },\n  optionMove: {\n    display: 'flex',\n    position: 'relative',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    padding: theme.spacing(1),\n    borderLeft: `1px solid ${theme.palette.divider}`\n  },\n  optionRemove: {\n    bottom: theme.spacing(1)\n  },\n  subtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(2)\n  }\n}));\n\nexport const QuestionChooseOne = ({ index, survey, question, setSurvey }) => {\n  const classes = useStyles();\n\n  const handleNameUpdate = option => name => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        name\n      })\n    );\n  };\n\n  const handleOtherUpdate = option => event => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        isOther: event.target.checked\n      })\n    );\n  };\n\n  const handleScoreUpdate = option => score => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        score\n      })\n    );\n  };\n\n  const handleRouteUpdate = option => route => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, option, {\n        route\n      })\n    );\n  };\n\n  const handleOptionCreate = () => {\n    setSurvey(handleSurveyOptionCreate(survey, index, question.type));\n  };\n\n  const handleOptionReorder = (option, direction) => () => {\n    if (direction !== -1 && direction !== 1) return;\n    if (option === 0 && direction === 1) return;\n    if (option === question.options.length - 1 && direction === -1) return;\n\n    setSurvey(\n      handleSurveyOptionReorder(survey, index, option, option - direction)\n    );\n  };\n\n  const handleOptionRemove = option => async () => {\n    const action = await openDialog({\n      title: 'Remove Option?',\n      description: 'This action cannot be undone, are you sure?'\n    });\n\n    if (action === 'confirm') {\n      setSurvey(handleSurveyOptionRemove(survey, index, option));\n    }\n  };\n\n  return (\n    <Box className={classes.section}>\n      <Typography variant=\"h6\">{l('questionOptionsText')}</Typography>\n      <Typography variant=\"body2\" className={classes.subtitle}>\n        {l('questionOptionsInfo')}\n      </Typography>\n\n      {question.options.map((x, i) => (\n        <Box key={x.id} className={classes.option}>\n          <Box className={classes.optionContainer}>\n            <RadioButtonUncheckedIcon />\n            <Box className={classes.optionMain}>\n              <TextField\n                className={classes.optionInput}\n                margin=\"dense\"\n                label={l('questionOptionNameLabel')}\n                InputLabelProps={{\n                  shrink: true\n                }}\n                value={x.name}\n                onChange={handleNameUpdate(i)}\n              />\n\n              <Box className={classes.optionAdvanced}>\n                <TextField\n                  className={classes.optionInputScore}\n                  margin=\"dense\"\n                  type=\"number\"\n                  label={\n                    <span className={classes.optionIconLabel}>\n                      <SpellcheckIcon\n                        style={{ color: '#56B47C' }}\n                        className={classes.optionIconLabelIcon}\n                      />{' '}\n                      {l('questionOptionScoreLabel')}\n                    </span>\n                  }\n                  InputLabelProps={{\n                    shrink: true\n                  }}\n                  InputProps={{\n                    style: {\n                      marginTop: 19\n                    }\n                  }}\n                  value={x.score}\n                  onChange={handleScoreUpdate(i)}\n                />\n\n                <QuestionOptionRoute\n                  survey={survey}\n                  index={index}\n                  value={x.route}\n                  onChange={handleRouteUpdate(i)}\n                  className={classes.optionInputSecondary}\n                />\n              </Box>\n              <Box className={classes.optionSecondary}>\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={x.isOther}\n                      onChange={handleOtherUpdate(i)}\n                      value=\"checkedB\"\n                      color=\"primary\"\n                    />\n                  }\n                  label={\n                    <Typography variant=\"body2\">\n                      Allow Explanation\n                      <Typography variant=\"caption\" display=\"block\">\n                        Show an optional text field when this option is picked\n                      </Typography>\n                    </Typography>\n                  }\n                />\n              </Box>\n            </Box>\n          </Box>\n          <Box className={classes.optionMove}>\n            <Tooltip title=\"Move Up\" placement=\"right\">\n              <IconButton\n                aria-label=\"move up\"\n                onClick={handleOptionReorder(i, 1)}\n              >\n                <KeyboardArrowUpIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Move Down\" placement=\"right\">\n              <IconButton\n                aria-label=\"move down\"\n                onClick={handleOptionReorder(i, -1)}\n              >\n                <KeyboardArrowDownIcon fontSize=\"small\" />\n              </IconButton>\n            </Tooltip>\n            <Box style={{ flex: 1 }} />\n            <Tooltip title=\"Remove\" placement=\"right\">\n              <IconButton\n                aria-label=\"remove\"\n                className={classes.optionRemove}\n                onClick={handleOptionRemove(i)}\n                size=\"small\"\n              >\n                <DeleteIcon fontSize=\"inherit\" />\n              </IconButton>\n            </Tooltip>\n          </Box>\n        </Box>\n      ))}\n\n      <Box style={{ display: 'flex', flexDirection: 'row-reverse' }}>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          className={classes.optionButton}\n          startIcon={<AddIcon />}\n          onClick={handleOptionCreate}\n        >\n          {l('questionOptionAddText')}\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file The route table for a single question. Will display all incoming and outgoing routes.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport React from 'react';\nimport Locale from '../Locale';\nimport Translation from './questionLocale.json';\nimport { listIncomingRoutes, listOutgoingRoutes } from './QuestionUtil';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  routeSection: {\n    marginBottom: theme.spacing(3)\n  },\n  table: {\n    tableLayout: 'fixed'\n  },\n  routeCell: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  routeIconCell: {},\n  routeIconCellIcon: {\n    width: 16,\n    height: 16\n  }\n}));\n\nexport const QuestionRouteTable = ({ index, survey }) => {\n  const classes = useStyles();\n\n  const incomingRoutes = listIncomingRoutes(survey.questions, index);\n  const outgoingRoutes = listOutgoingRoutes(survey.questions, index);\n\n  return (\n    <Box className={classes.routeSection}>\n      <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\n        {!!incomingRoutes.length && (\n          <TableHead>\n            <TableRow>\n              <TableCell\n                width={16}\n              >{l`questionRouteTableDirectionIn`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableSource`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableOption`}</TableCell>\n            </TableRow>\n          </TableHead>\n        )}\n        <TableBody>\n          {incomingRoutes.map((x, i) => (\n            <TableRow key={i}>\n              <TableCell\n                width={16}\n                className={classes.routeIconCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                <ArrowForwardIcon\n                  className={classes.routeIconCellIcon}\n                  style={{ fill: '#56B47C' }}\n                />\n              </TableCell>\n              <TableCell\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                <span>{x.question.index + 1}.</span> {x.question.title}\n              </TableCell>\n              <TableCell\n                style={{ color: x.option ? 'inherit' : 'rgba(0, 0, 0, 0.54)' }}\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                {x.option ? x.option.name : l`questionRouteTableDefault`}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n        {!!outgoingRoutes.length && (\n          <TableHead>\n            <TableRow>\n              <TableCell\n                width={16}\n              >{l`questionRouteTableDirectionOut`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableOption`}</TableCell>\n              <TableCell width=\"50%\">{l`questionRouteTableDestination`}</TableCell>\n            </TableRow>\n          </TableHead>\n        )}\n        <TableBody>\n          {outgoingRoutes.map((x, i) => (\n            <TableRow key={i}>\n              <TableCell\n                width={16}\n                className={classes.routeIconCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                <ArrowBackIcon\n                  className={classes.routeIconCellIcon}\n                  style={{ fill: '#CD5B5B' }}\n                />\n              </TableCell>\n              <TableCell\n                style={{ color: x.option ? 'inherit' : 'rgba(0, 0, 0, 0.54)' }}\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                {x.option ? x.option.name : l`questionRouteTableDefault`}\n              </TableCell>\n              <TableCell\n                width=\"50%\"\n                className={classes.routeCell}\n                component=\"th\"\n                scope=\"row\"\n              >\n                {(x.option && x.option.route === 'end') || !x.question ? (\n                  l`questionRouteTableEndSurvey`\n                ) : (\n                  <>\n                    <span>{x.question.index + 1}.</span> {x.question.title}\n                  </>\n                )}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </Box>\n  );\n};\n","/**\r\n * @file Handle everything to do with the custom score data.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\n\r\nconst l = Locale(Translation);\r\n\r\nexport const SCORE_TYPE = {\r\n  ID: 1,\r\n  VALUE: 2,\r\n  CONDITIONAL: 3,\r\n  OPERATOR: 4,\r\n  COMPARATOR: 5\r\n};\r\n\r\nexport const OPERATOR_TYPE = {\r\n  ADD: 'addition',\r\n  SUBTRACT: 'subtraction',\r\n  MULTIPLY: 'multiplication',\r\n  DIVIDE: 'division'\r\n};\r\n\r\nexport const OPERATOR_SIGN = {\r\n  '+': OPERATOR_TYPE.ADD,\r\n  '-': OPERATOR_TYPE.SUBTRACT,\r\n  '*': OPERATOR_TYPE.MULTIPLY,\r\n  '/': OPERATOR_TYPE.DIVIDE\r\n};\r\n\r\nexport const COMPARATOR_TYPE = {\r\n  GREATER_THAN: 1,\r\n  LESS_THAN: 2,\r\n  GREATER_THAN_OR_EQUAL: 3,\r\n  LESS_THAN_OR_EQUAL: 4,\r\n  EQUAL: 5,\r\n  AND: 6,\r\n  OR: 7\r\n};\r\n\r\nexport const COMPARATOR_SIGN = {\r\n  '>': COMPARATOR_TYPE.GREATER_THAN,\r\n  '<': COMPARATOR_TYPE.LESS_THAN,\r\n  '>=': COMPARATOR_TYPE.GREATER_THAN_OR_EQUAL,\r\n  '<=': COMPARATOR_TYPE.LESS_THAN_OR_EQUAL,\r\n  '=': COMPARATOR_TYPE.EQUAL,\r\n  '&': COMPARATOR_TYPE.AND,\r\n  '|': COMPARATOR_TYPE.OR\r\n};\r\n\r\nexport const parseScore = score => {\r\n  const parsedScore = {\r\n    id: null,\r\n    name: '',\r\n    steps: []\r\n  };\r\n\r\n  for (const row of score) {\r\n    const parts = row.split('.');\r\n    const type = parts[0];\r\n\r\n    if (type === 'id') {\r\n      parsedScore.id = parts[1];\r\n      parsedScore.name = row\r\n        .split('.')\r\n        .splice(2)\r\n        .join('.');\r\n\r\n      if (parsedScore.id === 'score') {\r\n        parsedScore.name = l`questionScoreSourceDynamicDefaultTitle`;\r\n      }\r\n    }\r\n\r\n    if (type === 'value') {\r\n      const from = parts[1];\r\n\r\n      if (from === 'static') {\r\n        parsedScore.steps.push({\r\n          type: SCORE_TYPE.VALUE,\r\n          from: null,\r\n          value: `${parts[2]}.${parts[3] || '0'}`\r\n        });\r\n      } else if (from === 'placeholder') {\r\n        parsedScore.steps.push({\r\n          type: SCORE_TYPE.VALUE,\r\n          from: null,\r\n          value: null\r\n        });\r\n      } else {\r\n        parsedScore.steps.push({\r\n          type: SCORE_TYPE.VALUE,\r\n          from: parts[1],\r\n          value: parts[2]\r\n        });\r\n      }\r\n    }\r\n\r\n    if (type === 'operator') {\r\n      parsedScore.steps.push({\r\n        type: SCORE_TYPE.OPERATOR,\r\n        sign: OPERATOR_SIGN[parts[1]]\r\n      });\r\n    }\r\n\r\n    if (type === 'conditional') {\r\n      parsedScore.steps.push({\r\n        type: SCORE_TYPE.CONDITIONAL,\r\n        step: parts[1]\r\n      });\r\n    }\r\n\r\n    if (type === 'comparator') {\r\n      parsedScore.steps.push({\r\n        type: SCORE_TYPE.COMPARATOR,\r\n        compare: COMPARATOR_SIGN[parts[1]]\r\n      });\r\n    }\r\n  }\r\n\r\n  return parsedScore;\r\n};\r\n\r\nexport const createValue = ({ from = null, value }) => {\r\n  if (from === null && value === null) return 'value.placeholder';\r\n  return `value.${from ? from : 'static'}.${value}`;\r\n};\r\n\r\nexport const createOperator = type => {\r\n  return `operator.${Object.keys(OPERATOR_SIGN).find(\r\n    key => OPERATOR_SIGN[key] === type\r\n  )}`;\r\n};\r\n\r\nexport const createConditional = () => {\r\n  return [\r\n    'conditional.if',\r\n    'value.placeholder',\r\n    'conditional.then',\r\n    'value.placeholder',\r\n    'conditional.else',\r\n    'value.placeholder',\r\n    'conditional.end'\r\n  ];\r\n};\r\n\r\nexport const createComparator = type => {\r\n  return `comparator.${Object.keys(COMPARATOR_SIGN).find(\r\n    key => COMPARATOR_SIGN[key] === type\r\n  )}`;\r\n};\r\n","/**\r\n * @file The source picker for a score input. Lists all possible input sources and options. Used by {@link QuestionScoreDialog}.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\r\nimport React from 'react';\r\nimport { HelpBox } from '../HelpBox';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport { createValue, parseScore } from './Score';\r\n\r\nconst l = Locale(Translation);\r\n\r\nlet setOpenState = null;\r\nlet currentSourceId = null;\r\nlet currentQuestionId = null;\r\nlet setContentState = null;\r\nlet setSectionState = null;\r\nlet setSourceState = null;\r\nlet setValueState = null;\r\nlet resolveDialog = null;\r\nlet isFirst = false;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.paper,\r\n    position: 'relative',\r\n    overflow: 'auto',\r\n    maxHeight: 250\r\n  },\r\n  listSection: {\r\n    backgroundColor: 'inherit'\r\n  },\r\n  ul: {\r\n    backgroundColor: 'inherit',\r\n    padding: 0\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4)\r\n  },\r\n  header: {\r\n    marginTop: theme.spacing(2)\r\n  },\r\n  section: {\r\n    paddingLeft: theme.spacing(2)\r\n  },\r\n  sectionInput: {\r\n    marginTop: theme.spacing(1),\r\n    paddingLeft: theme.spacing(3.9)\r\n  }\r\n}));\r\n\r\nconst closeDialog = action => {\r\n  setOpenState(false);\r\n\r\n  if (action === 'cancel' || action === 'dismiss') {\r\n    resolveDialog(null);\r\n    resolveDialog = null;\r\n    return;\r\n  }\r\n\r\n  if (resolveDialog) {\r\n    resolveDialog(action);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = (id = null, questionId = null, first = false) =>\r\n  new Promise(resolve => {\r\n    setContentState(questionId ? [questionId] : []);\r\n    setSectionState(null);\r\n    setSourceState(null);\r\n    setValueState(null);\r\n\r\n    isFirst = first;\r\n    currentSourceId = id;\r\n    currentQuestionId = questionId;\r\n    resolveDialog = resolve;\r\n\r\n    setOpenState(true);\r\n  });\r\n\r\nconst QuestionScoreInputDialog = ({ survey }) => {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [openList, setOpenList] = React.useState([]);\r\n  const [selectedSection, setSelectedSection] = React.useState(null);\r\n  const [selectedSource, setSelectedSource] = React.useState(null);\r\n\r\n  const [value, setValue] = React.useState(null);\r\n\r\n  const handleValueChange = event => {\r\n    setValue(!event.target.value ? null : Number(event.target.value));\r\n\r\n    if (selectedSection !== 'static') {\r\n      setSelectedSection('static');\r\n      setSelectedSource(null);\r\n    }\r\n  };\r\n\r\n  setOpenState = setOpen;\r\n  setContentState = setOpenList;\r\n  setSectionState = setSelectedSection;\r\n  setSourceState = setSelectedSource;\r\n  setValueState = setValue;\r\n\r\n  let isConfirmEnabled = false;\r\n  if (selectedSection === 'source' && selectedSource) {\r\n    isConfirmEnabled = true;\r\n  }\r\n  if (selectedSection === 'static' && value !== '' && value !== null) {\r\n    isConfirmEnabled = true;\r\n  }\r\n  if (selectedSection === 'if') {\r\n    isConfirmEnabled = true;\r\n  }\r\n\r\n  const handleClose = action => () => {\r\n    if (action === 'confirm') {\r\n      if (selectedSection === 'source' && selectedSource) {\r\n        closeDialog(\r\n          createValue({\r\n            from: selectedSource.question,\r\n            value: selectedSource.score\r\n          })\r\n        );\r\n      } else if (selectedSection === 'static' && (value || value === 0)) {\r\n        closeDialog(createValue({ value }));\r\n      } else if (selectedSection === 'if') {\r\n        closeDialog('if');\r\n      } else {\r\n        closeDialog('cancel');\r\n      }\r\n    } else {\r\n      closeDialog(action);\r\n    }\r\n  };\r\n\r\n  const toggleListOpen = question => () => {\r\n    const list = [...openList];\r\n    const index = list.indexOf(question.id);\r\n    if (index >= 0) {\r\n      list.splice(index, 1);\r\n    } else {\r\n      list.push(question.id);\r\n    }\r\n\r\n    setOpenList(list);\r\n  };\r\n\r\n  const handleRadioButtonToggle = section => event => {\r\n    if (event.target.checked) setSelectedSection(section);\r\n\r\n    if (event.target.checked && section === 'static') {\r\n      setSelectedSource(null);\r\n    }\r\n  };\r\n\r\n  const handleQuestionSourceSelect = (question, score) => () => {\r\n    setSelectedSource(question ? { question, score } : null);\r\n\r\n    if (question && selectedSection !== 'source') {\r\n      setSelectedSection('source');\r\n    }\r\n  };\r\n\r\n  let questionList = [...survey.questions];\r\n  if (currentQuestionId)\r\n    questionList = questionList.filter(x => x.id === currentQuestionId);\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose(null)}\r\n      aria-labelledby=\"input-dialog-title\"\r\n      aria-describedby=\"input-dialog-description\"\r\n      maxWidth=\"xs\"\r\n      fullWidth\r\n      fullHeight\r\n    >\r\n      <DialogTitle id=\"input-dialog-title\">{l`questionScoreSourceTitle`}</DialogTitle>\r\n      <DialogContent>\r\n        <FormControlLabel\r\n          value=\"if\"\r\n          control={\r\n            <Radio\r\n              checked={selectedSection === 'if'}\r\n              onChange={handleRadioButtonToggle('if')}\r\n            />\r\n          }\r\n          label={`Logic \"If\" statement`}\r\n        />\r\n\r\n        <FormControlLabel\r\n          value=\"source\"\r\n          control={\r\n            <Radio\r\n              checked={selectedSection === 'source'}\r\n              onChange={handleRadioButtonToggle('source')}\r\n            />\r\n          }\r\n          label={l`questionScoreSourceDynamicRadio`}\r\n        />\r\n\r\n        <Box\r\n          className={classes.section}\r\n          style={{ opacity: selectedSection === 'static' ? 0.5 : 1 }}\r\n        >\r\n          <List className={classes.root} subheader={<li />}>\r\n            {/*\r\n          <li key={`question-section`} className={classes.listSection}>\r\n            <ul className={classes.ul}>\r\n              <ListSubheader>Questions</ListSubheader>\r\n          */}\r\n\r\n            {questionList.map(question => (\r\n              <Box key={`question-${question.id}`}>\r\n                <ListItem\r\n                  button\r\n                  onClick={toggleListOpen(question)}\r\n                  key={`question-${question.id}`}\r\n                >\r\n                  <ListItemText\r\n                    disableTypography\r\n                    primary={\r\n                      <Typography\r\n                        variant=\"body1\"\r\n                        style={{ fontWeight: 'bold' }}\r\n                        noWrap\r\n                      >\r\n                        {question.index + 1}. {question.title}\r\n                      </Typography>\r\n                    }\r\n                  />\r\n                  {openList.includes(question.id) ? (\r\n                    <ExpandLess />\r\n                  ) : (\r\n                    <ExpandMore />\r\n                  )}\r\n                </ListItem>\r\n                <Collapse\r\n                  in={openList.includes(question.id)}\r\n                  timeout=\"auto\"\r\n                  unmountOnExit\r\n                  key={`question-${question.id}-collapse`}\r\n                >\r\n                  <List component=\"div\" disablePadding>\r\n                    <ListItem\r\n                      button\r\n                      key={`question-${question.id}-score`}\r\n                      role={undefined}\r\n                      onClick={handleQuestionSourceSelect(question.id, 'score')}\r\n                    >\r\n                      <ListItemIcon>\r\n                        <StarRoundedIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        id={`question-${question.id}-score-text`}\r\n                        primary={l`questionScoreSourceDynamicDefaultTitle`}\r\n                        secondary={l`questionScoreSourceDynamicDefaultDescription`}\r\n                      />\r\n                      <ListItemSecondaryAction>\r\n                        <Checkbox\r\n                          edge=\"start\"\r\n                          checked={\r\n                            selectedSource !== null &&\r\n                            selectedSource.question === question.id &&\r\n                            selectedSource.score === 'score'\r\n                          }\r\n                          tabIndex={-1}\r\n                          disableRipple\r\n                          inputProps={{\r\n                            'aria-labelledby': `question-${question.id}-score-text`\r\n                          }}\r\n                          onChange={handleQuestionSourceSelect(\r\n                            question.id,\r\n                            'score'\r\n                          )}\r\n                        />\r\n                      </ListItemSecondaryAction>\r\n                    </ListItem>\r\n\r\n                    {question.score\r\n                      .filter(\r\n                        x =>\r\n                          x[0].split('.')[1] !== 'score' &&\r\n                          x[0].split('.')[1] !== currentSourceId\r\n                      )\r\n                      .map(parseScore)\r\n                      .map(score => (\r\n                        <ListItem\r\n                          button\r\n                          key={`${question.id}-${score.id}`}\r\n                          onClick={handleQuestionSourceSelect(\r\n                            question.id,\r\n                            score.id\r\n                          )}\r\n                        >\r\n                          <ListItemIcon>\r\n                            <StarBorderRoundedIcon />\r\n                          </ListItemIcon>\r\n                          <ListItemText\r\n                            id={`${question.id}-${score.id}-text`}\r\n                            primary={score.name}\r\n                            secondary={l`questionScoreSourceDynamicCustomDescription`}\r\n                          />\r\n                          <ListItemSecondaryAction>\r\n                            <Checkbox\r\n                              edge=\"start\"\r\n                              checked={\r\n                                selectedSource !== null &&\r\n                                selectedSource.question === question.id &&\r\n                                selectedSource.score === score.id\r\n                              }\r\n                              tabIndex={-1}\r\n                              disableRipple\r\n                              onChange={handleQuestionSourceSelect(\r\n                                question.id,\r\n                                score.id\r\n                              )}\r\n                              inputProps={{\r\n                                'aria-labelledby': `${question.id}-${score.id}-text`\r\n                              }}\r\n                            />\r\n                          </ListItemSecondaryAction>\r\n                        </ListItem>\r\n                      ))}\r\n                  </List>\r\n                </Collapse>\r\n              </Box>\r\n            ))}\r\n            {/*\r\n            </ul>\r\n          </li>\r\n              */}\r\n          </List>\r\n        </Box>\r\n\r\n        <FormControlLabel\r\n          value=\"static\"\r\n          control={\r\n            <Radio\r\n              checked={selectedSection === 'static'}\r\n              onChange={handleRadioButtonToggle('static')}\r\n            />\r\n          }\r\n          label={l`questionScoreSourceStaticRadio`}\r\n        />\r\n\r\n        <Box\r\n          className={classes.sectionInput}\r\n          style={{ opacity: selectedSection === 'source' ? 0.5 : 1 }}\r\n        >\r\n          <TextField\r\n            autoFocus\r\n            id=\"value\"\r\n            label={l`questionScoreSourceStaticLabel`}\r\n            fullWidth\r\n            value={value}\r\n            onChange={handleValueChange}\r\n            variant=\"outlined\"\r\n            type=\"number\"\r\n            autoComplete=\"false\"\r\n            inputProps={{\r\n              autocompletetype: 'false'\r\n            }}\r\n          />\r\n        </Box>\r\n\r\n        {isFirst && <HelpBox>{l`questionScoreSourceHelp`}</HelpBox>}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose('cancel')} color=\"primary\">\r\n          {l`dialogButtonCancel`}\r\n        </Button>\r\n        <Button\r\n          onClick={handleClose('confirm')}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          disabled={!isConfirmEnabled}\r\n        >\r\n          {l`dialogButtonConfirm`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuestionScoreInputDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\r\n * @file Displays the logic that calculates a single score. Handles adding to and modifying that logic.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\r\nimport {\r\n  mdiCalculator,\r\n  mdiCalculatorVariant,\r\n  mdiCloseBox,\r\n  mdiDivisionBox,\r\n  mdiMinusBox,\r\n  mdiPlusBox,\r\n  mdiCodeGreaterThan,\r\n  mdiCodeLessThan,\r\n  mdiCodeGreaterThanOrEqual,\r\n  mdiCodeLessThanOrEqual,\r\n  mdiEqualBox,\r\n  mdiCircle,\r\n  mdiCircleOutline\r\n} from '@mdi/js';\r\nimport Icon from '@mdi/react';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport * as inputDialog from './QuestionScoreInputDialog';\r\nimport {\r\n  createConditional,\r\n  createOperator,\r\n  OPERATOR_TYPE,\r\n  parseScore,\r\n  SCORE_TYPE,\r\n  COMPARATOR_TYPE,\r\n  createComparator\r\n} from './Score';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst mathIconList = {\r\n  addition: mdiPlusBox,\r\n  subtraction: mdiMinusBox,\r\n  multiplication: mdiCloseBox,\r\n  division: mdiDivisionBox\r\n};\r\n\r\nconst comparatorIconList = {\r\n  1: mdiCodeGreaterThan,\r\n  2: mdiCodeLessThan,\r\n  3: mdiCodeGreaterThanOrEqual,\r\n  4: mdiCodeLessThanOrEqual,\r\n  5: mdiEqualBox,\r\n  6: mdiCircle,\r\n  7: mdiCircleOutline\r\n};\r\n\r\nlet setOpenState = null;\r\nlet currentScoreId = null;\r\nlet currentQuestionId = null;\r\nlet setContentState = null;\r\nlet resolveDialog = null;\r\nlet menuEditIndex = null;\r\nlet menuEditReplace = true;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper,\r\n    position: 'relative',\r\n    overflow: 'auto',\r\n    maxHeight: 300\r\n  },\r\n  listSection: {\r\n    backgroundColor: 'inherit'\r\n  },\r\n  ul: {\r\n    backgroundColor: 'inherit',\r\n    padding: 0\r\n  },\r\n  mdi: {\r\n    fill: theme.palette.primary.main\r\n  },\r\n  button: {\r\n    marginLeft: 0\r\n  },\r\n  buttonItem: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    padding: 0,\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2)\r\n  },\r\n  helperArrow: {\r\n    position: 'absolute',\r\n    marginTop: theme.spacing(4.5),\r\n    left: theme.spacing(1.5),\r\n    width: 16,\r\n    height: 16\r\n  },\r\n  if: {\r\n    borderLeft: `3px solid ${theme.palette.primary.main}`\r\n  }\r\n}));\r\n\r\nconst closeDialog = data => {\r\n  setOpenState(false);\r\n  if (resolveDialog) {\r\n    resolveDialog(data);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = (questionId = null, score) =>\r\n  new Promise(resolve => {\r\n    setContentState(score);\r\n    const scoreStep = parseScore(score);\r\n    currentScoreId = scoreStep.id;\r\n\r\n    currentQuestionId = questionId;\r\n\r\n    resolveDialog = resolve;\r\n    setOpenState(true);\r\n  });\r\n\r\nconst QuestionScoreDialog = ({ survey }) => {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [input, setInput] = React.useState([]);\r\n  const theme = useTheme();\r\n\r\n  setOpenState = setOpen;\r\n  setContentState = setInput;\r\n\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n  const [comparatorMenuAnchorEl, setComparatorMenuAnchorEl] = React.useState(\r\n    null\r\n  );\r\n\r\n  const mathOperatorTexts = l('questionScoreOperatorText');\r\n  const comparatorTexts = l('questionScoreComparatorText');\r\n\r\n  const scoreStep = parseScore(input);\r\n\r\n  let depthLevel = 0;\r\n  let lastStep = null;\r\n\r\n  const handleMenuClick = (index = null, replace = true) => event => {\r\n    menuEditIndex = index;\r\n    menuEditReplace = replace;\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = action => async () => {\r\n    setMenuAnchorEl(null);\r\n    if (!action) return;\r\n\r\n    if (menuEditIndex !== null && menuEditReplace) {\r\n      const inputCache = [...input];\r\n      inputCache[menuEditIndex] = createOperator(action);\r\n\r\n      setInput([...inputCache]);\r\n      return;\r\n    }\r\n\r\n    const value = await inputDialog.openDialog(\r\n      currentScoreId,\r\n      currentQuestionId,\r\n      input.length <= 1\r\n    );\r\n\r\n    if (value || value === 0) {\r\n      const inputCombiner = createOperator(action);\r\n      const inputValue =\r\n        value === 'if'\r\n          ? [inputCombiner, ...createConditional()]\r\n          : [inputCombiner, value];\r\n\r\n      if (menuEditIndex !== null) {\r\n        const inputCache = [...input];\r\n        inputCache.splice(menuEditIndex + 1, 0, ...inputValue);\r\n        setInput([...inputCache]);\r\n      } else {\r\n        setInput([...input, inputCombiner, value]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleComparatorMenuClick = (index = null, replace = true) => event => {\r\n    menuEditIndex = index;\r\n    menuEditReplace = replace;\r\n    setComparatorMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleComparatorMenuClose = action => async () => {\r\n    setComparatorMenuAnchorEl(null);\r\n\r\n    if (!action) return;\r\n\r\n    if (menuEditIndex !== null && menuEditReplace) {\r\n      const inputCache = [...input];\r\n      inputCache[menuEditIndex] = createComparator(action);\r\n\r\n      setInput([...inputCache]);\r\n      return;\r\n    }\r\n\r\n    const value = await inputDialog.openDialog(\r\n      currentScoreId,\r\n      currentQuestionId,\r\n      input.length <= 1\r\n    );\r\n\r\n    if (value || value === 0) {\r\n      const inputComparator = createComparator(action);\r\n      const inputValue =\r\n        value === 'if'\r\n          ? [inputComparator, ...createConditional()]\r\n          : [inputComparator, value];\r\n\r\n      if (menuEditIndex !== null) {\r\n        const inputCache = [...input];\r\n        inputCache.splice(menuEditIndex + 1, 0, ...inputValue);\r\n        setInput([...inputCache]);\r\n      } else {\r\n        setInput([...input, inputComparator, value]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = action => () => {\r\n    if (action === 'confirm') {\r\n      closeDialog([...input]);\r\n    } else {\r\n      closeDialog(null);\r\n    }\r\n  };\r\n\r\n  const handleAddSourceClick = (index = null) => async event => {\r\n    if (index === null && scoreStep.steps.length > 0) {\r\n      return handleMenuClick(null)(event);\r\n    }\r\n\r\n    const value = await inputDialog.openDialog(\r\n      currentScoreId,\r\n      currentQuestionId,\r\n      input.length <= 1\r\n    );\r\n\r\n    if (value || value === 0) {\r\n      let insertValue = [value];\r\n      if (value === 'if') {\r\n        insertValue = createConditional();\r\n      }\r\n\r\n      if (index === null) {\r\n        setInput([...input, ...insertValue]);\r\n      } else {\r\n        const inputCache = [...input];\r\n        inputCache.splice(index, 1, ...insertValue);\r\n        setInput([...inputCache]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRemove = index => () => {\r\n    if (index <= 1) return;\r\n\r\n    const inputCache = [...input];\r\n    inputCache.splice(index - 1, 2);\r\n    setInput([...inputCache]);\r\n  };\r\n\r\n  const renderInlineButtons = (i, depthStyle, comparator = false) => (\r\n    <ListItem button key={i} className={classes.if} style={depthStyle}>\r\n      <ListItemText>\r\n        {comparator && (\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={handleComparatorMenuClick(i + 1, false)}\r\n            startIcon={\r\n              <Icon\r\n                path={mdiCodeGreaterThanOrEqual}\r\n                size={1}\r\n                color={theme.palette.primary.main}\r\n              />\r\n            }\r\n          >\r\n            Compare\r\n          </Button>\r\n        )}\r\n        <Button\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          onClick={handleMenuClick(i + 1, false)}\r\n          style={{ marginLeft: comparator ? theme.spacing(1) : 0 }}\r\n          startIcon={\r\n            <Icon\r\n              path={mdiCalculatorVariant}\r\n              size={1}\r\n              color={theme.palette.primary.main}\r\n            />\r\n          }\r\n        >\r\n          Combine\r\n        </Button>\r\n      </ListItemText>\r\n    </ListItem>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose('dismiss')}\r\n        aria-labelledby=\"input-dialog-title\"\r\n        aria-describedby=\"input-dialog-description\"\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        fullHeight\r\n      >\r\n        <DialogTitle id=\"input-dialog-title\">{l`questionScoreValueTitle`}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"input-dialog-description\">\r\n            <Typography variant=\"body2\">\r\n              {l`questionScoreValueDescription`}\r\n            </Typography>\r\n          </DialogContentText>\r\n\r\n          {scoreStep.steps.length > 1 && (\r\n            <ArrowDownwardIcon className={classes.helperArrow} />\r\n          )}\r\n\r\n          <List component=\"nav\" aria-label=\"source\">\r\n            {scoreStep.steps.map((value, i) => {\r\n              // Calculating if start statement depth\r\n              if (\r\n                value.type === SCORE_TYPE.CONDITIONAL &&\r\n                value.step === 'if'\r\n              ) {\r\n                depthLevel++;\r\n              }\r\n\r\n              // Styling based on depth\r\n              let depthColor =\r\n                depthLevel % 2 === 0\r\n                  ? theme.palette.secondary.main\r\n                  : theme.palette.primary.main;\r\n              let depthStyle = {\r\n                marginLeft: Math.max(0, depthLevel - 1) * 16,\r\n                borderLeft: `3px solid ${depthColor}`\r\n              };\r\n              if (depthLevel === 0) depthStyle = null;\r\n\r\n              const isInsideIfCondition = depthLevel > 0 && lastStep === 'if';\r\n              const isInsideIfOutput =\r\n                depthLevel > 0 &&\r\n                (lastStep === 'then' || lastStep === 'else') &&\r\n                value.type !== SCORE_TYPE.CONDITIONAL;\r\n              const isLastInsideIfCondition =\r\n                isInsideIfCondition &&\r\n                scoreStep.steps[i + 1].type === SCORE_TYPE.CONDITIONAL &&\r\n                scoreStep.steps[i + 1].step === 'then';\r\n              const isLastInsideIfOutput =\r\n                isInsideIfOutput &&\r\n                scoreStep.steps[i + 1].type === SCORE_TYPE.CONDITIONAL &&\r\n                (scoreStep.steps[i + 1].step === 'else' ||\r\n                  scoreStep.steps[i + 1].step === 'end');\r\n\r\n              const isPermanent =\r\n                (isInsideIfCondition &&\r\n                  scoreStep.steps[i - 1].type === SCORE_TYPE.CONDITIONAL &&\r\n                  scoreStep.steps[i - 1].step === 'if') ||\r\n                (isInsideIfOutput &&\r\n                  scoreStep.steps[i - 1].type === SCORE_TYPE.CONDITIONAL);\r\n\r\n              // Calculating if end statement depth\r\n              if (\r\n                value.type === SCORE_TYPE.CONDITIONAL &&\r\n                value.step === 'end'\r\n              ) {\r\n                depthLevel--;\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.CONDITIONAL) {\r\n                lastStep = value.step;\r\n\r\n                depthStyle.backgroundColor = depthColor;\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.OPERATOR) {\r\n                const text = mathOperatorTexts[value.sign];\r\n                const icon = mathIconList[value.sign];\r\n\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleMenuClick(i + 1)}\r\n                    key={i}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemIcon>\r\n                      <Icon path={icon} size={1} className={classes.mdi} />\r\n                    </ListItemIcon>\r\n                    <ListItemText>{text}</ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.COMPARATOR) {\r\n                const text = comparatorTexts[value.compare];\r\n                const icon = comparatorIconList[value.compare];\r\n\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleMenuClick(i + 1)}\r\n                    key={i}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemIcon>\r\n                      <Icon path={icon} size={1} className={classes.mdi} />\r\n                    </ListItemIcon>\r\n                    <ListItemText>{text}</ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.CONDITIONAL) {\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleMenuClick(i + 1)}\r\n                    key={i}\r\n                    className={classes.if}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemText>{value.step}</ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (\r\n                value.type === SCORE_TYPE.VALUE &&\r\n                value.from === null &&\r\n                value.value === null\r\n              ) {\r\n                return (\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleAddSourceClick(i + 1)}\r\n                    key={i}\r\n                    className={classes.if}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemText>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                        startIcon={<AddIcon />}\r\n                      >\r\n                        Pick Value\r\n                      </Button>\r\n                    </ListItemText>\r\n                  </ListItem>\r\n                );\r\n              }\r\n\r\n              if (value.type === SCORE_TYPE.VALUE && value.from === null) {\r\n                return (\r\n                  <>\r\n                    <ListItem\r\n                      button\r\n                      onClick={handleAddSourceClick(i + 1)}\r\n                      key={i}\r\n                      style={depthStyle}\r\n                    >\r\n                      <ListItemIcon>\r\n                        <Icon\r\n                          path={mdiCalculator}\r\n                          size={1}\r\n                          color=\"rgba(0, 0, 0, 0.54)\"\r\n                        />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        primary={value.value}\r\n                        secondary={l`questionScoreValueStatic`}\r\n                      />\r\n                      <ListItemSecondaryAction>\r\n                        <IconButton\r\n                          edge=\"end\"\r\n                          aria-label=\"edit\"\r\n                          onClick={handleAddSourceClick(i + 1)}\r\n                        >\r\n                          <EditIcon />\r\n                        </IconButton>\r\n                        {i !== 0 && !isPermanent && (\r\n                          <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"remove\"\r\n                            onClick={handleRemove(i + 1)}\r\n                          >\r\n                            <DeleteIcon />\r\n                          </IconButton>\r\n                        )}\r\n                      </ListItemSecondaryAction>\r\n                    </ListItem>\r\n                    {isLastInsideIfCondition &&\r\n                      renderInlineButtons(i, depthStyle, true)}\r\n                    {isLastInsideIfOutput && renderInlineButtons(i, depthStyle)}\r\n                  </>\r\n                );\r\n              }\r\n\r\n              const question = survey.questions.find(x => x.id === value.from);\r\n              const score = parseScore(\r\n                question.score.find(x => x[0].split('.')[1] === value.value)\r\n              );\r\n\r\n              return (\r\n                <>\r\n                  <ListItem\r\n                    button\r\n                    onClick={handleAddSourceClick(i + 1)}\r\n                    key={i}\r\n                    style={depthStyle}\r\n                  >\r\n                    <ListItemIcon>\r\n                      {value.value === 'score' ? (\r\n                        <StarRoundedIcon />\r\n                      ) : (\r\n                        <StarBorderRoundedIcon />\r\n                      )}\r\n                    </ListItemIcon>\r\n                    <ListItemText\r\n                      primary={\r\n                        value.value === 'score'\r\n                          ? l`questionScoreSourceDynamicDefaultTitle`\r\n                          : score.name\r\n                      }\r\n                      secondary={`${question.index + 1}. ${question.title}`}\r\n                    />\r\n\r\n                    <ListItemSecondaryAction>\r\n                      <IconButton\r\n                        edge=\"end\"\r\n                        aria-label=\"edit\"\r\n                        onClick={handleAddSourceClick(i + 1)}\r\n                      >\r\n                        <EditIcon />\r\n                      </IconButton>\r\n                      {i !== 0 && !isPermanent && (\r\n                        <IconButton\r\n                          edge=\"end\"\r\n                          aria-label=\"remove\"\r\n                          onClick={handleRemove(i + 1)}\r\n                        >\r\n                          <DeleteIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                  {isLastInsideIfCondition &&\r\n                    renderInlineButtons(i, depthStyle, true)}\r\n                  {isLastInsideIfOutput && renderInlineButtons(i, depthStyle)}\r\n                </>\r\n              );\r\n            })}\r\n\r\n            <ListItem className={classes.buttonItem}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size={scoreStep.steps.length ? 'small' : 'large'}\r\n                className={classes.button}\r\n                startIcon={\r\n                  scoreStep.steps.length ? (\r\n                    <Icon path={mdiCalculatorVariant} size={1} color=\"#FFF\" />\r\n                  ) : (\r\n                    <AddIcon />\r\n                  )\r\n                }\r\n                onClick={handleAddSourceClick(null)}\r\n              >\r\n                {scoreStep.steps.length\r\n                  ? l`questionScoreValueCreateButton`\r\n                  : l`questionScoreValueCreateButtonFirst`}\r\n              </Button>\r\n            </ListItem>\r\n          </List>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose('cancel')} color=\"primary\">\r\n            {l`dialogButtonCancel`}\r\n          </Button>\r\n          <Button\r\n            onClick={handleClose('confirm')}\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            {l`dialogButtonConfirm`}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Menu\r\n        id=\"operator-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleMenuClose(null)}\r\n        style={{ zIndex: 2000 }}\r\n      >\r\n        {Object.values(OPERATOR_TYPE).map(x => (\r\n          <MenuItem onClick={handleMenuClose(x)} key={x}>\r\n            <ListItemIcon>\r\n              <Icon path={mathIconList[x]} size={1} className={classes.mdi} />\r\n            </ListItemIcon>\r\n            {mathOperatorTexts[x]}\r\n          </MenuItem>\r\n        ))}\r\n      </Menu>\r\n\r\n      <Menu\r\n        id=\"comparator-menu\"\r\n        anchorEl={comparatorMenuAnchorEl}\r\n        keepMounted\r\n        open={Boolean(comparatorMenuAnchorEl)}\r\n        onClose={handleComparatorMenuClose(null)}\r\n        style={{ zIndex: 2000 }}\r\n      >\r\n        {Object.values(COMPARATOR_TYPE).map(x => (\r\n          <MenuItem onClick={handleComparatorMenuClose(x)} key={x}>\r\n            <ListItemIcon>\r\n              <Icon\r\n                path={comparatorIconList[x]}\r\n                size={1}\r\n                className={classes.mdi}\r\n              />\r\n            </ListItemIcon>\r\n            {comparatorTexts[x]}\r\n          </MenuItem>\r\n        ))}\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default QuestionScoreDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\r\n * @file Lists the scores attached to a single question. Handles modifying and removing simgle scores. Used by {@link QuestionScore}\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport AttachmentIcon from '@material-ui/icons/Attachment';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport { openDialog } from './QuestionScoreDialog';\r\nimport { handleSurveyQuestionUpdate } from './QuestionUtil';\r\nimport { parseScore, SCORE_TYPE } from './Score';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  value: {},\r\n  label: {\r\n    margin: '0 3px',\r\n    padding: '0 3px',\r\n    backgroundColor: '#FFFFFF',\r\n    fontWeight: 'bold',\r\n    color: theme.palette.text.primary,\r\n    borderRadius: 3\r\n  },\r\n  row: {\r\n    marginBottom: theme.spacing(1)\r\n  }\r\n}));\r\n\r\nexport const QuestionScoreList = ({\r\n  survey,\r\n  index,\r\n  questionId,\r\n  scoreList,\r\n  setSurvey\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const handleScoreUpdate = score => {\r\n    if (index !== null) {\r\n      setSurvey(\r\n        handleSurveyQuestionUpdate(survey, index, {\r\n          score\r\n        })\r\n      );\r\n    } else {\r\n      setSurvey({ ...survey, score });\r\n    }\r\n  };\r\n\r\n  const handleValueUpdate = p => async () => {\r\n    const value = await openDialog(questionId, scoreList[p]);\r\n\r\n    if (value) {\r\n      const dataCache = [...scoreList];\r\n      dataCache[p] = value;\r\n      handleScoreUpdate([...dataCache]);\r\n    }\r\n  };\r\n\r\n  return scoreList.map((line, p) => {\r\n    // const locked = !!line[0].locked;\r\n\r\n    const scoreStepList = parseScore(line);\r\n    const labelParts = l`questionScoreVariable`.split('SCORE');\r\n\r\n    const actualStepCount = scoreStepList.steps.filter(\r\n      x => x.type !== SCORE_TYPE.OPERATOR && x.type !== SCORE_TYPE.COMPARATOR\r\n    ).length;\r\n    const hasBadge = actualStepCount > 1;\r\n    const hasContent = !!actualStepCount;\r\n    const isDefault = scoreStepList.id === 'score';\r\n\r\n    const currentQuestion = survey.questions.find(x => x.id === questionId);\r\n\r\n    let name = l`questionScorePickValue`;\r\n    if (hasContent && scoreStepList.steps[0].type === SCORE_TYPE.VALUE) {\r\n      if (scoreStepList.steps[0].from === null) {\r\n        name = scoreStepList.steps[0].value;\r\n      } else {\r\n        const question = survey.questions.find(\r\n          x => x.id === scoreStepList.steps[0].from\r\n        );\r\n        const score = parseScore(\r\n          question.score.find(\r\n            x => x[0].split('.')[1] === scoreStepList.steps[0].value\r\n          )\r\n        );\r\n\r\n        name = score.name;\r\n      }\r\n    }\r\n\r\n    if (hasBadge) {\r\n      name += '…';\r\n    }\r\n\r\n    const createAnswerScoreName = () => {\r\n      const answerList = [\r\n        ...new Set(currentQuestion.options.map(x => `${x.score}`))\r\n      ];\r\n      return (\r\n        answerList.slice(0, -1).join(',') +\r\n        ` ${l`questionScoreListOr`} ` +\r\n        answerList.slice(-1)\r\n      );\r\n    };\r\n\r\n    const chip = (\r\n      <Chip\r\n        icon={<AttachmentIcon className={classes.value} />}\r\n        label={isDefault ? createAnswerScoreName() : name}\r\n        style={{\r\n          borderRadius: '0 16px 16px 0'\r\n        }}\r\n        color={hasContent || isDefault ? 'primary' : 'secondary'}\r\n        variant=\"outlined\"\r\n        onClick={isDefault ? null : handleValueUpdate(p)}\r\n        onDelete={isDefault ? null : () => {}}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <Box className={classes.row} key={`line-${p}`}>\r\n        <Chip\r\n          icon={<ArrowForwardIcon className={classes.value} />}\r\n          label={\r\n            <>\r\n              {labelParts[0]}\r\n              <span className={classes.label}>{scoreStepList.name}</span>\r\n              {labelParts[1]}\r\n            </>\r\n          }\r\n          style={{\r\n            borderRadius: '16px 0 0 16px'\r\n          }}\r\n          color=\"primary\"\r\n        />\r\n        {hasBadge && (\r\n          <Badge badgeContent={actualStepCount} max={9} color=\"secondary\">\r\n            {chip}\r\n          </Badge>\r\n        )}\r\n        {!hasBadge && chip}\r\n        {/*\r\n          if (firstValue.type === 'question') {\r\n            // Input\r\n            let name = l`questionScoreSourceDynamicDefaultTitle`;\r\n            if (firstValue.value !== 'score') {\r\n              name = firstValue.value[0].value;\r\n            }\r\n\r\n            let label = l`questionScoreSourceDynamicDefaultTitle`;\r\n            if (!locked) {\r\n              label = `${firstValue.source.index + 1}. ${name}`;\r\n            }\r\n\r\n            props.label = label;\r\n          } else {\r\n            // Static value\r\n            props.label = `${firstValue.source}.${firstValue.value || 0}`;\r\n          }\r\n\r\n          if (source.value.length > 1) {\r\n            props.label += ' …';\r\n          }\r\n        */}\r\n\r\n        {isDefault && (\r\n          <Tooltip\r\n            title={`Every question will output the default \"Score\" source`}\r\n            placement=\"right\"\r\n          >\r\n            <LockIcon />\r\n          </Tooltip>\r\n        )}\r\n      </Box>\r\n    );\r\n  });\r\n};\r\n","/**\r\n * @file Handles picking a name for a new score.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n// import { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\n\r\nconst l = Locale(Translation);\r\n\r\nlet setOpenState = null;\r\nlet setInputState = null;\r\nlet resolveDialog = null;\r\n\r\n/*\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n    maxWidth: 360,\r\n    backgroundColor: theme.palette.background.paper,\r\n    position: 'relative',\r\n    overflow: 'auto',\r\n    maxHeight: 300\r\n  },\r\n  listSection: {\r\n    backgroundColor: 'inherit'\r\n  },\r\n  ul: {\r\n    backgroundColor: 'inherit',\r\n    padding: 0\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(4)\r\n  }\r\n}));\r\n*/\r\n\r\nconst closeDialog = action => {\r\n  setOpenState(false);\r\n  if (resolveDialog) {\r\n    resolveDialog(action);\r\n    resolveDialog = null;\r\n  }\r\n};\r\n\r\nconst openDialog = () =>\r\n  new Promise(resolve => {\r\n    setInputState('');\r\n    resolveDialog = resolve;\r\n    setOpenState(true);\r\n  });\r\n\r\nconst QuestionScoreCreateDialog = () => {\r\n  // const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [name, setName] = React.useState('');\r\n\r\n  setOpenState = setOpen;\r\n  setInputState = setName;\r\n\r\n  const handleClose = action => () => {\r\n    if (action === 'confirm') {\r\n      closeDialog(name);\r\n    } else {\r\n      closeDialog(null);\r\n    }\r\n  };\r\n\r\n  const handleNameChange = event => {\r\n    setName(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose(null)}\r\n      aria-labelledby=\"input-dialog-title\"\r\n      aria-describedby=\"input-dialog-description\"\r\n      maxWidth=\"xs\"\r\n      fullWidth\r\n      fullHeight\r\n    >\r\n      <DialogTitle id=\"input-dialog-title\">{l`questionScoreCreateTitle`}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"input-dialog-description\">\r\n          <Typography variant=\"body2\">\r\n            {l`questionScoreCreateDescription`}\r\n          </Typography>\r\n        </DialogContentText>\r\n\r\n        <TextField\r\n          autoFocus\r\n          id=\"name\"\r\n          label={l`questionScoreCreateNameLabel`}\r\n          fullWidth\r\n          value={name}\r\n          onChange={handleNameChange}\r\n          variant=\"outlined\"\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose('cancel')} color=\"primary\">\r\n          {l`dialogButtonCancel`}\r\n        </Button>\r\n        <Button\r\n          onClick={handleClose('confirm')}\r\n          variant=\"outlined\"\r\n          color=\"primary\"\r\n          autoFocus\r\n        >\r\n          {l`dialogButtonConfirm`}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuestionScoreCreateDialog;\r\nexport { openDialog, closeDialog };\r\n","/**\r\n * @file Scoring functionality for a single question. Will handle displaying and adding scores.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AttachmentIcon from '@material-ui/icons/Attachment';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport React from 'react';\r\nimport uuid from 'uuid/v4';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport { QuestionScoreList } from './QuestionScoreList';\r\nimport QuestionScoreCreateDialog, * as sourceDialog from './QuestionScoreCreateDialog';\r\nimport { handleSurveyQuestionUpdate } from './QuestionUtil';\r\n\r\nconst l = Locale(Translation);\r\n\r\nexport const QuestionScore = ({ survey, index, question, setSurvey }) => {\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\r\n\r\n  /*\r\n  const handleSourceUpdate = source => {\r\n    setSurvey(\r\n      handleSurveyQuestionUpdate(survey, index, {\r\n        source\r\n      })\r\n    );\r\n  };\r\n  */\r\n\r\n  const handleScoreUpdate = score => {\r\n    setSurvey(\r\n      handleSurveyQuestionUpdate(survey, index, {\r\n        score\r\n      })\r\n    );\r\n  };\r\n\r\n  /*\r\n  const handleMenuClick = event => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n  */\r\n\r\n  const handleMenuClose = action => async () => {\r\n    setMenuAnchorEl(null);\r\n\r\n    if (action === 'variable') {\r\n      const name = await sourceDialog.openDialog();\r\n      if (!name) return;\r\n\r\n      handleScoreUpdate([...question.score, [`id.${uuid()}.${name}`]]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box>\r\n        <Box>\r\n          <QuestionScoreList\r\n            survey={survey}\r\n            index={index}\r\n            questionId={question.id}\r\n            scoreList={question.score}\r\n            setSurvey={setSurvey}\r\n          />\r\n\r\n          <Chip\r\n            icon={<AddIcon />}\r\n            label={l`questionScoreVariableCreateButton`}\r\n            onClick={handleMenuClose('variable')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n            style={{ marginRight: 8 }}\r\n          />\r\n\r\n          <Chip\r\n            icon={<DonutLargeIcon />}\r\n            label=\"Modify User Meters\"\r\n            onClick={handleMenuClose('meter')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleMenuClose(null)}\r\n        style={{ zIndex: 2000 }}\r\n      >\r\n        <MenuItem onClick={handleMenuClose('variable')}>\r\n          <ListItemIcon>\r\n            <AttachmentIcon />\r\n          </ListItemIcon>\r\n          Create Score\r\n        </MenuItem>\r\n        <MenuItem onClick={handleMenuClose('meter')}>\r\n          <ListItemIcon>\r\n            <DonutLargeIcon />\r\n          </ListItemIcon>\r\n          Move Meter\r\n        </MenuItem>\r\n      </Menu>\r\n\r\n      <QuestionScoreCreateDialog\r\n        survey={survey}\r\n        index={index}\r\n        question={question}\r\n      />\r\n    </>\r\n  );\r\n};\r\n","/**\n * @file Renders and manages the functionality of the \"Text\" question options.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport SubjectIcon from '@material-ui/icons/Subject';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport React from 'react';\n\nimport { handleSurveyOptionUpdate } from '../QuestionUtil';\n\nimport { QuestionOptionRoute } from '../QuestionOptionRoute';\n\nimport Translation from '../questionLocale.json';\nimport Locale from '../../Locale';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  badge: {\n    position: 'absolute',\n    display: 'block',\n    top: 0,\n    right: -6,\n    width: 12,\n    height: 12,\n    borderRadius: '50%',\n    backgroundColor: '#CD5B5B'\n  },\n  dialog: {\n    width: 600\n  },\n  option: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    padding: 0,\n    marginTop: 8,\n    borderRadius: 4,\n    border: `1px solid ${theme.palette.divider}`\n  },\n  optionContainer: {\n    display: 'flex',\n    flex: 1,\n    padding: theme.spacing(2),\n    maxWidth: 500\n  },\n  optionMain: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: theme.spacing(2)\n  },\n  optionTitle: {\n    marginTop: -5,\n    marginBottom: theme.spacing(1.5)\n  },\n  optionAdvanced: {\n    display: 'flex'\n  },\n  optionInput: {\n    flex: 1,\n    marginLeft: 0,\n    marginTop: 0\n  },\n  optionInputSecondary: {\n    flex: 1,\n    overflow: 'hidden',\n    marginLeft: 0,\n    marginTop: theme.spacing(2)\n  },\n  optionInputMenu: {\n    maxWidth: 500\n  },\n  optionInputMenuItem: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  optionInputScore: {\n    marginLeft: 0,\n    marginRight: theme.spacing(3),\n    marginTop: theme.spacing(2),\n    width: 100\n  },\n  optionIconLabel: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: -4\n  },\n  optionIconLabelIcon: {\n    marginRight: theme.spacing(0.75)\n  },\n  subtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(2)\n  }\n}));\n\nexport const QuestionText = ({ index, survey, setSurvey }) => {\n  const classes = useStyles();\n\n  const question = survey.questions[index];\n  const option = question.options[0];\n\n  const questionTypes = l('questionsType');\n\n  const handleAllowEmptyUpdate = event => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, 0, {\n        allowAmpty: !!event.target.checked,\n        route: !event.target.checked ? null : option.route\n      })\n    );\n  };\n\n  const handleRouteUpdate = route => {\n    setSurvey(\n      handleSurveyOptionUpdate(survey, index, 0, {\n        route\n      })\n    );\n  };\n\n  return (\n    <Box className={classes.section}>\n      <Typography variant=\"h6\">{l('questionOptionsText')}</Typography>\n      <Typography variant=\"body2\" className={classes.subtitle}>\n        {l('questionOptionsInfo')}\n      </Typography>\n\n      <Box className={classes.option}>\n        <Box className={classes.optionContainer}>\n          <SubjectIcon />\n          <Box className={classes.optionMain}>\n            <Typography variant=\"h6\" className={classes.optionTitle}>\n              {questionTypes[question.type]}\n            </Typography>\n\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={option.allowAmpty}\n                  onChange={handleAllowEmptyUpdate}\n                  value={true}\n                />\n              }\n              label={l('questionOptionAllowEmptyLabel')}\n            />\n\n            {!!option.allowAmpty && (\n              <Box className={classes.optionAdvanced}>\n                <QuestionOptionRoute\n                  survey={survey}\n                  index={index}\n                  value={option.route}\n                  onChange={handleRouteUpdate}\n                  className={classes.optionInputSecondary}\n                  helperText={l('questionOptionEmptyRouteInfo')}\n                />\n              </Box>\n            )}\n          </Box>\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file Common functionality amongst different question types. Will also render the appropriate question type options.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport Locale from '../Locale';\nimport TextField from '../CachedInput';\nimport { QuestionChooseMultiple } from './type/QuestionChooseMultiple';\nimport { QuestionChooseOne } from './type/QuestionChooseOne';\nimport Translation from './questionLocale.json';\nimport { QuestionRouteTable } from './QuestionRouteTable';\nimport { QuestionScore } from './QuestionScore';\nimport { QuestionText } from './type/QuestionText';\nimport {\n  getDefaultRoute,\n  handleSurveyQuestionUpdate,\n  listPossibleRoutes\n} from './QuestionUtil';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  box: {\n    width: '100%'\n  },\n  section: {\n    marginBottom: theme.spacing(3)\n  },\n  input: {\n    width: '100%',\n    flex: 1\n  },\n  menu: {\n    width: 200\n  },\n  details: {\n    paddingTop: '0 !important',\n    paddingBottom: '0 !important'\n  },\n  routeSection: {\n    marginBottom: theme.spacing(3)\n  },\n  routeSectionInput: {\n    width: '100%',\n    maxWidth: 518\n  },\n  subtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(1.5)\n  },\n  divider: {\n    padding: 0,\n    marginTop: theme.spacing(1.5),\n    marginBottom: theme.spacing(1.5),\n    height: 0,\n    backgroundColor: theme.palette.divider,\n    border: 'none'\n  },\n  inputMenu: {\n    maxWidth: 500\n  },\n  inputMenuItem: {\n    maxWidth: '100%',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  }\n}));\n\nexport const QuestionDetails = ({ index, survey, question, setSurvey }) => {\n  const classes = useStyles();\n\n  let defaultRoute = getDefaultRoute(survey.questions, index);\n  if (defaultRoute && defaultRoute !== 'end') defaultRoute = defaultRoute.id;\n\n  const questionTypes = l('questionsType');\n\n  let content = null;\n  switch (question.type) {\n    case 'selectOne':\n      content = (\n        <QuestionChooseOne\n          index={index}\n          survey={survey}\n          question={question}\n          setSurvey={setSurvey}\n        />\n      );\n      break;\n    case 'selectMultiple':\n      content = (\n        <QuestionChooseMultiple\n          index={index}\n          survey={survey}\n          question={question}\n          setSurvey={setSurvey}\n        />\n      );\n      break;\n    case 'text':\n      content = (\n        <QuestionText index={index} survey={survey} setSurvey={setSurvey} />\n      );\n      break;\n    default:\n      break;\n  }\n\n  const handleTitleUpdate = title => {\n    setSurvey(\n      handleSurveyQuestionUpdate(survey, index, {\n        title\n      })\n    );\n  };\n\n  const handleRouteUpdate = route => {\n    setSurvey(\n      handleSurveyQuestionUpdate(survey, index, {\n        defaultRoute: route\n      })\n    );\n  };\n\n  return (\n    <Box className={classes.box}>\n      {/* Details */}\n      <Box className={classes.section}>\n        {/*\n        <Typography variant=\"h6\">{l('questionDetailsText')}</Typography>\n        <Typography variant=\"body2\" className={classes.subtitle}>\n          {l('questionDetailsInfo')}\n        </Typography>\n        */}\n\n        <Grid container spacing={4}>\n          <Grid item md={8} sm={12} xs={12} className={classes.details}>\n            <TextField\n              variant=\"outlined\"\n              className={classes.input}\n              label={l('questionDetailsTitleLabel')}\n              value={question.title}\n              margin=\"normal\"\n              onChange={handleTitleUpdate}\n            />\n          </Grid>\n          <Grid item md={4} sm={12} xs={12} className={classes.details}>\n            <TextField\n              variant=\"outlined\"\n              select\n              label={l('questionDetailsTypeLabel')}\n              className={classes.input}\n              value={question.type}\n              SelectProps={{\n                MenuProps: {\n                  className: classes.menu\n                }\n              }}\n              helperText={l('questionDetailsTypeInfo')}\n              margin=\"normal\"\n              disabled\n            >\n              <MenuItem key={question.type} value={question.type}>\n                {questionTypes[question.type]}\n              </MenuItem>\n            </TextField>\n          </Grid>\n        </Grid>\n      </Box>\n\n      <hr className={classes.divider} />\n\n      {/* Options */}\n      <Box className={classes.section}>{content}</Box>\n\n      <hr className={classes.divider} />\n\n      {/* Routing */}\n      <Box className={classes.section}>\n        <Typography variant=\"h6\">{l('questionRouteText')}</Typography>\n        <Typography variant=\"body2\" className={classes.subtitle}>\n          {l('questionRouteInfo')}\n        </Typography>\n\n        {/* TODO: Figure out if this is nessesary... */}\n        {false && (\n          <Box className={classes.routeSection}>\n            <TextField\n              select\n              label=\"Default Next Question\"\n              className={classes.routeSectionInput}\n              value={defaultRoute}\n              onChange={handleRouteUpdate}\n              SelectProps={{\n                MenuProps: {\n                  className: classes.inputMenu\n                }\n              }}\n              helperText=\"Next question for options without custom route rules\"\n              margin=\"normal\"\n              variant=\"outlined\"\n            >\n              {listPossibleRoutes(survey.questions, index).map(x => (\n                <MenuItem\n                  className={classes.inputMenuItem}\n                  key={x.id}\n                  value={x.id}\n                >\n                  {x.index + 1}. {x.title}\n                </MenuItem>\n              ))}\n\n              <MenuItem key=\"end\" value=\"end\">\n                End Survey\n              </MenuItem>\n            </TextField>\n          </Box>\n        )}\n\n        <QuestionRouteTable index={index} survey={survey} question={question} />\n      </Box>\n\n      {/* Scoring */}\n      <Box className={classes.section}>\n        <Typography variant=\"h6\">{l('questionScoreText')}</Typography>\n        <Typography variant=\"body2\" className={classes.subtitle}>\n          {l('questionScoreInfo')}\n        </Typography>\n\n        <QuestionScore\n          index={index}\n          survey={survey}\n          question={question}\n          setSurvey={setSurvey}\n        />\n      </Box>\n    </Box>\n  );\n};\n","/**\n * @file The primary component for a question. Will handle all the nessesary logic for single question management.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\nimport { QuestionDetails } from './QuestionDetails';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport { checkScoreStatus, checkRouteStatus } from './QuestionUtil';\n\nimport SpellcheckIcon from '@material-ui/icons/Spellcheck';\nimport CallSplitIcon from '@material-ui/icons/CallSplit';\n\nimport Translation from './questionLocale.json';\nimport Locale from '../Locale';\n\nconst l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  title: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  panel: {\n    width: '100%'\n  },\n  header: {\n    maxWidth: 'calc(100% - 70px)'\n  },\n  statusIconContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    position: 'absolute',\n    height: '100%',\n    top: 0,\n    right: theme.spacing(8)\n  },\n  statusIcon: {\n    padding: 3,\n    marginLeft: theme.spacing(1),\n    borderRadius: '50%',\n    width: 20,\n    height: 20\n    // backgroundColor: '#eee'\n    //fill: '#fff'\n  },\n  list: {\n    margin: 0,\n    paddingLeft: 19,\n    paddingTop: 0,\n    paddingBottom: 0,\n    fontSize: '0.8em',\n    color: theme.palette.text.secondary\n  },\n  number: {\n    position: 'absolute',\n    left: -16,\n    backgroundColor: theme.palette.primary.main,\n    width: 32,\n    height: 32,\n    borderRadius: '50%',\n    boxShadow:\n      '0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12)',\n    textAlign: 'center',\n    lineHeight: '32px',\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#fff'\n  }\n}));\n\nconst StyledExpansionPanelSummary = withStyles({\n  content: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n  }\n})(ExpansionPanelSummary);\n\nexport const Question = ({\n  index,\n  survey,\n  question,\n  setSurvey,\n  expanded,\n  handleExpandChange\n}) => {\n  const classes = useStyles();\n\n  const contentRef = React.useRef(null);\n\n  const questionTypes = l('questionsType');\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpandChange(index)}>\n      <StyledExpansionPanelSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls=\"panel1bh-content\"\n        id=\"panel1bh-header\"\n      >\n        <Box className={classes.number}>{index + 1}</Box>\n        <Box className={classes.panel}>\n          <Box className={classes.header}>\n            <Typography variant=\"h6\" display=\"block\" className={classes.title}>\n              {question.title}\n            </Typography>\n            <Typography variant=\"caption\" display=\"block\">\n              {questionTypes[question.type]}\n            </Typography>\n\n            <Box className={classes.statusIconContainer}>\n              {checkScoreStatus(question) && (\n                <SpellcheckIcon\n                  style={{ fill: '#56B47C' }}\n                  className={classes.statusIcon}\n                />\n              )}\n              {checkRouteStatus(question) && (\n                <CallSplitIcon\n                  style={{ fill: '#CD5B5B' }}\n                  className={classes.statusIcon}\n                />\n              )}\n            </Box>\n          </Box>\n          {!expanded && question.type === 'selectOne' && (\n            <Box>\n              <ul className={classes.list}>\n                {question.options.map(x => (\n                  <li>{x.name}</li>\n                ))}\n              </ul>\n            </Box>\n          )}\n        </Box>\n      </StyledExpansionPanelSummary>\n      <ExpansionPanelDetails ref={contentRef}>\n        {(expanded || !contentRef.current) && (\n          <QuestionDetails\n            index={index}\n            survey={survey}\n            question={question}\n            setSurvey={setSurvey}\n          />\n        )}\n        {!expanded && contentRef.current && (\n          <Box style={{ height: contentRef.current.offsetHeight }} />\n        )}\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n};\n","/**\r\n * @file List all custom and default scores in the survey. Used in {@link SurveyEdit}\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport React from 'react';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { parseScore } from './Score';\r\n\r\nimport StarRoundedIcon from '@material-ui/icons/StarRounded';\r\nimport StarBorderRoundedIcon from '@material-ui/icons/StarBorderRounded';\r\n\r\nconst l = Locale(Translation);\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  routeSection: {\r\n    marginBottom: theme.spacing(3)\r\n  },\r\n  table: {\r\n    tableLayout: 'fixed'\r\n  },\r\n  routeCell: {\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden'\r\n  },\r\n  routeIconCell: {},\r\n  routeIconCellIcon: {\r\n    width: 16,\r\n    height: 16\r\n  }\r\n}));\r\n\r\nexport const SurveyScoreTable = ({ survey }) => {\r\n  const classes = useStyles();\r\n\r\n  const scoreList = survey.questions\r\n    .map(x =>\r\n      x.score.map(parseScore).map(y => ({\r\n        source: y,\r\n        question: x,\r\n        isAnswerScore: y.id === 'score'\r\n      }))\r\n    )\r\n    .flat();\r\n\r\n  return (\r\n    <Box className={classes.routeSection}>\r\n      {/*\r\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\r\n        Route Table\r\n      </InputLabel>\r\n      */}\r\n\r\n      <Table className={classes.table} size=\"small\" aria-label=\"a dense table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell width={16}></TableCell>\r\n            <TableCell width=\"45%\">Question</TableCell>\r\n            <TableCell width=\"45%\">Score</TableCell>\r\n            <TableCell width=\"10%\" align=\"right\">\r\n              Save\r\n            </TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {scoreList.map((x, i) => (\r\n            <TableRow key={x.source.id}>\r\n              <TableCell\r\n                width={16}\r\n                className={classes.routeIconCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n              >\r\n                {x.isAnswerScore ? (\r\n                  <StarRoundedIcon className={classes.routeIconCellIcon} />\r\n                ) : (\r\n                  <StarBorderRoundedIcon\r\n                    className={classes.routeIconCellIcon}\r\n                  />\r\n                )}\r\n              </TableCell>\r\n              <TableCell\r\n                width=\"45%\"\r\n                className={classes.routeCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n              >\r\n                {x.question.index + 1}. {x.question.title}\r\n              </TableCell>\r\n              <TableCell\r\n                width=\"45%\"\r\n                className={classes.routeCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n              >\r\n                <Typography variant=\"body2\" style={{ fontWeight: 'bold' }}>\r\n                  {x.source.name}\r\n                </Typography>\r\n                <Typography variant=\"caption\" component=\"div\">\r\n                  {x.isAnswerScore\r\n                    ? l`questionScoreSourceDynamicDefaultDescription`\r\n                    : l`questionScoreSourceDynamicCustomDescription`}\r\n                </Typography>\r\n              </TableCell>\r\n              <TableCell\r\n                width=\"10%\"\r\n                defaultChecked={true}\r\n                className={classes.routeCell}\r\n                component=\"th\"\r\n                scope=\"row\"\r\n                align=\"right\"\r\n              >\r\n                <Checkbox\r\n                  value={x.source.id}\r\n                  inputProps={{\r\n                    'aria-label': 'save score'\r\n                  }}\r\n                />\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </Box>\r\n  );\r\n};\r\n","/**\r\n * @file Scoring functionality for a single question. Will handle displaying and adding scores.\r\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\r\n */\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport React from 'react';\r\nimport uuid from 'uuid/v4';\r\nimport Locale from '../Locale';\r\nimport Translation from './questionLocale.json';\r\nimport QuestionScoreCreateDialog, * as sourceDialog from './QuestionScoreCreateDialog';\r\nimport { QuestionScoreList } from './QuestionScoreList';\r\n\r\nconst l = Locale(Translation);\r\n\r\nexport const SurveyScore = ({ survey, setSurvey }) => {\r\n  /*\r\n  const handleSourceUpdate = source => {\r\n    setSurvey(\r\n      handleSurveyQuestionUpdate(survey, index, {\r\n        source\r\n      })\r\n    );\r\n  };\r\n  */\r\n\r\n  const handleScoreUpdate = score => {\r\n    setSurvey({ ...survey, score });\r\n  };\r\n\r\n  /*\r\n  const handleMenuClick = event => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n  */\r\n\r\n  const handleMenuClose = action => async () => {\r\n    if (action === 'variable') {\r\n      const name = await sourceDialog.openDialog();\r\n      if (!name) return;\r\n\r\n      handleScoreUpdate([...survey.score, [`id.${uuid()}.${name}`]]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box>\r\n        <Box>\r\n          <QuestionScoreList\r\n            survey={survey}\r\n            index={null}\r\n            scoreList={survey.score}\r\n            setSurvey={setSurvey}\r\n          />\r\n\r\n          <Chip\r\n            icon={<AddIcon />}\r\n            label={l`questionScoreVariableCreateButton`}\r\n            onClick={handleMenuClose('variable')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n            style={{ marginRight: 8 }}\r\n          />\r\n\r\n          <Chip\r\n            icon={<DonutLargeIcon />}\r\n            label=\"Modify User Meters\"\r\n            onClick={handleMenuClose('meter')}\r\n            // onDelete={() => {}}\r\n            variant=\"outlined\"\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <QuestionScoreCreateDialog survey={survey} />\r\n    </>\r\n  );\r\n};\r\n","/**\n * @file The primary view for the survey editor. Handles modification of the basic survey data, and lists all the questions.\n * @author Tuomas Pöyry <tuomas.poyry@metropolia.fi>\n */\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Grid from '@material-ui/core/Grid';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport AddIcon from '@material-ui/icons/Add';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked';\nimport SubjectIcon from '@material-ui/icons/Subject';\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport uuid from 'uuid/v4';\nimport { openDialog } from '../components/ConfirmationDialog';\nimport { HelpBox } from '../components/HelpBox';\nimport Locale from '../components/Locale';\nimport TextField from '../components/CachedInput';\nimport { Question } from '../components/question/Question';\nimport Translation from '../components/question/questionLocale.json';\nimport QuestionScoreDialog from '../components/question/QuestionScoreDialog';\nimport QuestionScoreInputDialog from '../components/question/QuestionScoreInputDialog';\nimport { handleSurveyQuestionCreate } from '../components/question/QuestionUtil';\nimport { SurveyScoreTable } from '../components/question/SurveyScoreTable';\nimport { SurveyScore } from '../components/question/SurveyScore';\n\nconst l = Locale(Translation);\n\nlet data = {\n  title: '',\n  description: '',\n  intro: '',\n  questions: [],\n  score: []\n};\n\nconst enabledQuestionTypes = {\n  selectOne: <RadioButtonCheckedIcon fontSize=\"small\" />,\n  text: <SubjectIcon fontSize=\"small\" />\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: 64\n  },\n  title: {\n    width: '100%',\n    marginLeft: 16,\n    marginBottom: theme.spacing(1),\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  subtitle: {\n    marginLeft: 16,\n    marginBottom: theme.spacing(4)\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  list: {\n    width: '100%'\n  },\n  fab: {\n    margin: theme.spacing(1)\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(1)\n  },\n  input: {\n    width: '100%'\n  },\n  section: {\n    marginBottom: 48\n  },\n  sectionTitle: {\n    marginLeft: 16,\n    marginBottom: 10\n  },\n  sectionSubtitle: {\n    fontSize: '0.75em',\n    marginBottom: theme.spacing(1.5)\n  },\n  sectionPaper: {\n    padding: '0 16px 16px 16px'\n  },\n  sectionPaperScore: {\n    padding: theme.spacing(3)\n  },\n  questionButton: {\n    marginTop: theme.spacing(2)\n  },\n  developmentButton: {\n    marginBottom: theme.spacing(2),\n    marginRight: theme.spacing(2)\n  },\n  scoreHeader: {\n    maxWidth: 'calc(100% - 70px)'\n  },\n  scoreTitle: {\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  scoreHelpBox: {\n    marginTop: 0,\n    marginBottom: theme.spacing(3)\n  }\n}));\n\nexport const SurveyEdit = ({ match, history }) => {\n  const { id } = match.params;\n\n  const classes = useStyles();\n\n  const [survey, setSurvey] = React.useState({ ...data, id });\n  const [expanded, setExpanded] = React.useState([]);\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null);\n  const [presetMenuAnchorEl, setPresetMenuAnchorEl] = React.useState(null);\n\n  React.useEffect(() => {\n    if (!id) return;\n\n    const surveyData = JSON.parse(\n      localStorage.getItem(`survey.${id}`) || 'null'\n    );\n    if (surveyData) {\n      setSurvey(surveyData);\n    }\n  }, [id]);\n\n  // Redirect to new survey ID if none is provided\n  if (!id) {\n    return <Redirect to={`/survey/${uuid()}`} />;\n  }\n\n  const handleChange = panel => (event, isExpanded) => {\n    let expandedCache = [...expanded];\n    if (expandedCache.includes(panel)) {\n      if (!isExpanded) {\n        expandedCache.splice(expandedCache.indexOf(expandedCache), 1);\n      }\n    } else {\n      if (isExpanded) {\n        expandedCache.push(panel);\n      }\n    }\n\n    setExpanded([...expandedCache]);\n  };\n\n  const handleTitleUpdate = title => {\n    setSurvey({ ...survey, title });\n  };\n\n  const handleDescriptionUpdate = description => {\n    setSurvey({ ...survey, description });\n  };\n\n  const handleIntroUpdate = intro => {\n    setSurvey({ ...survey, intro });\n  };\n\n  const handleQuestionCreate = event => {\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  const handleQuestionTypeClose = type => () => {\n    setMenuAnchorEl(null);\n\n    if (type) {\n      setSurvey(handleSurveyQuestionCreate(survey, type));\n    }\n  };\n\n  const handlePresetSave = () => {\n    localStorage.setItem(`survey.${id}`, JSON.stringify(survey));\n  };\n\n  const handlePresetClear = async () => {\n    const action = await openDialog({\n      description:\n        'This will remove the current survey from the local database. You can still continue to edit it and save it untill the window is refreshed.'\n    });\n\n    if (action === 'confirm') {\n      localStorage.removeItem(`survey.${id}`);\n    }\n  };\n\n  const handlePresetClearAll = async () => {\n    const action = await openDialog({\n      description:\n        'This will remove ALL survey presets from the local database! This action cannot be undone. Are you absolutely sure?'\n    });\n\n    if (action === 'confirm') {\n      for (const item in localStorage) {\n        if (item && item.includes('survey.')) {\n          localStorage.removeItem(item);\n        }\n      }\n    }\n  };\n\n  const handlePresetMenuOpen = event => {\n    setPresetMenuAnchorEl(event.currentTarget);\n  };\n\n  const handlePresetMenuClose = surveyId => () => {\n    setPresetMenuAnchorEl(null);\n\n    if (surveyId) {\n      // Load saved survey from local storage\n      history.push(`/survey/${surveyId}`);\n    }\n  };\n\n  const surveyPresets = [];\n  for (const item in localStorage) {\n    if (item && item.includes('survey.')) {\n      const survey = JSON.parse(localStorage.getItem(item) || 'null');\n      if (!survey) continue;\n      surveyPresets.push({\n        id: survey.id,\n        title: survey.title\n      });\n    }\n  }\n\n  const isFirstQuestion = !survey.questions.length;\n\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={0}>\n        <Grid item md={6} sm={12} xs={12}>\n          <Typography variant=\"h3\" className={classes.title}>\n            {survey.title ? survey.title : l`infoText`}\n          </Typography>\n          <Typography\n            variant=\"subtitle1\"\n            color=\"textSecondary\"\n            className={classes.subtitle}\n          >\n            {survey.questions.length} {l`infoQuestions`} – {l`infoStateDraft`}\n          </Typography>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              {l('detailsText')}\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <TextField\n                className={classes.input}\n                label={l('detailsTitleLabel')}\n                margin=\"normal\"\n                variant=\"outlined\"\n                value={survey.title}\n                onChange={handleTitleUpdate}\n              />\n              <TextField\n                className={classes.input}\n                label={l('detailsDescriptionLabel')}\n                multiline\n                rows=\"4\"\n                margin=\"normal\"\n                variant=\"outlined\"\n                helperText={l('detailsDescriptionInfo')}\n                value={survey.description}\n                onChange={handleDescriptionUpdate}\n              />\n            </Paper>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              {l('introText')}\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <TextField\n                className={classes.input}\n                label={l('introTextLabel')}\n                multiline\n                rows=\"4\"\n                margin=\"normal\"\n                variant=\"outlined\"\n                helperText={l('introTextInfo')}\n                value={survey.intro}\n                onChange={handleIntroUpdate}\n              />\n            </Paper>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              {l('questionsText')}\n            </Typography>\n\n            <Box>\n              {survey.questions.map((x, i) => (\n                <Question\n                  key={x.id}\n                  index={i}\n                  survey={survey}\n                  question={x}\n                  setSurvey={setSurvey}\n                  expanded={expanded.includes(i)}\n                  handleExpandChange={handleChange}\n                />\n              ))}\n\n              <Box\n                style={{\n                  display: 'flex',\n                  flexDirection: isFirstQuestion ? 'row' : 'row-reverse'\n                }}\n              >\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className={classes.questionButton}\n                  startIcon={<AddIcon />}\n                  size=\"large\"\n                  onClick={handleQuestionCreate}\n                >\n                  {isFirstQuestion\n                    ? l`questionCreateButtonFirst`\n                    : l`questionCreateButton`}\n                </Button>\n              </Box>\n            </Box>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Scoring & Grading\n            </Typography>\n\n            <Box>\n              <ExpansionPanel\n                expanded={expanded.includes('definedScores')}\n                onChange={handleChange('definedScores')}\n              >\n                <ExpansionPanelSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls=\"panel1bh-content\"\n                  id=\"panel1bh-header\"\n                >\n                  <Box className={classes.scoreHeader}>\n                    <Typography\n                      variant=\"h6\"\n                      display=\"block\"\n                      className={classes.scoreTitle}\n                    >\n                      Defined Scores\n                    </Typography>\n                    <Typography variant=\"caption\" display=\"block\">\n                      See all defined scores from all questions in this survey\n                    </Typography>\n                  </Box>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <Box>\n                    <HelpBox className={classes.scoreHelpBox}>\n                      The values from scores with the \"Saved\" checkbox ticked\n                      will be saved to the system after a user completes this\n                      survey. All other values will be lost. The unsaved score\n                      values, however, can still be used while calculating other\n                      score values.\n                    </HelpBox>\n                    <SurveyScoreTable survey={survey} />\n                  </Box>\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n              <ExpansionPanel\n                expanded={expanded.includes('customScores')}\n                onChange={handleChange('customScores')}\n              >\n                <ExpansionPanelSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls=\"panel1bh-content\"\n                  id=\"panel1bh-header\"\n                >\n                  <Box className={classes.scoreHeader}>\n                    <Typography\n                      variant=\"h6\"\n                      display=\"block\"\n                      className={classes.scoreTitle}\n                    >\n                      Custom Scores\n                    </Typography>\n                    <Typography variant=\"caption\" display=\"block\">\n                      Combine scores from questions into new custom scores with\n                      logical and mathematical statements.\n                    </Typography>\n                  </Box>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  <SurveyScore survey={survey} setSurvey={setSurvey} />\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            </Box>\n          </Box>\n\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Development\n            </Typography>\n\n            <Paper className={classes.sectionPaperScore}>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.developmentButton}\n                onClick={handlePresetSave}\n              >\n                Save to presets\n              </Button>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.developmentButton}\n                onClick={handlePresetMenuOpen}\n              >\n                Load from presets\n              </Button>\n              <br />\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                className={classes.developmentButton}\n                onClick={handlePresetClear}\n              >\n                Discard this survey\n              </Button>\n              <br />\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                className={classes.developmentButton}\n                onClick={handlePresetClearAll}\n              >\n                Clear survey presets\n              </Button>\n            </Paper>\n          </Box>\n        </Grid>\n        <Grid item md={6} sm={12} xs={12}></Grid>\n      </Grid>\n\n      <QuestionScoreInputDialog survey={survey} />\n      <QuestionScoreDialog survey={survey} />\n\n      <Menu\n        id=\"question-type-menu\"\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleQuestionTypeClose(null)}\n      >\n        {Object.keys(enabledQuestionTypes).map(x => (\n          <MenuItem onClick={handleQuestionTypeClose(x)} key={x}>\n            <ListItemIcon>{enabledQuestionTypes[x]}</ListItemIcon>\n            <Typography variant=\"inherit\">{l`questionsType`[x]}</Typography>\n          </MenuItem>\n        ))}\n      </Menu>\n\n      <Menu\n        id=\"question-preset-menu\"\n        anchorEl={presetMenuAnchorEl}\n        keepMounted\n        open={Boolean(presetMenuAnchorEl)}\n        onClose={handlePresetMenuClose(null)}\n      >\n        {surveyPresets.map(x => (\n          <MenuItem onClick={handlePresetMenuClose(x.id)} key={x}>\n            <ListItemText\n              primary={x.title || 'Untitled Survey'}\n              secondary={x.id}\n            />\n          </MenuItem>\n        ))}\n      </Menu>\n    </div>\n  );\n};\n","/**\n * @file Redirects user's from login and register pages if already logged in\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nimport { AuthContext } from './auth';\n\nfunction AuthRoute({ component: Component, ...rest }) {\n  const { user } = useContext(AuthContext);\n  function handleRedirect() {\n    const type = user.type;\n    switch (type) {\n      case 'S':\n        return <Redirect to=\"/specialist\" />;\n      case 'O':\n        return <Redirect to=\"/organization\" />;\n      default:\n        return <Redirect to=\"/\" />;\n    }\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={props => (user ? handleRedirect() : <Component {...props} />)}\n    />\n  );\n}\n\nexport default AuthRoute;\n","/**\n * @file The Home view page\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport AssignmentIndIcon from '@material-ui/icons/AssignmentInd';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles(theme => ({\n  page: {\n    display: 'flex',\n    height: 'calc(100vh - 64px)',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  button: {\n    margin: theme.spacing(1),\n    width: 300\n  }\n}));\n\nfunction Home() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.page}>\n      <Link to=\"/organization\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          className={classes.button}\n          startIcon={<AssignmentIcon />}\n        >\n          Organization Editor\n        </Button>\n      </Link>\n      <Link to=\"/survey\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          className={classes.button}\n          startIcon={<AssignmentIndIcon />}\n        >\n          Survey Editor\n        </Button>\n      </Link>\n    </div>\n  );\n}\n\nexport default Home;\n","/**\n * @file The Login view page\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { useContext, useState } from 'react';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport TextField from '../components/CachedInput';\n// import Locale from '../components/Locale';\n// import Translation from '../components/question/questionLocale.json';\nimport { AuthContext } from '../context/auth';\n\n// const l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  section: {\n    marginBottom: 15,\n    width: 500\n  },\n  sectionTitle: {\n    margin: 15\n  },\n  sectionPaper: {\n    padding: '0 16px 16px 16px'\n  },\n  input: {\n    width: '100%'\n  },\n  button: {\n    width: '100%',\n    marginTop: theme.spacing(2)\n  }\n}));\n\nfunction Login(props) {\n  const classes = useStyles();\n  const context = useContext(AuthContext);\n\n  let inputs = {\n    username: '',\n    password: ''\n  };\n  const [values, setValues] = useState({ ...inputs });\n  const [errors, setErrors] = useState({});\n\n  const onChange = input => value => {\n    switch (input) {\n      case 'username':\n        return setValues({ ...values, username: value });\n      case 'password':\n        return setValues({ ...values, password: value });\n      default:\n        return values;\n    }\n  };\n\n  const [loginUser] = useMutation(LOGIN_USER, {\n    update(proxy, result) {\n      // Parse the result to the app context\n      context.login(result.data.login);\n      // redirect user to home page based on user's type\n      const category = result.data.login.type;\n      switch (category) {\n        case 'S':\n          return props.history.push('/specialist');\n        case 'O':\n          return props.history.push('/organization');\n        default:\n          return props.history.push('/');\n      }\n    },\n    onError(err) {\n      setErrors(err.graphQLErrors[0].extensions.exception.errors);\n    },\n    variables: values\n  });\n\n  const onSubmit = event => {\n    event.preventDefault();\n    loginUser();\n  };\n\n  return (\n    <div>\n      <Grid container justify=\"center\" spacing={2}>\n        <Grid item>\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Login\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <form\n                className={classes.container}\n                onSubmit={onSubmit}\n                noValidate\n                autoComplete=\"off\"\n              >\n                <TextField\n                  className={classes.input}\n                  label=\"Username\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"text\"\n                  error={errors.username ? true : false}\n                  value={values.username}\n                  onChange={onChange('username')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Password\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"password\"\n                  error={errors.password ? true : false}\n                  value={values.password}\n                  onChange={onChange('password')}\n                />\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\"\n                  type=\"submit\"\n                >\n                  Login\n                </Button>\n              </form>\n              {Object.keys(errors).length > 0 && (\n                <div>\n                  <ul>\n                    {Object.values(errors).map(value => (\n                      <li key={value}>{value}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </Paper>\n          </Box>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nconst LOGIN_USER = gql`\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      type\n      username\n      email\n      createdAt\n      token\n    }\n  }\n`;\nexport default Login;\n","/**\n * @file The registration view page\n * @author Benard Gathimba <benard.gathimba@metropolia.fi>\n */\n\nimport React, { useContext, useState } from 'react';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '../components/CachedInput';\nimport Button from '@material-ui/core/Button';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { AuthContext } from '../context/auth';\n// import Locale from '../components/Locale';\n// import Translation from '../components/question/questionLocale.json';\n\n// const l = Locale(Translation);\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  input: {\n    width: '100%'\n  },\n  button: {\n    width: '100%',\n    marginTop: theme.spacing(2)\n  },\n  section: {\n    marginBottom: 15,\n    width: 500\n  },\n  sectionTitle: {\n    margin: 15\n  },\n  sectionPaper: {\n    padding: '0 16px 16px 16px'\n  }\n}));\n\nfunction Register(props) {\n  const classes = useStyles();\n  const context = useContext(AuthContext);\n  // registration variables\n  let inputs = {\n    type: '',\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  };\n\n  const [values, setValues] = useState({ ...inputs });\n  const [errors, setErrors] = useState({});\n\n  const onChange = input => value => {\n    switch (input) {\n      case 'U':\n        return setValues({ ...values, type: 'U' });\n      case 'S':\n        return setValues({ ...values, type: 'S' });\n      case 'O':\n        return setValues({ ...values, type: 'O' });\n      case 'username':\n        return setValues({ ...values, username: value });\n      case 'email':\n        return setValues({ ...values, email: value });\n      case 'password':\n        return setValues({ ...values, password: value });\n      case 'confirmPassword':\n        return setValues({ ...values, confirmPassword: value });\n      default:\n        return values;\n    }\n  };\n\n  const [addUser] = useMutation(REGISTER_USER, {\n    update(proxy, result) {\n      context.login(result.data.register);\n      const category = result.data.register.type;\n      switch (category) {\n        case 'S':\n          return props.history.push('/specialist');\n        case 'O':\n          return props.history.push('/organization');\n        default:\n          return props.history.push('/');\n      }\n    },\n    onError(err) {\n      setErrors(err.graphQLErrors[0].extensions.exception.errors);\n    },\n    variables: values\n  });\n\n  const onSubmit = event => {\n    event.preventDefault();\n    addUser();\n  };\n\n  return (\n    <div>\n      <Grid container justify=\"center\" spacing={2}>\n        <Grid item>\n          <Box className={classes.section}>\n            <Typography variant=\"h6\" className={classes.sectionTitle}>\n              Registration\n            </Typography>\n            <Paper className={classes.sectionPaper}>\n              <form\n                className={classes.container}\n                onSubmit={onSubmit}\n                noValidate\n                autoComplete=\"off\"\n              >\n                <br />\n                <FormControl component=\"fieldset\">\n                  <FormLabel component=\"legend\">Select User Group</FormLabel>\n                  <RadioGroup aria-label=\"position\" name=\"type\">\n                    <FormControlLabel\n                      value=\"U\"\n                      control={<Radio color=\"primary\" />}\n                      label=\"User Registration\"\n                      labelPlacement=\"end\"\n                      onChange={onChange('U')}\n                    />\n                    <FormControlLabel\n                      value=\"S\"\n                      control={<Radio color=\"primary\" />}\n                      label=\"Specialist Registration\"\n                      labelPlacement=\"end\"\n                      onChange={onChange('S')}\n                    />\n                    <FormControlLabel\n                      value=\"O\"\n                      control={<Radio color=\"primary\" />}\n                      label=\"Organization Registration\"\n                      labelPlacement=\"end\"\n                      onChange={onChange('O')}\n                    />\n                  </RadioGroup>\n                </FormControl>\n                <TextField\n                  className={classes.input}\n                  label=\"Username\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"text\"\n                  error={errors.username ? true : false}\n                  value={values.username}\n                  onChange={onChange('username')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Email\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"email\"\n                  error={errors.email ? true : false}\n                  value={values.email}\n                  onChange={onChange('email')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Password\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"password\"\n                  error={errors.password ? true : false}\n                  value={values.password}\n                  onChange={onChange('password')}\n                />\n                <TextField\n                  className={classes.input}\n                  label=\"Confirm Password\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"password\"\n                  error={errors.confirmPassword ? true : false}\n                  value={values.confirmPassword}\n                  onChange={onChange('confirmPassword')}\n                />\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\"\n                  type=\"submit\"\n                >\n                  Submit\n                </Button>\n              </form>\n              {Object.keys(errors).length > 0 && (\n                <div>\n                  <ul>\n                    {Object.values(errors).map(value => (\n                      <li key={value}>{value}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </Paper>\n          </Box>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nconst REGISTER_USER = gql`\n  mutation register(\n    $type: String!\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      registerInput: {\n        type: $type\n        username: $username\n        email: $email\n        password: $password\n        confirmPassword: $confirmPassword\n      }\n    ) {\n      type\n      username\n      email\n      createdAt\n      token\n    }\n  }\n`;\n\nexport default Register;\n","import React from 'react';\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport { Header } from './components/Header';\nimport { SpecialistDashboard } from './views/SpecialistDashboard';\nimport { OrganizationPanel } from './views/OrganizationPanel';\nimport { SurveyEdit } from './views/SurveyEdit';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/core/styles';\n\nimport { AuthProvider } from './context/auth';\nimport AuthRoute from './context/AuthRoute';\nimport ConfirmationDialog from './components/ConfirmationDialog';\nimport { Home, Login, Register } from './views';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#5A5C9C'\n    }\n  }\n});\n\nconst App = () => (\n  <AuthProvider>\n    <ThemeProvider theme={theme}>\n      <Router>\n        <div style={{ backgroundColor: '#EEE' }}>\n          <Header />\n\n          <Switch>\n            <AuthRoute exact path=\"/\" component={Home} />\n            <AuthRoute exact path=\"/login\" component={Login} />\n            <AuthRoute exact path=\"/register\" component={Register} />\n            <Route path=\"/test\">\n              <div>This is a test page.</div>\n            </Route>\n            <Route path=\"/survey/:id\" component={SurveyEdit} />\n            <Route path=\"/survey\" component={SurveyEdit} />\n            <Route path=\"/specialist\">\n              <SpecialistDashboard />\n            </Route>\n            <Route path=\"/organization\">\n              <OrganizationPanel />\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n\n      <ConfirmationDialog />\n    </ThemeProvider>\n  </AuthProvider>\n);\n\nexport default App;\n","import React from 'react';\nimport App from './App';\nimport ApolloClient from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { createHttpLink } from 'apollo-link-http';\nimport { ApolloProvider } from '@apollo/react-hooks';\n\nconst httpLink = createHttpLink({\n    uri: 'http://localhost:4000'\n});\n\nconst client = new ApolloClient({\n    link: httpLink,\n    cache: new InMemoryCache()\n});\n\nexport default (\n    <ApolloProvider client = { client }>\n        <App />\n    </ApolloProvider>\n)","import ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport ApolloProvider from './ApolloProvider';\n\nimport 'typeface-roboto';\n\nif (!localStorage.getItem('lang')) {\n  localStorage.setItem('lang', 'en');\n}\n\nReactDOM.render(ApolloProvider, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}